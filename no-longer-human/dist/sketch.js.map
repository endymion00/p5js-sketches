{"version":3,"file":"sketch.js","sources":["../src/main.ts"],"sourcesContent":["import * as p5ex from \"p5ex\";\r\n\r\nconst SKETCH_NAME = \"NoLongerHuman\";\r\n\r\nclass CharacterSprite extends p5ex.PhysicsBody implements p5ex.CleanableSprite {\r\n  public isToBeRemoved = false;\r\n  private birthTimer = new p5ex.NonLoopedFrameCounter(30, () => {\r\n    this.deathTimer.on();\r\n  });\r\n  private deathTimer = new p5ex.NonLoopedFrameCounter(60, () => {\r\n    this.isToBeRemoved = true;\r\n  }).off();\r\n  private alphaValue = 0;\r\n\r\n  public constructor(\r\n    protected readonly p: p5ex.p5exClass,\r\n    protected readonly character: string,\r\n    protected readonly shapeColor: p5ex.ShapeColor\r\n  ) {\r\n    super();\r\n    this.position.set(0.5 * p.nonScaledWidth, 0.75 * p.nonScaledHeight);\r\n  }\r\n\r\n  public setPosition(position: p5.Vector): CharacterSprite {\r\n    this.position.set(position);\r\n    return this;\r\n  }\r\n\r\n  public step(): void {\r\n    super.step();\r\n\r\n    this.birthTimer.step();\r\n    this.deathTimer.step();\r\n\r\n    this.alphaValue = Math.ceil(\r\n      255 *\r\n        (this.birthTimer.isOn\r\n          ? this.birthTimer.getProgressRatio()\r\n          : 1 - this.deathTimer.getProgressRatio())\r\n    );\r\n  }\r\n\r\n  public draw(): void {\r\n    this.shapeColor.applyColor(this.alphaValue);\r\n    this.p.push();\r\n    this.p.translate(this.position.x, this.position.y);\r\n    this.p.text(this.character, 0, 0);\r\n    this.p.pop();\r\n  }\r\n\r\n  public clean(): void {}\r\n}\r\n\r\ninterface Page {\r\n  lineList: string[];\r\n}\r\n\r\nconst sketch = (p: p5ex.p5exClass): void => {\r\n  // ---- variables\r\n  const ASSET_PATH =\r\n    \"https://fal-works.github.io/p5js-sketches/no-longer-human/assets/\";\r\n  const FONT_SIZE = 32;\r\n  const LINE_INTERVAL = FONT_SIZE * 1.5;\r\n  const characters = new p5ex.CleanableSpriteArray();\r\n  const shapeColor = new p5ex.ShapeColor(p, undefined, p.color(32), true);\r\n  let backgroundColor: p5.Color;\r\n  let currentFont: p5.Font;\r\n  let pageList: Page[] = [];\r\n  let currentPageIndex = 0;\r\n  let currentLineList: string[] = [];\r\n  let currentLineIndex = 0;\r\n  let currentCharacterIndex = 0;\r\n  let characterPosition = p.createVector();\r\n  let defaultCharacterPositionY: number;\r\n  let sentenceReaderTimer: p5ex.NonLoopedFrameCounter;\r\n  let characterGeneraterTimer: p5ex.LoopedFrameCounter;\r\n\r\n  // ---- functions\r\n  /*\r\n  function nextCharacter(\r\n    textData: string,\r\n    index: number\r\n  ): { character: string; nextIndex: number } {\r\n    const currentIndex = index >= textData.length || index < 0 ? 0 : index;\r\n    const incrementedIndex = currentIndex + 1;\r\n\r\n    return {\r\n      character: textData.charAt(currentIndex),\r\n      nextIndex: incrementedIndex >= textData.length ? 0 : incrementedIndex\r\n    };\r\n  }\r\n  */\r\n\r\n  function splitWithoutRemove(s: string, deliminator: string): string[] {\r\n    let index = 0;\r\n    const len = s.length;\r\n    const result: string[] = [];\r\n\r\n    while (index < len) {\r\n      const nextIndex = s.indexOf(deliminator, index) + 1;\r\n\r\n      if (nextIndex <= 0) {\r\n        result.push(s.substring(index));\r\n        return result;\r\n      } else {\r\n        result.push(s.substring(index, nextIndex));\r\n      }\r\n      index = nextIndex;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Formats a given sentence and returns a list of lines.\r\n   * @param sentence\r\n   * @param minLineLength\r\n   * @param maxLineLength\r\n   */\r\n  function formatSentence(\r\n    sentence: string,\r\n    minLineLength: number = 13,\r\n    maxLineLength: number = 17\r\n  ): string[] {\r\n    const phrases = splitWithoutRemove(sentence, \"\\u3001\");\r\n    const emptyString = \"\";\r\n    let lineList: string[] = [];\r\n    let line = emptyString;\r\n    let phraseIndex = 0;\r\n    const len = phrases.length;\r\n    let phrase = phrases[phraseIndex];\r\n\r\n    while (phraseIndex < len) {\r\n      if (line.length < minLineLength && phrase.length > maxLineLength) {\r\n        const substringLength = maxLineLength - line.length;\r\n        line = line.concat(phrase.substring(0, substringLength));\r\n        phrase = phrase.substring(substringLength);\r\n\r\n        if (phrase.startsWith(\"\\u3001\") || phrase.startsWith(\"\\u3002\")) {\r\n          line = line.concat(phrase.substring(0, 1));\r\n          phrase = phrase.substring(1);\r\n        }\r\n\r\n        lineList.push(line);\r\n        line = emptyString;\r\n\r\n        continue;\r\n      }\r\n\r\n      if (line.length + phrase.length <= maxLineLength) {\r\n        line = line.concat(phrase);\r\n        phraseIndex += 1;\r\n\r\n        if (phraseIndex >= len) break;\r\n\r\n        phrase = phrases[phraseIndex];\r\n\r\n        continue;\r\n      }\r\n\r\n      lineList.push(line);\r\n      line = emptyString;\r\n    }\r\n\r\n    if (line !== emptyString) lineList.push(line);\r\n\r\n    return lineList;\r\n  }\r\n\r\n  function nextPage(\r\n    pageList: Page[],\r\n    index: number\r\n  ): { page: Page; index: number } {\r\n    const currentIndex = index >= pageList.length || index < 0 ? 0 : index;\r\n    const incrementedIndex = currentIndex + 1;\r\n\r\n    return {\r\n      page: pageList[currentIndex],\r\n      index: incrementedIndex >= pageList.length ? 0 : incrementedIndex\r\n    };\r\n  }\r\n\r\n  function updatePageIndex(value: number): void {\r\n    currentPageIndex = value;\r\n  }\r\n\r\n  /*\r\n    function isKanji(character: string): boolean {\r\n      const code = character.charCodeAt(0);\r\n  \r\n      return (\r\n        (code >= 0x4e00 && code <= 0x9fcf) ||\r\n        (code >= 0x3400 && code <= 0x4dbf) ||\r\n        (code >= 0x20000 && code <= 0x2a6df) ||\r\n        (code >= 0xf900 && code <= 0xfadf) ||\r\n        (code >= 0x2f800 && code <= 0x2fa1f)\r\n      );\r\n    }\r\n  \r\n    function isPunctuation(character: string): boolean {\r\n      const code = character.charCodeAt(0);\r\n  \r\n      for (const punctuationCode of punctuationCodeList) {\r\n        if (code === punctuationCode) return true;\r\n      }\r\n  \r\n      return false;\r\n    }\r\n  */\r\n\r\n  function setLineList(lineList: string[]): void {\r\n    currentLineList = lineList;\r\n    currentLineIndex = 0;\r\n    currentCharacterIndex = 0;\r\n\r\n    characterPosition.set(\r\n      p.nonScaledWidth / 2 + 0.5 * (lineList.length - 1) * LINE_INTERVAL,\r\n      defaultCharacterPositionY\r\n    );\r\n\r\n    window.console.log(lineList);\r\n\r\n    characterGeneraterTimer.resetCount();\r\n    characterGeneraterTimer.on();\r\n  }\r\n\r\n  function devideArray<T>(array: T[], maxCountPerSegment: number): T[][] {\r\n    const segmentCount = Math.ceil(array.length / maxCountPerSegment);\r\n\r\n    const countPerSegment = Math.ceil(array.length / segmentCount);\r\n    const result: T[][] = [];\r\n\r\n    while (array.length > 0) {\r\n      result.push(array.splice(0, countPerSegment));\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // ---- Setup & Draw etc.\r\n  p.preload = () => {\r\n    currentFont = p.loadFont(`${ASSET_PATH}OradanoGSRR-subset.ttf`);\r\n    p.loadStrings(`${ASSET_PATH}sentences.txt`, (paragraphList: string[]) => {\r\n      pageList = paragraphList\r\n        .map(paragraph => splitWithoutRemove(paragraph, \"\\u3002\"))\r\n        .reduce((pre, current) => {\r\n          pre.push(...current);\r\n          return pre;\r\n        }, [])\r\n        .map(sentence => sentence.trim())\r\n        .map(sentence => devideArray(formatSentence(sentence), 12))\r\n        .map(e => {\r\n          window.console.log(e);\r\n          return e;\r\n        })\r\n        .reduce((pre, current) => {\r\n          pre.push(...current);\r\n          return pre;\r\n        }, [])\r\n        .map(\r\n          (lines): Page => {\r\n            return { lineList: lines };\r\n          }\r\n        );\r\n    });\r\n  };\r\n\r\n  p.setup = () => {\r\n    p.createScalableCanvas(p5ex.ScalableCanvasTypes.SQUARE640x640);\r\n\r\n    backgroundColor = p.color(244, 244, 250);\r\n    p.textFont(currentFont, FONT_SIZE);\r\n    p.textAlign(p.CENTER);\r\n\r\n    defaultCharacterPositionY = p.nonScaledHeight * 0.1;\r\n\r\n    sentenceReaderTimer = new p5ex.NonLoopedFrameCounter(60, () => {\r\n      const next = nextPage(pageList, currentPageIndex);\r\n      setLineList(next.page.lineList);\r\n      updatePageIndex(next.index);\r\n    });\r\n\r\n    characterGeneraterTimer = new p5ex.LoopedFrameCounter(2, () => {\r\n      characters.push(\r\n        new CharacterSprite(\r\n          p,\r\n          currentLineList[currentLineIndex].charAt(currentCharacterIndex),\r\n          shapeColor\r\n        ).setPosition(characterPosition)\r\n      );\r\n      currentCharacterIndex += 1;\r\n      characterPosition.add(0, FONT_SIZE);\r\n\r\n      if (currentCharacterIndex >= currentLineList[currentLineIndex].length) {\r\n        currentCharacterIndex = 0;\r\n        currentLineIndex += 1;\r\n        characterPosition.set(\r\n          characterPosition.x - LINE_INTERVAL,\r\n          defaultCharacterPositionY\r\n        );\r\n      }\r\n\r\n      if (currentLineIndex >= currentLineList.length) {\r\n        characterGeneraterTimer.off();\r\n        sentenceReaderTimer.resetCount();\r\n        sentenceReaderTimer.on();\r\n      }\r\n    }).off();\r\n  };\r\n\r\n  p.draw = () => {\r\n    p.background(backgroundColor);\r\n\r\n    sentenceReaderTimer.step();\r\n    characterGeneraterTimer.step();\r\n\r\n    characters.step();\r\n    characters.clean();\r\n\r\n    p.scalableCanvas.scale();\r\n    characters.draw();\r\n    p.scalableCanvas.cancelScale();\r\n  };\r\n\r\n  p.windowResized = () => {};\r\n\r\n  p.mousePressed = () => {\r\n    // if (!p5ex.mouseIsInCanvas(p)) return;\r\n    // p.noLoop();\r\n  };\r\n\r\n  p.keyTyped = () => {\r\n    if (p.key === \"p\") p.noLoop();\r\n  };\r\n};\r\n\r\nnew p5ex.p5exClass(sketch, SKETCH_NAME);\r\n"],"names":["p5ex.PhysicsBody","p5ex.NonLoopedFrameCounter","p5ex.CleanableSpriteArray","p5ex.ShapeColor","p5ex.ScalableCanvasTypes","p5ex.LoopedFrameCounter","p5ex.p5exClass"],"mappings":"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"}