/**
 * NoLongerHuman.
 * Website => https://www.fal-works.com/
 * Including module: p5ex (Copyright 2018 FAL, licensed under MIT).
 * @copyright 2018 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.0
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";class t{}class e extends t{get width(){return this.rightPositionX-this.leftPositionX}get height(){return this.bottomPositionY-this.topPositionY}get area(){return this.width*this.height}constructor(t,e,i,s,n=0){super(),this.leftPositionX=t-n,this.topPositionY=e-n,this.rightPositionX=i+n,this.bottomPositionY=s+n}contains(t,e=0){return t.x>=this.leftPositionX-e&&t.x<=this.rightPositionX+e&&t.y>=this.topPositionY-e&&t.y<=this.bottomPositionY+e}constrain(t,e=0){t.x<this.leftPositionX-e?t.x=this.leftPositionX-e:t.x>this.rightPositionX+e&&(t.x=this.rightPositionX+e),t.y<this.topPositionY-e?t.y=this.topPositionY-e:t.y>this.bottomPositionY+e&&(t.y=this.bottomPositionY+e)}}class i{constructor(t,i,s,n){this.p=t,this.canvasElement=t.createCanvas(i.scaledWidth,i.scaledHeight,n),this.canvasElement&&"parent"in this.canvasElement&&this.canvasElement.parent(s),this.region=new e(0,0,0,0),this.nonScaledShortSideLength=i.nonScaledShortSideLength,this.updateSize()}get scaleFactor(){return this._scaleFactor}get nonScaledWidth(){return this._nonScaledWidth}get nonScaledHeight(){return this._nonScaledHeight}get aspectRatio(){return this._aspectRatio}resize(t){this.p.resizeCanvas(t.scaledWidth,t.scaledHeight),this.nonScaledShortSideLength=t.nonScaledShortSideLength,this.updateSize()}updateSize(){const t=this.p;this._scaleFactor=Math.min(t.width,t.height)/this.nonScaledShortSideLength,this._inversedScaleFactor=1/this._scaleFactor,this._nonScaledWidth=t.width/this._scaleFactor,this._nonScaledHeight=t.height/this._scaleFactor,this._aspectRatio=t.width/t.height,this.region.rightPositionX=this._nonScaledWidth,this.region.bottomPositionY=this._nonScaledHeight}scale(){this.p.scale(this._scaleFactor)}cancelScale(){this.p.scale(this._inversedScaleFactor)}getNonScaledValueOf(t){return t/this._scaleFactor}}i.DUMMY_PARAMETERS={scaledWidth:100,scaledHeight:100,nonScaledShortSideLength:100};const s={SQUARE640x640:"SQUARE640x640",RECT640x480:"RECT640x480",FULL:"FULL",CUSTOM:"CUSTOM"};class n{constructor(t,e){this.p=t,this.p5Color=e}stroke(){this.p.currentRenderer.stroke(this.p5Color)}fill(){this.p.currentRenderer.fill(this.p5Color)}}class o{constructor(t){this.p=t}stroke(){this.p.currentRenderer.noStroke()}fill(){this.p.currentRenderer.noFill()}}class a{stroke(){}fill(){}}class r{constructor(t,e,i=256){this.p=t;const s=[];for(let n=0;n<i;n+=1)s.push(t.color(t.red(e),t.green(e),t.blue(e),t.alpha(e)*n/(i-1)));this.colorArray=s,this.maxIndex=i-1}stroke(t){this.p.currentRenderer.stroke(this.getColor(t))}fill(t){this.p.currentRenderer.fill(this.getColor(t))}getColor(t){return this.colorArray[t?Math.floor(this.p.map(t,0,255,0,this.maxIndex)):this.maxIndex]}}function h(t,e,i,s){return t&&void 0!==e?null===e?new o(t):i?new r(t,e,s):new n(t,e):new a}class c{constructor(t,e,i,s,n){this.strokeColor=h(t,e,s,n),this.fillColor=h(t,i,s,n)}applyColor(t){this.strokeColor.stroke(t),this.fillColor.fill(t)}}c.UNDEFINED=new c(void 0,void 0,void 0);const l=()=>{},d=(Math.PI,new p5(t=>{t.setup=(()=>{t.noCanvas()})}));Math.PI,d.createVector(),d.createVector();class u{constructor(t=256){this.array=new Array(t),this.length=0}get(t){return this.array[t]}getLast(){return this.array[this.length-1]}push(t){return this.array[this.length]=t,this.length+=1,this.length}pushRawArray(t,e=t.length){for(let i=0;i<e;i+=1)this.array[this.length+i]=t[i];return this.length+=e,this.length}pushAll(t){return this.pushRawArray(t.array,t.length)}pop(){return this.length-=1,this.array[this.length]}clear(){this.length=0}loop(t){!function(t,e,i){let s=0;for(;s<i;)e(t[s],s,t),s+=1}(this.array,t,this.length)}loopBackwards(t){!function(t,e,i){for(;i--;)e(t[i],i,t)}(this.array,t,this.length)}roundRobin(t){!function(t,e,i){for(let s=0,n=i-1;s<n;s+=1)for(let o=s+1;o<i;o+=1)e(t[s],t[o])}(this.array,t,this.length)}nestedLoopJoin(t,e){!function(t,e,i,s,n){for(let o=0;o<s;o+=1)for(let s=0;s<n;s+=1)i(t[o],e[s])}(this.array,t.array,e,this.length,t.length)}}class p extends u{static drawFunction(t){t.draw()}draw(){this.loop(p.drawFunction)}}class g extends u{static stepFunction(t){t.step()}step(){this.loop(g.stepFunction)}}class m extends u{}m.prototype.step=g.prototype.step,m.prototype.draw=p.prototype.draw;class y extends u{constructor(t){super(t),this.recentRemovedElements=new u(t)}clean(){this.recentRemovedElements.clear();let t=0;for(let e=0;e<this.length;e+=1)this.array[e].clean(),this.array[e].isToBeRemoved?this.recentRemovedElements.push(this.array[e]):(this.array[t]=this.array[e],t+=1);this.length=t}}class S extends y{}S.prototype.draw=m.prototype.draw,S.prototype.step=m.prototype.step;d.createVector(),d.createVector();function v(t,e,i,s,n,o,a,r){const h=t,c=r||h.pixelDensity();for(let l=0;l<c;l+=1)for(let t=0;t<c;t+=1){const r=4*((i*c+t)*h.width*c+(e*c+l));h.pixels[r]=s,h.pixels[r+1]=n,h.pixels[r+2]=o,h.pixels[r+3]=a}}class f{constructor(){this.position=new p5.Vector,this.velocity=new p5.Vector}step(){this.position.add(this.velocity)}getSpeed(){return this.velocity.mag()}getDirection(){return this.velocity.heading()}addSpeed(t){this.velocity.setMag(Math.max(0,this.velocity.mag()+t))}}const C=d.createVector();class R{constructor(){this.kinematicQuantity=new f,this.position=this.kinematicQuantity.position,this.velocity=this.kinematicQuantity.velocity,this.mass=1,this.collisionRadius=0,this.hasFriction=!1,this.decelerationFactor=1}get x(){return this.position.x}get y(){return this.position.y}get z(){return this.position.z}get vx(){return this.velocity.x}get vy(){return this.velocity.y}get vz(){return this.velocity.z}getSpeed(){return this.kinematicQuantity.getSpeed()}getDirection(){return this.kinematicQuantity.getDirection()}setFriction(t){0!==t?(this.hasFriction=!0,this.decelerationFactor=1-t):this.hasFriction=!1}constrainSpeed(t){this.velocity.magSq()>t*t&&this.velocity.setMag(t)}step(){this.kinematicQuantity.step(),this.hasFriction&&this.kinematicQuantity.velocity.mult(this.decelerationFactor)}accelerate(t,e,i){this.kinematicQuantity.velocity.add(t,e,i)}applyForce(t){this.accelerate(t.x/this.mass,t.y/this.mass,t.z/this.mass)}addSpeed(t){this.kinematicQuantity.addSpeed(t)}collides(t){return e=this.position,i=t.position,Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)+Math.pow(i.z-e.z,2)<this.collisionRadius*this.collisionRadius+t.collisionRadius*t.collisionRadius;var e,i}bounce(t,e=1){this.velocity.add(p5.Vector.mult(t,(1+e)*p5.Vector.dot(this.velocity,p5.Vector.mult(t,-1))))}attractEachOther(t,e,i=0,s,n){const o=this.calculateAttractionForce(t.position,e,i,s,n);o&&(this.applyForce(o),o.mult(-1),t.applyForce(o))}attractToPoint(t,e,i=0,s,n){const o=this.calculateAttractionForce(t,e,i,s,n);o&&this.applyForce(o)}calculateAttractionForce(t,e,i=0,s,n){const o=C;p5.Vector.sub(t,this.position,o);const a=o.magSq();let r=Math.abs(e)/a;return n&&r<n?null:(r=s?Math.min(Math.max(r,i),s):Math.max(r,i),o.setMag(r),e<0&&o.mult(-1),o)}}class x{constructor(){this.count=0}resetCount(t=0){return this.count=t,this}step(){this.count+=1}mod(t){return this.count%t}}class w extends x{get isOn(){return this._isOn}constructor(t,e=l){super(),this._isOn=!0,this.completeBehavior=e,this.durationFrameCount=t}on(t){return this._isOn=!0,t&&(this.durationFrameCount=t),this}off(){return this._isOn=!1,this}step(){this._isOn&&(this.count+=1,this.count>this.durationFrameCount&&this.completeCycle())}}class F extends w{get isCompleted(){return this._isCompleted}constructor(t,e){super(t,e),this._isCompleted=!1}on(t){return super.on(t),this}off(){return super.off(),this}resetCount(){return super.resetCount(),this._isCompleted=!1,this}getProgressRatio(){return this._isCompleted?1:this.count/this.durationFrameCount}completeCycle(){this._isCompleted=!0,this._isOn=!1,this.completeBehavior()}}var P;!function(t){t[t.BIRTH=0]="BIRTH",t[t.STOP=1]="STOP",t[t.DEATH=2]="DEATH"}(P||(P={}));var b,_;new class extends p5{setCurrentRenderer(t){this.currentRenderer=t}get nonScaledWidth(){return this.scalableCanvas.nonScaledWidth}get nonScaledHeight(){return this.scalableCanvas.nonScaledHeight}get idealFrameRate(){return this._idealFrameRate}get unitAngleSpeed(){return this._unitAngleSpeed}get unitSpeed(){return this._unitSpeed}get unitAccelerationMagnitude(){return this._unitAccelerationMagnitude}constructor(t,e,i){super(t,"string"==typeof e?document.getElementById(e)||void 0:e,i),this.node=e&&"boolean"!=typeof e?"string"==typeof e?document.getElementById(e)||document.body:e:document.body,this.currentRenderer=this,this.maxCanvasRegion={width:0,height:0,getShortSideLength(){return Math.min(this.width,this.height)}},this.updateMaxCanvasRegion(),this.setFrameRate()}setFrameRate(t=60){return this.frameRate(t),t&&(this._idealFrameRate=t,this._unitAngleSpeed=2*Math.PI/this._idealFrameRate,this._unitSpeed=1/this._idealFrameRate,this._unitAccelerationMagnitude=this._unitSpeed/this._idealFrameRate),this}updateMaxCanvasRegion(){if(this.maxCanvasRegion.width=this.windowWidth,this.maxCanvasRegion.height=this.windowHeight,this.node===document.body)return;const t=this.node.getBoundingClientRect();this.maxCanvasRegion.width=t.width,this.maxCanvasRegion.height=t.height}createScalableCanvas(t,e,s){this.scalableCanvasType=t,this.scalableCanvas=new i(this,this.createScalableCanvasParameter(t,e),this.node,s)}resizeScalableCanvas(t,e){this.scalableCanvas.resize(this.createScalableCanvasParameter(t||this.scalableCanvasType,e))}createScalableCanvasParameter(t,e){this.updateMaxCanvasRegion();const n=this.maxCanvasRegion.getShortSideLength();switch(t){case s.SQUARE640x640:return{scaledWidth:n,scaledHeight:n,nonScaledShortSideLength:640};case s.RECT640x480:return{scaledWidth:n,scaledHeight:.75*n,nonScaledShortSideLength:480};case s.FULL:return{scaledWidth:this.maxCanvasRegion.width,scaledHeight:this.maxCanvasRegion.height,nonScaledShortSideLength:640};default:return e||i.DUMMY_PARAMETERS}}}(t=>{const e="https://fal-works.github.io/p5js-sketches/no-longer-human/assets/",i=48,n=new S,o=new c(t,void 0,t.color(32),!0);let a,r,h,l,d,u=[],p=0,g=[],m=0,y=0,f=t.createVector();function C(){const e=function(t,e,i,s,n,o,a=1,r=1){const h=t.createGraphics(e,i);h.background(s),h.strokeWeight(2*r);for(let c=0;c<i;c+=r){const s=Math.pow(c/(i-1),a);h.stroke(t.lerpColor(n,o,s)),h.line(0,c,e-1,c)}return h}(t,t.nonScaledWidth,t.nonScaledHeight,t.color(252,252,253),t.color(252,252,253),t.color(208,208,216),3,2),i=function(t,e,i,s){const n=t.createGraphics(e,i),o=n.width,a=n.height,r=n.pixelDensity();n.loadPixels();for(let h=0;h<a;h+=1)for(let t=0;t<o;t+=1)v(n,t,h,0,0,0,255*Math.random()*s,r);return n.updatePixels(),n}(t,t.nonScaledWidth,t.nonScaledHeight,.05);return e.image(i,0,0),e}function x(t,e){let i=0;const s=t.length,n=[];for(;i<s;){const s=t.indexOf(e,i)+1;if(s<=0)return n.push(t.substring(i)),n;n.push(t.substring(i,s)),i=s}return n}t.preload=(()=>{r=t.loadFont(`${e}OradanoGSRR-subset.ttf`),t.loadStrings(`${e}sentences.txt`,t=>{u=t.map(t=>x(t,"。")).reduce((t,e)=>(t.push(...e),t),[]).map(t=>t.trim()).map(t=>(function(t,e){const i=Math.ceil(t.length/e),s=Math.ceil(t.length/i),n=[];for(;t.length>0;)n.push(t.splice(0,s));return n})(function(t,e=13,i=17){const s=x(t,"、");let n=[],o="",a=0;const r=s.length;let h=s[a];for(;a<r;)if(o.length<e&&h.length>i){const t=i-o.length;o=o.concat(h.substring(0,t)),((h=h.substring(t)).startsWith("、")||h.startsWith("。"))&&(o=o.concat(h.substring(0,1)),h=h.substring(1)),n.push(o),o=""}else if(o.length+h.length<=i){if(o=o.concat(h),(a+=1)>=r)break;h=s[a]}else n.push(o),o="";return""!==o&&n.push(o),n}(t),12)).reduce((t,e)=>(t.push(...e),t),[]).map(t=>({lineList:t}))})}),t.setup=(()=>{t.createScalableCanvas(s.SQUARE640x640);const e=C();t.scalableCanvas.scale(),t.image(e,0,0),t.scalableCanvas.cancelScale(),t.loadPixels(),a=t.pixels,t.textFont(r,32),t.textAlign(t.CENTER,t.CENTER),h=.09*t.nonScaledHeight,l=new F(30,()=>{const e=function(t,e){const i=e>=t.length||e<0?0:e,s=i+1;return{page:t[i],index:s>=t.length?0:s}}(u,p);_=e.page.lineList,g=_,m=0,y=0,f.set(t.nonScaledWidth/2+.5*(_.length-1)*i,h),d.resetCount(),d.on(),b=e.index,p=b}),d=new class extends w{constructor(t,e){super(t,e)}on(t){return super.on(t),this}off(){return super.off(),this}getProgressRatio(){return this.count/this.durationFrameCount}completeCycle(){this.completeBehavior(),this.count=0}}(2,()=>{n.push(new class extends R{constructor(t,e,i){super(),this.p=t,this.character=e,this.shapeColor=i,this.isToBeRemoved=!1,this.state=P.BIRTH,this.birthTimer=new F(30,()=>{this.deathDelayTimer.on(),this.state=P.STOP}),this.deathDelayTimer=new F(120,()=>{this.deathTimer.on(),this.state=P.DEATH;const t=this.p.random(-1,1)*this.p.QUARTER_PI;this.acceleration.set(this.p.createVector(Math.cos(t),Math.sin(t)).mult(.05)),this.rotationAcceleration=this.p.random(-1,1)*this.p.TWO_PI*1e-4}),this.deathTimer=new F(120,()=>{this.isToBeRemoved=!0}).off(),this.rotationAngle=0,this.rotationVelocity=0,this.rotationAcceleration=0,this.alphaValue=0,this.acceleration=t.createVector()}setPosition(t){return this.position.set(t),this}step(){switch(this.velocity.add(this.acceleration),super.step(),this.rotationVelocity+=this.rotationAcceleration,this.rotationAngle+=this.rotationVelocity,this.birthTimer.step(),this.deathDelayTimer.step(),this.deathTimer.step(),this.state){case P.BIRTH:this.alphaValue=Math.ceil(255*this.birthTimer.getProgressRatio());break;case P.STOP:this.alphaValue=255;break;case P.DEATH:this.alphaValue=Math.ceil(255*(1-(t=this.deathTimer.getProgressRatio(),1-Math.pow(t-1,2))))}var t}draw(){this.alphaValue<1||(this.shapeColor.applyColor(this.alphaValue),this.p.push(),this.p.translate(this.position.x,this.position.y),this.p.rotate(this.rotationAngle),this.p.text(this.character,0,0),this.p.pop())}clean(){this.p.scalableCanvas.region.contains(this.position,30)||(this.isToBeRemoved=!0)}}(t,g[m].charAt(y),o).setPosition(f)),y+=1,f.add(0,32),y>=g[m].length&&(y=0,m+=1,f.set(f.x-i,h)),m>=g.length&&(d.off(),l.resetCount(),l.on(180))}).off()}),t.draw=(()=>{l.step(),d.step(),n.step(),n.clean(),t.pixels=a,t.updatePixels(),t.scalableCanvas.scale(),n.draw(),t.scalableCanvas.cancelScale()}),t.windowResized=(()=>{}),t.mousePressed=(()=>{}),t.keyTyped=(()=>{"p"===t.key&&t.noLoop()})},"NoLongerHuman")}();