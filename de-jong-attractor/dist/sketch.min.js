/**
 * De Jong Attractor.
 * Website => https://www.fal-works.com/
 * Including module: p5ex (Copyright 2018 FAL, licensed under MIT).
 * @copyright 2018 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.0
 * @license CC-BY-SA-3.0
 */
var createDeJongAttractor=function(){"use strict";class t{}class e extends t{get width(){return this.rightPositionX-this.leftPositionX}get height(){return this.bottomPositionY-this.topPositionY}get area(){return this.width*this.height}constructor(t,e,i,s,r=0){super(),this.leftPositionX=t-r,this.topPositionY=e-r,this.rightPositionX=i+r,this.bottomPositionY=s+r}contains(t,e=0){return t.x>=this.leftPositionX-e&&t.x<=this.rightPositionX+e&&t.y>=this.topPositionY-e&&t.y<=this.bottomPositionY+e}constrain(t,e=0){t.x<this.leftPositionX-e?t.x=this.leftPositionX-e:t.x>this.rightPositionX+e&&(t.x=this.rightPositionX+e),t.y<this.topPositionY-e?t.y=this.topPositionY-e:t.y>this.bottomPositionY+e&&(t.y=this.bottomPositionY+e)}}class i{constructor(t,i,s,r){this.p=t,this.canvasElement=t.createCanvas(i.scaledWidth,i.scaledHeight,r),this.canvasElement&&"parent"in this.canvasElement&&this.canvasElement.parent(s),this.region=new e(0,0,0,0),this.nonScaledShortSideLength=i.nonScaledShortSideLength,this.updateSize()}get scaleFactor(){return this._scaleFactor}get nonScaledWidth(){return this._nonScaledWidth}get nonScaledHeight(){return this._nonScaledHeight}get aspectRatio(){return this._aspectRatio}resize(t){this.p.resizeCanvas(t.scaledWidth,t.scaledHeight),this.nonScaledShortSideLength=t.nonScaledShortSideLength,this.updateSize()}updateSize(){const t=this.p;this._scaleFactor=Math.min(t.width,t.height)/this.nonScaledShortSideLength,this._inversedScaleFactor=1/this._scaleFactor,this._nonScaledWidth=t.width/this._scaleFactor,this._nonScaledHeight=t.height/this._scaleFactor,this._aspectRatio=t.width/t.height,this.region.rightPositionX=this._nonScaledWidth,this.region.bottomPositionY=this._nonScaledHeight}scale(){this.p.scale(this._scaleFactor)}cancelScale(){this.p.scale(this._inversedScaleFactor)}getNonScaledValueOf(t){return t/this._scaleFactor}}i.DUMMY_PARAMETERS={scaledWidth:100,scaledHeight:100,nonScaledShortSideLength:100};const s={SQUARE640x640:"SQUARE640x640",RECT640x480:"RECT640x480",FULL:"FULL",CUSTOM:"CUSTOM"};class r{constructor(t,e){this.p=t,this.p5Color=e}stroke(){this.p.currentRenderer.stroke(this.p5Color)}fill(){this.p.currentRenderer.fill(this.p5Color)}}class o{constructor(t){this.p=t}stroke(){this.p.currentRenderer.noStroke()}fill(){this.p.currentRenderer.noFill()}}class n{stroke(){}fill(){}}class a{constructor(t,e,i=256){this.p=t;const s=[];for(let r=0;r<i;r+=1)s.push(t.color(t.red(e),t.green(e),t.blue(e),t.alpha(e)*r/(i-1)));this.colorArray=s,this.maxIndex=i-1}stroke(t){this.p.currentRenderer.stroke(this.getColor(t))}fill(t){this.p.currentRenderer.fill(this.getColor(t))}getColor(t){return this.colorArray[t?Math.floor(this.p.map(t,0,255,0,this.maxIndex)):this.maxIndex]}}function h(t,e,i,s){return t&&void 0!==e?null===e?new o(t):i?new a(t,e,s):new r(t,e):new n}class c{constructor(t,e,i,s,r){this.strokeColor=h(t,e,s,r),this.fillColor=h(t,i,s,r)}applyColor(t){this.strokeColor.stroke(t),this.fillColor.fill(t)}}c.UNDEFINED=new c(void 0,void 0,void 0);const l=()=>{},d=(Math.PI,new p5(t=>{t.setup=(()=>{t.noCanvas()})}));Math.PI,d.createVector(),d.createVector();class p{constructor(t=256){this.array=new Array(t),this.length=0}get(t){return this.array[t]}getLast(){return this.array[this.length-1]}push(t){return this.array[this.length]=t,this.length+=1,this.length}pushRawArray(t,e=t.length){for(let i=0;i<e;i+=1)this.array[this.length+i]=t[i];return this.length+=e,this.length}pushAll(t){return this.pushRawArray(t.array,t.length)}pop(){return this.length-=1,this.array[this.length]}clear(){this.length=0}loop(t){!function(t,e,i){let s=0;for(;s<i;)e(t[s],s,t),s+=1}(this.array,t,this.length)}loopBackwards(t){!function(t,e,i){for(;i--;)e(t[i],i,t)}(this.array,t,this.length)}roundRobin(t){!function(t,e,i){for(let s=0,r=i-1;s<r;s+=1)for(let o=s+1;o<i;o+=1)e(t[s],t[o])}(this.array,t,this.length)}nestedLoopJoin(t,e){!function(t,e,i,s,r){for(let o=0;o<s;o+=1)for(let s=0;s<r;s+=1)i(t[o],e[s])}(this.array,t.array,e,this.length,t.length)}}class u extends p{static drawFunction(t){t.draw()}draw(){this.loop(u.drawFunction)}}class g extends p{static stepFunction(t){t.step()}step(){this.loop(g.stepFunction)}}class m extends p{}m.prototype.step=g.prototype.step,m.prototype.draw=u.prototype.draw;class S extends p{constructor(t){super(t),this.recentRemovedElements=new p(t)}clean(){this.recentRemovedElements.clear();let t=0;for(let e=0;e<this.length;e+=1)this.array[e].clean(),this.array[e].isToBeRemoved?this.recentRemovedElements.push(this.array[e]):(this.array[t]=this.array[e],t+=1);this.length=t}}class C extends S{}C.prototype.draw=m.prototype.draw,C.prototype.step=m.prototype.step;d.createVector(),d.createVector();d.createVector();class y{constructor(){this.count=0}resetCount(t=0){return this.count=t,this}step(){this.count+=1}mod(t){return this.count%t}}class R extends y{get isOn(){return this._isOn}constructor(t,e=l){super(),this._isOn=!0,this.completeBehavior=e,this.durationFrameCount=t}on(t){return this._isOn=!0,t&&(this.durationFrameCount=t),this}off(){return this._isOn=!1,this}step(){this._isOn&&(this.count+=1,this.count>this.durationFrameCount&&this.completeCycle())}}class f extends R{get isCompleted(){return this._isCompleted}constructor(t,e){super(t,e),this._isCompleted=!1}on(t){return super.on(t),this}off(){return super.off(),this}resetCount(){return super.resetCount(),this._isCompleted=!1,this}getProgressRatio(){return this._isCompleted?1:this.count/this.durationFrameCount}completeCycle(){this._isCompleted=!0,this._isOn=!1,this.completeBehavior()}}class w{constructor(t,e,i,s){this.p=t,this.size=s,this.position=t.createVector(e,i),this.checkTimer=new f(.1*t.idealFrameRate,()=>{this.check()?this.disappearanceDelayTimer.on():this.reset()}),this.disappearanceTimer=new f(1*t.idealFrameRate,()=>{this.reset()}).off(),this.repetitionPerFrame=24e3/t.idealFrameRate/w.pieceCountLevel,this.reset()}reset(){const t=this.p;this.checkTimer.resetCount().on(),this.disappearanceDelayTimer=new f(Math.floor(t.random(7,9)*t.idealFrameRate),()=>{this.disappearanceTimer.on()}).off(),this.disappearanceTimer.resetCount().off(),this.graphics=t.createGraphics(this.size,this.size),this.graphics.pixelDensity(1),this.layeredGraphics=t.createGraphics(this.size,this.size),this.layeredGraphics.pixelDensity(1),this.layeredGraphics.noStroke();const e=this.graphics;switch(e.textFont("Georgia",this.size/30),Math.floor(3*Math.random())){default:case 0:this.color=t.color(224,255,255,32);break;case 1:this.color=t.color(255,224,255,32);break;case 2:this.color=t.color(255,255,224,32)}e.stroke(this.color),e.translate(this.size/2,this.size/2),e.rectMode(t.CENTER),this.particle=new x(this.p,.22*this.size)}check(){const t=this.graphics;t.loadPixels();let e=0,i=0;for(let o=3,n=t.pixels.length;o<n;o+=4)t.pixels[o]>0&&(e+=1,i+=t.pixels[o]);const s=e/(t.pixels.length/4),r=i/(255*this.size);return s>.003&&r>5e-4}draw(){this.checkTimer.step(),this.p.setCurrentRenderer(this.graphics),this.p.currentRenderer.stroke(this.color);for(let t=0,e=this.repetitionPerFrame;t<e;t+=1)this.particle.draw();if(this.checkTimer.isCompleted)if(this.disappearanceDelayTimer.step(),this.disappearanceTimer.step(),this.disappearanceTimer.isOn){const t=this.size,e=this.layeredGraphics;e.copy(this.graphics,0,0,t,t,0,0,t,t),e.fill(0,255*this.disappearanceTimer.getProgressRatio()),e.rect(0,0,t,t),this.p.image(e,this.position.x,this.position.y)}else this.p.image(this.graphics,this.position.x,this.position.y)}}w.pieceCountLevel=1;class x{constructor(t,e){this.p=t,this.scaleFactor=e,this.position=p5.Vector.random2D().mult(t.random(.01)),this.previousPosition=t.createVector(),this.a=t.random(-2.5,2.5),this.b=t.random(-2.5,2.5),this.c=t.random(-2.5,2.5),this.d=t.random(-2.5,2.5)}draw(){this.previousPosition.set(this.position),this.position.set(Math.sin(this.a*this.previousPosition.y)-Math.cos(this.b*this.previousPosition.x),Math.sin(this.c*this.previousPosition.x)-Math.cos(this.d*this.previousPosition.y));const t=this.scaleFactor*this.position.x,e=this.scaleFactor*this.position.y;this.p.currentRenderer.point(t,e)}}p5.disableFriendlyErrors=!0;const v=(t,e)=>{new class extends p5{setCurrentRenderer(t){this.currentRenderer=t}get nonScaledWidth(){return this.scalableCanvas.nonScaledWidth}get nonScaledHeight(){return this.scalableCanvas.nonScaledHeight}get idealFrameRate(){return this._idealFrameRate}get unitAngleSpeed(){return this._unitAngleSpeed}get unitSpeed(){return this._unitSpeed}get unitAccelerationMagnitude(){return this._unitAccelerationMagnitude}constructor(t,e,i){super(t,"string"==typeof e?document.getElementById(e)||void 0:e,i),this.node=e&&"boolean"!=typeof e?"string"==typeof e?document.getElementById(e)||document.body:e:document.body,this.currentRenderer=this,this.maxCanvasRegion={width:0,height:0,getShortSideLength(){return Math.min(this.width,this.height)}},this.updateMaxCanvasRegion(),this.setFrameRate()}setFrameRate(t=60){return this.frameRate(t),t&&(this._idealFrameRate=t,this._unitAngleSpeed=2*Math.PI/this._idealFrameRate,this._unitSpeed=1/this._idealFrameRate,this._unitAccelerationMagnitude=this._unitSpeed/this._idealFrameRate),this}updateMaxCanvasRegion(){if(this.maxCanvasRegion.width=this.windowWidth,this.maxCanvasRegion.height=this.windowHeight,this.node===document.body)return;const t=this.node.getBoundingClientRect();this.maxCanvasRegion.width=t.width,this.maxCanvasRegion.height=t.height}createScalableCanvas(t,e,s){this.scalableCanvasType=t,this.scalableCanvas=new i(this,this.createScalableCanvasParameter(t,e),this.node,s)}resizeScalableCanvas(t,e){this.scalableCanvas.resize(this.createScalableCanvasParameter(t||this.scalableCanvasType,e))}createScalableCanvasParameter(t,e){this.updateMaxCanvasRegion();const r=this.maxCanvasRegion.getShortSideLength();switch(t){case s.SQUARE640x640:return{scaledWidth:r,scaledHeight:r,nonScaledShortSideLength:640};case s.RECT640x480:return{scaledWidth:r,scaledHeight:.75*r,nonScaledShortSideLength:480};case s.FULL:return{scaledWidth:this.maxCanvasRegion.width,scaledHeight:this.maxCanvasRegion.height,nonScaledShortSideLength:640};default:return e||i.DUMMY_PARAMETERS}}}(e=>{let i;const r=new u;let o=-1;function n(){e.blendMode(e.BLEND),e.background(255),e.setCurrentRenderer(e),function(t,e,i,s,r=1){const o=t.currentRenderer;o.background(e),o.strokeWeight(2);for(let n=0;n<o.width;n+=1){const e=Math.pow(n/(o.height-1),r);o.stroke(t.lerpColor(i,s,e)),o.line(0,n,o.width-1,n)}}(e,e.color(255),e.color(255),e.color(248,248,252),2),e.loadPixels(),i=e.pixels,e.blendMode(e.DIFFERENCE),r.clear();for(let i=0;i<t;i+=1)for(let s=0;s<t;s+=1)r.push(new w(e,i*e.width/t,s*e.height/t,e.width/t))}e.preload=(()=>{}),e.setup=(()=>{e.createScalableCanvas(s.SQUARE640x640),e.setFrameRate(30),e.pixelDensity(1),w.pieceCountLevel=t,n()}),e.draw=(()=>{e.pixels=i,e.updatePixels(),r.draw()}),e.windowResized=(()=>{e.resizeScalableCanvas(),-1!==o&&clearTimeout(o),o=setTimeout(()=>{n()},200)}),e.mouseClicked=(()=>{})},e||"DeJongAttractor")};return v}();