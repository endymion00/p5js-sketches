/**
 * Colored Shadow.
 * Website => https://www.fal-works.com/
 * Including module: p5ex (Copyright 2018 FAL, licensed under MIT).
 * @copyright 2018 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.0
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";class t{}class e extends t{get width(){return this.rightPositionX-this.leftPositionX}get height(){return this.bottomPositionY-this.topPositionY}get area(){return this.width*this.height}constructor(t,e,s,i,a=0){super(),this.leftPositionX=t-a,this.topPositionY=e-a,this.rightPositionX=s+a,this.bottomPositionY=i+a}contains(t,e=0){return t.x>=this.leftPositionX-e&&t.x<=this.rightPositionX+e&&t.y>=this.topPositionY-e&&t.y<=this.bottomPositionY+e}constrain(t,e=0){t.x<this.leftPositionX-e?t.x=this.leftPositionX-e:t.x>this.rightPositionX+e&&(t.x=this.rightPositionX+e),t.y<this.topPositionY-e?t.y=this.topPositionY-e:t.y>this.bottomPositionY+e&&(t.y=this.bottomPositionY+e)}}class s{constructor(t,s,i,a){this.p=t,this.canvasElement=t.createCanvas(s.scaledWidth,s.scaledHeight,a),this.canvasElement&&"parent"in this.canvasElement&&this.canvasElement.parent(i),this.region=new e(0,0,0,0),this.nonScaledShortSideLength=s.nonScaledShortSideLength,this.updateSize()}get scaleFactor(){return this._scaleFactor}get nonScaledWidth(){return this._nonScaledWidth}get nonScaledHeight(){return this._nonScaledHeight}get aspectRatio(){return this._aspectRatio}resize(t){this.p.resizeCanvas(t.scaledWidth,t.scaledHeight),this.nonScaledShortSideLength=t.nonScaledShortSideLength,this.updateSize()}updateSize(){const t=this.p;this._scaleFactor=Math.min(t.width,t.height)/this.nonScaledShortSideLength,this._inversedScaleFactor=1/this._scaleFactor,this._nonScaledWidth=t.width/this._scaleFactor,this._nonScaledHeight=t.height/this._scaleFactor,this._aspectRatio=t.width/t.height,this.region.rightPositionX=this._nonScaledWidth,this.region.bottomPositionY=this._nonScaledHeight}scale(){this.p.scale(this._scaleFactor)}cancelScale(){this.p.scale(this._inversedScaleFactor)}getNonScaledValueOf(t){return t/this._scaleFactor}}s.DUMMY_PARAMETERS={scaledWidth:100,scaledHeight:100,nonScaledShortSideLength:100};const i={SQUARE640x640:"SQUARE640x640",RECT640x480:"RECT640x480",FULL:"FULL",CUSTOM:"CUSTOM"};class a{constructor(t,e){this.p=t,this.p5Color=e}stroke(){this.p.currentRenderer.stroke(this.p5Color)}fill(){this.p.currentRenderer.fill(this.p5Color)}}class r{constructor(t){this.p=t}stroke(){this.p.currentRenderer.noStroke()}fill(){this.p.currentRenderer.noFill()}}class o{stroke(){}fill(){}}class n{constructor(t,e,s=256){this.p=t;const i=[];for(let a=0;a<s;a+=1)i.push(t.color(t.red(e),t.green(e),t.blue(e),t.alpha(e)*a/(s-1)));this.colorArray=i,this.maxIndex=s-1}stroke(t){this.p.currentRenderer.stroke(this.getColor(t))}fill(t){this.p.currentRenderer.fill(this.getColor(t))}getColor(t){return this.colorArray[t?Math.floor(this.p.map(t,0,255,0,this.maxIndex)):this.maxIndex]}}function h(t,e,s,i){return t&&void 0!==e?null===e?new r(t):s?new n(t,e,i):new a(t,e):new o}class l{constructor(t,e,s,i,a){this.strokeColor=h(t,e,i,a),this.fillColor=h(t,s,i,a)}applyColor(t){this.strokeColor.stroke(t),this.fillColor.fill(t)}}l.UNDEFINED=new l(void 0,void 0,void 0);Math.PI;const c=new p5(t=>{t.setup=(()=>{t.noCanvas()})});Math.PI,c.createVector(),c.createVector();const d=t=>t>6/29?t*t*t:6/29*3*(6/29)*(t-16/116);const u=[[3.2406255,-1.537208,-.4986286],[-.9689307,1.8757561,.0415175],[.0557101,-.2040211,1.0569959]];class p{constructor(t,e){this.name=t,this.tristimulusValues=e}}let g={D50:new p("D50",[.9642,1,.8251]),D55:new p("D55",[.9568,1,.9214]),D65:new p("D65",[.95047,1,1.08883]),E:new p("E",[1,1,1])}.D50;const S=[0,0,0],m=[0,0,0],f=[0,0,0],y=[0,0,0];function w(t,e,s,i){return t[0]=e,t[1]=s,t[2]=i,t}function x(t){return 255*((e=Math.min(Math.max(t,0),1))<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055);var e}function v(t,e,s,i){const a=function(t,e,s){const i=(t[0]+16)/116,a=i+t[1]/500,r=i-t[2]/200;return s?(s[0]=e.tristimulusValues[0]*d(a),s[1]=e.tristimulusValues[1]*d(i),s[2]=e.tristimulusValues[2]*d(r),s):[e.tristimulusValues[0]*d(a),e.tristimulusValues[1]*d(i),e.tristimulusValues[2]*d(r)]}(w(S,t,e,s),g,m),r=function(t,e,s){const i=t.length,a=t[0].length,r=s||new Array(i);for(let o=0;o<i;o+=1){r[o]=0;for(let s=0;s<a;s+=1)r[o]+=t[o][s]*e[s]}return r}(u,a,f),o=w(y,x(r[0]),x(r[1]),x(r[2]));return i?[o[0],o[1],o[2],i]:[o[0],o[1],o[2]]}class C{constructor(t=256){this.array=new Array(t),this.length=0}get(t){return this.array[t]}getLast(){return this.array[this.length-1]}push(t){return this.array[this.length]=t,this.length+=1,this.length}pushRawArray(t,e=t.length){for(let s=0;s<e;s+=1)this.array[this.length+s]=t[s];return this.length+=e,this.length}pushAll(t){return this.pushRawArray(t.array,t.length)}pop(){return this.length-=1,this.array[this.length]}clear(){this.length=0}loop(t){!function(t,e,s){let i=0;for(;i<s;)e(t[i],i,t),i+=1}(this.array,t,this.length)}loopBackwards(t){!function(t,e,s){for(;s--;)e(t[s],s,t)}(this.array,t,this.length)}roundRobin(t){!function(t,e,s){for(let i=0,a=s-1;i<a;i+=1)for(let r=i+1;r<s;r+=1)e(t[i],t[r])}(this.array,t,this.length)}nestedLoopJoin(t,e){!function(t,e,s,i,a){for(let r=0;r<i;r+=1)for(let i=0;i<a;i+=1)s(t[r],e[i])}(this.array,t.array,e,this.length,t.length)}}class R extends C{static drawFunction(t){t.draw()}draw(){this.loop(R.drawFunction)}}class P extends C{static stepFunction(t){t.step()}step(){this.loop(P.stepFunction)}}class M extends C{}M.prototype.step=P.prototype.step,M.prototype.draw=R.prototype.draw;class F extends C{constructor(t){super(t),this.recentRemovedElements=new C(t)}clean(){this.recentRemovedElements.clear();let t=0;for(let e=0;e<this.length;e+=1)this.array[e].clean(),this.array[e].isToBeRemoved?this.recentRemovedElements.push(this.array[e]):(this.array[t]=this.array[e],t+=1);this.length=t}}class b extends F{}b.prototype.draw=M.prototype.draw,b.prototype.step=M.prototype.step;c.createVector(),c.createVector();c.createVector();class _{constructor(t,e){this.p=t,this.shapeSizeScale=1,this.offsetPosition=t.createVector(),this.shapeSize=e.shapeSize,this.noiseMagnitudeFactor=e.noiseMagnitudeFactor,this.vertexCount=Math.max(6,Math.round(t.scalableCanvas.scaleFactor*(e.vertexCount||.2*e.shapeSize))),this.noiseDistanceScale=e.noiseDistanceScale||e.shapeSize/320,this.noiseTimeScale=e.noiseTimeScale||.005,this.xNoiseParameterOffset=t.createVector(Math.random(),Math.random(),Math.random()).mult(1024),this.yNoiseParameterOffset=t.createVector(Math.random(),Math.random(),Math.random()).mult(1024),this.curveVertexIndexArray=[];for(let s=0;s<this.vertexCount;s+=1)this.curveVertexIndexArray.push(s);this.curveVertexIndexArray.push(0,1,2),this.vertexPositionArray=[];for(let s=0;s<this.vertexCount;s+=1)this.vertexPositionArray.push(t.createVector());this.noiseTime=0,this.step()}step(){this.updateVerticesPosition(),this.noiseTime+=this.noiseTimeScale}draw(){this.p.beginShape();for(let t=0,e=this.curveVertexIndexArray.length;t<e;t+=1)this.p.curveVertex(this.vertexPositionArray[this.curveVertexIndexArray[t]].x,this.vertexPositionArray[this.curveVertexIndexArray[t]].y);this.p.endShape()}updateVerticesPosition(){const t=.5*this.shapeSize*this.shapeSizeScale,e=this.noiseMagnitudeFactor*t;for(let s=0;s<this.vertexCount;s+=1){const i=s/this.vertexCount*this.p.TWO_PI,a=Math.cos(i),r=Math.sin(i),o=t*a,n=t*r,h=(2*this.p.noise(this.xNoiseParameterOffset.x+this.noiseDistanceScale*a,this.xNoiseParameterOffset.y+this.noiseDistanceScale*r,this.xNoiseParameterOffset.z+this.noiseTime)-1)*e,l=(2*this.p.noise(this.yNoiseParameterOffset.x+this.noiseDistanceScale*a,this.yNoiseParameterOffset.y+this.noiseDistanceScale*r,this.yNoiseParameterOffset.z+this.noiseTime)-1)*e;this.vertexPositionArray[s].set(this.offsetPosition.x+o+h,this.offsetPosition.y+n+l)}}}class A{constructor(t,e=t.random(t.TWO_PI)){this.p=t,this.scaleFactor=1;const s=t.random(100,200),i=new _(t,{shapeSize:s,noiseMagnitudeFactor:t.random(1.5,3),noiseDistanceScale:t.random(.5,2)*s/320});this.drawShape=(t=>{i.shapeSizeScale=t,i.updateVerticesPosition(),i.draw()}),this.solidShapeColor=new l(t,null,t.color(240,240,244));const a=function(t,e,s){return c.color(c.red(t)-c.red(e),c.green(t)-c.green(e),c.blue(t)-c.blue(e),s)}(t.color(255),t.color((o=e,v(80,(r=128)*Math.cos(o),r*Math.sin(o),n))));var r,o,n;this.transparentShapeColor=new l(t,null,a,!0),this.position=t.createVector(t.random(t.nonScaledWidth),t.random(t.nonScaledHeight))}draw(){this.p.push(),this.p.translate(this.position.x,this.position.y),this.drawShape(this.scaleFactor),this.p.pop()}drawShadow(t=30){this.p.push(),this.p.translate(t,t),this.transparentShapeColor.applyColor(64),this.scaleFactor=1.1,this.draw(),this.scaleFactor=1,this.p.pop()}drawTransparent(){this.transparentShapeColor.applyColor(128),this.draw()}drawSolid(){this.solidShapeColor.applyColor(),this.draw()}}var E;new class extends p5{setCurrentRenderer(t){this.currentRenderer=t}get nonScaledWidth(){return this.scalableCanvas.nonScaledWidth}get nonScaledHeight(){return this.scalableCanvas.nonScaledHeight}get idealFrameRate(){return this._idealFrameRate}get unitAngleSpeed(){return this._unitAngleSpeed}get unitSpeed(){return this._unitSpeed}get unitAccelerationMagnitude(){return this._unitAccelerationMagnitude}constructor(t,e,s){super(t,"string"==typeof e?document.getElementById(e)||void 0:e,s),this.node=e&&"boolean"!=typeof e?"string"==typeof e?document.getElementById(e)||document.body:e:document.body,this.currentRenderer=this,this.maxCanvasRegion={width:0,height:0,getShortSideLength(){return Math.min(this.width,this.height)}},this.updateMaxCanvasRegion(),this.setFrameRate()}setFrameRate(t=60){return this.frameRate(t),t&&(this._idealFrameRate=t,this._unitAngleSpeed=2*Math.PI/this._idealFrameRate,this._unitSpeed=1/this._idealFrameRate,this._unitAccelerationMagnitude=this._unitSpeed/this._idealFrameRate),this}updateMaxCanvasRegion(){if(this.maxCanvasRegion.width=this.windowWidth,this.maxCanvasRegion.height=this.windowHeight,this.node===document.body)return;const t=this.node.getBoundingClientRect();this.maxCanvasRegion.width=t.width,this.maxCanvasRegion.height=t.height}createScalableCanvas(t,e,i){this.scalableCanvasType=t,this.scalableCanvas=new s(this,this.createScalableCanvasParameter(t,e),this.node,i)}resizeScalableCanvas(t,e){this.scalableCanvas.resize(this.createScalableCanvasParameter(t||this.scalableCanvasType,e))}createScalableCanvasParameter(t,e){this.updateMaxCanvasRegion();const a=this.maxCanvasRegion.getShortSideLength();switch(t){case i.SQUARE640x640:return{scaledWidth:a,scaledHeight:a,nonScaledShortSideLength:640};case i.RECT640x480:return{scaledWidth:a,scaledHeight:.75*a,nonScaledShortSideLength:480};case i.FULL:return{scaledWidth:this.maxCanvasRegion.width,scaledHeight:this.maxCanvasRegion.height,nonScaledShortSideLength:640};default:return e||s.DUMMY_PARAMETERS}}}(t=>{let e,s=!0;t.preload=(()=>{}),t.setup=(()=>{t.createScalableCanvas(i.SQUARE640x640),(e=t.createP("Rendering...")).position(50,50),e.style("z-index",10),e.show()}),t.draw=(()=>{if(s)return e.show(),void(s=!1);t.blendMode(t.BLEND),function(t,e,s,i,a=1){const r=t.currentRenderer;r.background(e),r.strokeWeight(2);for(let o=0;o<r.width;o+=1){const e=Math.pow(o/(r.height-1),a);r.stroke(t.lerpColor(s,i,e)),r.line(0,o,r.width-1,o)}}(t,t.color(255),t.color(248,248,252),t.color(236,236,244),4);const i=[];for(let e=0;e<10;e+=1)i.push(new A(t));t.scalableCanvas.scale(),t.blendMode(t.DIFFERENCE),i.forEach(t=>{t.drawShadow(10)}),t.filter(t.BLUR,10),t.blendMode(t.BLEND),i.forEach(t=>{t.drawSolid()}),t.scalableCanvas.cancelScale(),s=!0,e.hide(),t.noLoop()}),t.windowResized=(()=>{t.loop()}),t.mousePressed=(()=>{(t=t).mouseX<0||t.mouseX>t.width||t.mouseY<0||t.mouseY>t.height||t.loop()}),t.keyTyped=(()=>{"s"===t.key&&t.saveCanvas("colored-shadow","png")})},"ColoredShadow")}();