/**
 * Lines of Data.
 * Website => https://www.fal-works.com/
 * @copyright 2019 FAL
 * @author FAL <contact@fal-works.com>
 * @version 0.1.0
 * @license CC-BY-SA-3.0
 */
!function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;const e=(t,e)=>{const{array:n,size:o}=t;for(let t=0;t<o;t+=1)e(n[t])},n=t=>document.getElementById(t)||document.body,o=t=>t===document.body?{width:window.innerWidth,height:window.innerHeight}:t.getBoundingClientRect();let r,s;const a=t=>{r=t},i=(t,e,n)=>{const{x:o,y:r}=e;return o>=n&&r>=n&&o<t.width-n&&r<t.height-n},c=(t,e,n)=>{switch(n){default:case"FIT_TO_BOX":return Math.min(e.width/t.width,e.height/t.height);case"FIT_WIDTH":return e.width/t.width;case"FIT_HEIGHT":return e.height/t.height}};function l(t,e,n,o){r.translate(e,n),function(t,e){r.rotate(e),t(),r.rotate(-e)}(t,o),r.translate(-e,-n)}function d(t,e,s,a){const i=o("string"==typeof t?n(t):t),l=c(e,i,s);return{p5Canvas:r.createCanvas(l*e.width,l*e.height,a),scaleFactor:l,logicalSize:e,drawScaled:t=>(function(t,e){r.scale(e),t(),r.scale(1/e)})(t,l),logicalCenterPosition:{x:e.width/2,y:e.height/2}}}let h=!1;const u=(t,e,n)=>({x:t.x+n*Math.cos(e),y:t.y+n*Math.sin(e)});function g(t){let e=void 0;const n={get:()=>(e||(e=t()),e),clear:()=>(e=void 0,n)};return n}const p=t=>t*t,f=t=>t*t*t,m=2*Math.PI,w=(t,e)=>Math.abs(t-e)<1e-13,y=(t,e)=>t+Math.random()*(e-t),M=t=>y(t.start,t.end),C=(t,e)=>((t,e,n)=>t+Math.pow(Math.random(),n)*(e-t))(t.start,t.end,e),S=t=>t[(t=>Math.floor(Math.random()*t))(t.length)],x=t=>Math.random()<t;const P=()=>{},R=t=>{t.count=0,t.progressRatio=0,t.isCompleted=!1},z=(t,e=P,n=P)=>({duration:t,progressRatioChangeRate:1/t,onProgress:e,onComplete:n,count:0,progressRatio:0,isCompleted:!1}),I=z(0),b=(t,e)=>{const n=Object.assign({},t);return n.onComplete=()=>{t.onComplete(n),e(n)},n},k=(t,e)=>{t.index=e,t.current=t.units[e]},v=(t,e=!1)=>{let n;const o=new Array(t.length),r=()=>(t=>k(t,t.index+1))(n),s=t.length-1;for(let e=0;e<s;e+=1)o[e]=b(t[e],r);return o[s]=e?b(t[s],()=>(t=>{!function(t,e){const n=t.length;for(let o=0;o<n;o+=1)e(t[o],o,t)}(t.units,R),k(t,0)})(n)):t[s],n={units:o,current:o[0],index:0}},T=(v([I]),(t=>{const e=new Array(t),n=m/t;for(let o=0;o<t;o+=1)e[o]=o*n;return e})(8)),O={start:50,end:150},E={start:2,end:15},q={start:3,end:20},F={start:40,end:160},H=g(()=>["#7189bf","#df7599","#ffc785","#72d6c9","#202020"].map(t=>r.color(t))),_=g(()=>r.color("#202020")),A=(t,e)=>{const n=[];let o=e;for(;o<t;){const e=Math.min(t,o+C(E,3));n.push({color:S(H.get()),start:o,end:e}),o=e,o+=C(x(.8)?q:F,2)}return n},B=(t,e,n,o)=>{const s=t.length,a=10*(o?-1:1);for(let o=0;o<s;o+=1){const{color:s,start:i,end:c}=t[o];c<e||(n<i||(r.fill(s),r.rect(Math.max(e,i),0,Math.min(n,c),a)))}},W=t=>{const{x:e,y:n}=t.startPoint;l(t.graphics.draw,e,n,t.angle)},D=t=>(t=>{const{isCompleted:e,count:n,duration:o,progressRatioChangeRate:r}=t;if(!e){if(n>=o)return t.progressRatio=1,t.onProgress(t),t.isCompleted=!0,void t.onComplete(t);t.onProgress(t),t.count+=1,t.progressRatio+=r}})(t.timers.current),L=(t,e,n,o)=>{const a=(t=>{const e={start:0,end:0},n=t.length;return{data:t,trimRatio:e,draw:()=>{const o=e.start*n,s=e.end*n;B(t.leftSequence,o,s,!0),B(t.rightSequence,o,s,!1),r.stroke(_.get()),r.line(o,0,s,0),r.noStroke()}}})((t=>({length:t,leftSequence:A(t,0),rightSequence:A(t,M(O))}))(n)),{data:c,trimRatio:l}=a;let d;const h=Math.ceil(c.length/15),g=z(h,t=>{l.end=function(t){return f(t-1)+1}(t.progressRatio)},()=>{for(let r=0;r<1e3;r+=1){const r=u(t,e,n),a=S(T);if(e===a||w(Math.abs(e-a),Math.PI))continue;const c=y(20,600),l=u(r,a,c);if(i(s.logicalSize,l,80)){L(r,a,c,o);break}}}),m=z(30),C=z(h,t=>{l.start=function(t){return p(t)}(t.progressRatio)},()=>{d.needsSweep=!0}),x=v([g,m,C]);return o(d={startPoint:t,angle:e,graphics:a,timers:x,onCreate:o,needsSweep:!1}),d};let j,G;const N=()=>{e(j,D),e(j,W),(t=>{const{array:e,size:n}=t;let o=0;for(let t=0;t<n;t+=1){const n=e[t];n.needsSweep||(e[o]=n,o+=1)}t.size=o})(j)},X=()=>{G(),s.drawScaled(N)},J=()=>{},K=()=>{switch(r.key){case"p":h?(r.loop(),h=!1):(r.noLoop(),h=!0);break;case"s":r.save("image.png")}};(e=>{const o=n(e.htmlElementId);new t(t=>{a(t),t.setup=()=>{(t=>{s=t})(d(o,e.logicalCanvasSize)),e.initialize()},e.setP5Methods(t)},o)})({htmlElementId:"LinesOfData",logicalCanvasSize:{width:800,height:800},initialize:()=>{const t=r.color(248,248,252);G=(t=>{r.pixels=t,r.updatePixels()}).bind(null,(t=>(r.push(),t(),r.pop(),r.loadPixels(),r.pixels))(()=>r.background(t))),r.noStroke(),r.strokeWeight(2),r.rectMode(r.CORNERS),j=(t=>({array:new Array(t),size:0}))(32),(()=>{(t=>{t.size=0})(j);const t=t=>((t,e)=>{t.array[t.size]=e,t.size+=1})(j,t);L({x:100,y:200},0,600,t),L({x:700,y:600},Math.PI,600,t)})()},setP5Methods:t=>{t.draw=X,t.mousePressed=J,t.keyTyped=K}})}(p5);