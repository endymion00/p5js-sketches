/**
 * Fragments.
 * Source code in TypeScript: https://github.com/fal-works/p5js-sketches/tree/master/fragments
 *
 * Bundled libraries:
 *   @fal-works/creative-coding-core (MIT license)
 *   @fal-works/p5-extension (MIT license)
 *
 * @copyright 2019 FAL
 * @version 0.1.0
 */
!function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;
/**
   * creative-coding-core
   *
   * Utility library that might be useful for creative coding.
   * GitHub repository: {@link https://github.com/fal-works/creative-coding-core}
   *
   * @module creative-coding-core
   * @copyright 2019 FAL
   * @author FAL <contact@fal-works.com>
   * @license MIT
   * @version 0.1.8
   */
const t=(e,t,r,n)=>{for(let a=r;a<n;a+=1)t(e[a],a,e)},r=(e,r)=>t(e,r,0,e.length),n=(e,t,r,n)=>{let a=n;for(;a>r;)t(e[--a],a,e)},a=(e,t,r,n,a,o,s)=>{for(let i=n;i<a;i+=1)for(let n=o;n<s;n+=1)r(e[i],t[n])},o=(e,t,r,n)=>{const a=n-1;for(let o=r;o<a;o+=1)for(let r=o+1;r<n;r+=1)t(e[o],e[r])},s=(e,t=1)=>t>0?e.reduce((e,r)=>e.concat(Array.isArray(r)?s(r,t-1):r),[]):e,i=(e,t,r)=>{const n=r||e.length;for(let r=0;r<n;r+=1)e[r]=t();return e},l=Object.freeze({__proto__:null,loopRange:t,loop:r,loopRangeBackwards:n,loopBackwards:(e,t)=>n(e,t,0,e.length),nestedLoopJoinWithRange:a,nestedLoopJoin:(e,t,r)=>a(e,t,r,0,e.length,0,t.length),roundRobinWithRange:o,roundRobin:(e,t)=>o(e,t,0,e.length),flatNaive:e=>[].concat(...e),flatRecursive:s,populate:i}),c=e=>({array:new Array(e),size:0}),u=(e,t)=>{e.array[e.size]=t,e.size+=1},d=u,h=e=>{const{array:t,size:r}=e,n=t.length;t.length=r,t.length=n},p=e=>{e.size=0,h(e)},g=(e,t)=>{const{array:r,size:n}=e;for(let e=0;e<n;e+=1)if(r[e]===t)return e;return-1},y=(e,t)=>{const{array:r,size:n}=e,a=r[t];return r.copyWithin(t,t+1,n),e.size=n-1,a},f=(e,t)=>{const r=e.array,n=r[t],a=e.size-1;return r[t]=r[a],e.size=a,n},_=(e,t)=>{const{array:r,size:n}=e;let a=0,o=!1;for(let e=0;e<n;e+=1){const n=r[e];t(n,e,r)?o=!0:(r[a]=n,a+=1)}return e.size=a,o},m=Object.freeze({__proto__:null,create:c,createFilled:(e,t)=>({array:new Array(e).fill(t),size:e}),createPopulated:(e,t)=>({array:i(new Array(e),t),size:e}),fromArray:e=>({array:e,size:e.length}),add:u,push:d,pop:e=>{const t=e.size-1,r=e.array[t];return e.size=t,r},clear:e=>{e.size=0},cleanUnusedSlots:h,clearReference:p,loop:(e,r)=>t(e.array,r,0,e.size),loopBackwards:(e,t)=>n(e.array,t,0,e.size),find:(e,t)=>{const{array:r,size:n}=e;for(let e=0;e<n;e+=1)if(t(r[e],e,r))return r[e]},findIndex:g,removeShift:y,removeShiftElement:(e,t)=>{const r=g(e,t);return r>=0?y(e,r):null},removeSwap:f,removeSwapElement:(e,t)=>{const r=g(e,t);return r>=0?f(e,r):null},removeShiftAll:_,removeSwapAll:(e,t)=>{let r=!1;const n=e.array;for(let a=0;a<e.size;a+=1)t(n[a],a,n)&&(f(e,a),r=!0);return r},populate:(e,t)=>(i(e.array,t),e.size=e.array.length,e)}),x=Object.freeze({__proto__:null,create:e=>({value:void 0,factory:e}),get:e=>e.value||(e.value=e.factory()),clear:e=>{e.value=void 0}}),b=Object.freeze({__proto__:null,from:(e,t)=>{const r={};for(const n of Object.keys(e))r[n]=new Array(t).fill(e[n]);return{data:r,length:t}}}),w=e=>e*e,z=e=>e*e*e,O=Math.PI,v=O/2,C=2*O,k=Object.freeze({__proto__:null,sq:w,cubic:z,PI:O,HALF_PI:v,TWO_PI:C,nearlyEqual:(e,t)=>Math.abs(e-t)<1e-13}),M=e=>0===e.x&&0===e.y,S=(e,t,r)=>({x:e.x+t*Math.cos(r),y:e.y+t*Math.sin(r)}),P=(e,t,r)=>({x:e.x-t*Math.cos(r),y:e.y-t*Math.sin(r)}),A=(e,t)=>w(t.x-e.x)+w(t.y-e.y),R=Object.freeze({__proto__:null,zero:{x:0,y:0},isZero:M,fromPolar:(e,t)=>({x:e*Math.cos(t),y:e*Math.sin(t)}),add:(e,t)=>({x:e.x+t.x,y:e.y+t.y}),addCartesian:(e,t,r)=>({x:e.x+t,y:e.y+r}),addPolar:S,subtract:(e,t)=>({x:e.x-t.x,y:e.y-t.y}),subtractCartesian:(e,t,r)=>({x:e.x-t,y:e.y-r}),subtractPolar:P,distanceSquared:A,distance:(e,t)=>Math.sqrt(A(e,t)),toStr:e=>`{x:${e.x},y:${e.y}}`,copy:e=>({x:e.x,y:e.y})}),I=C/360,E=360/C,j=Object.freeze({__proto__:null,createArray:e=>{const t=new Array(e),r=C/e;for(let n=0;n<e;n+=1)t[n]=n*r;return t},fromDegrees:e=>I*e,toDegrees:e=>E*e,fromOrigin:e=>M(e)?0:Math.atan2(e.y,e.x),between:(e,t)=>{const r=t.x-e.x,n=t.y-e.y;return 0===r&&0===n?0:Math.atan2(n,r)}}),T=Object.freeze({__proto__:null,create:(e,t)=>({topLeft:e,rightBottom:{x:e.x+t.width,y:e.y+t.height}}),containsPoint:(e,t,r)=>{const{topLeft:n,rightBottom:a}=e,{x:o,y:s}=t;return o>=n.x+r&&s>=n.y+r&&o<a.x-r&&s<a.y-r}}),L=Object.freeze({__proto__:null,getAspectRatio:e=>e.width/e.height,getArea:e=>e.width*e.height}),B=Object.freeze({__proto__:null,add:(e,t)=>(e.x+=t.x,e.y+=t.y,e),addCartesian:(e,t,r)=>(e.x+=t,e.y+=r,e),addPolar:(e,t,r)=>(e.x+=t*Math.cos(r),e.y+=t*Math.sin(r),e),subtract:(e,t)=>(e.x-=t.x,e.y-=t.y,e),subtractCartesian:(e,t,r)=>(e.x-=t,e.y-=r,e),subtractPolar:(e,t,r)=>(e.x-=t*Math.cos(r),e.y-=t*Math.sin(r),e),set:(e,t)=>(e.x=t.x,e.y=t.y,e),setCartesian:(e,t,r)=>(e.x=t,e.y=r,e),setPolar:(e,t,r)=>(e.x=t*Math.cos(r),e.y=t*Math.sin(r),e)}),F=Object.freeze({__proto__:null,createCurve:e=>{const t=[],r=e.length;let n=e[0],a=n.controlLine;for(let o=1;o<r;o+=1){const r=e[o],s=r.controlLine;t.push({controlPoint1:S(n.point,.5*a.length,a.angle),controlPoint2:P(r.point,.5*s.length,s.angle),targetPoint:r.point}),n=r,a=s}return{startPoint:e[0].point,paths:t}}}),H=(e,t,r=.5)=>n=>{if(n<r)return r*e(n/r);{const e=1-r;return r+e*t((n-r)/e)}},D=w,U=e=>1-w(e-1),W=z,Q=e=>z(e-1)+1,G=e=>Math.pow(e,4),N=e=>1-Math.pow(e-1,4),V=H(D,U),q=H(U,D),K=H(W,Q),J=H(Q,W),X=H(G,N),Z=H(N,G),Y=Object.freeze({__proto__:null,bind:e=>(t,r,n)=>t+e(n)*(r-t),concatenate:(e,t,r=.5)=>n=>{if(n<r)return e(n/r);return t((n-r)/(1-r))},integrate:H,easeLinear:e=>e,easeInQuad:D,easeOutQuad:U,easeInCubic:W,easeOutCubic:Q,easeInQuart:G,easeOutQuart:N,createEaseOutBack:(e=1.70158)=>t=>{const r=t-1;return(e+1)*z(r)+e*w(r)+1},easeInOutQuad:V,easeOutInQuad:q,easeInOutCubic:K,easeOutInCubic:J,easeInOutQuart:X,easeOutInQuart:Z}),$=(e,t)=>e+Math.random()*(t-e),ee=e=>Math.floor(Math.random()*e),te=Object.freeze({__proto__:null,value:e=>Math.random()*e,angle:()=>Math.random()*C,between:$,inRange:e=>$(e.start,e.end),integer:ee,integerBetween:(e,t)=>e+ee(t-e),signed:e=>Math.random()<.5?e:-e,fromArray:e=>e[ee(e.length)],removeFromArray:e=>e.splice(ee(e.length),1)[0],bool:e=>Math.random()<e}),re=Object.freeze({__proto__:null,calculateScaleFactor:(e,t,r)=>{switch(r){default:case"FIT_TO_BOX":return Math.min(t.width/e.width,t.height/e.height);case"FIT_WIDTH":return t.width/e.width;case"FIT_HEIGHT":return t.height/e.height}}}),ne=Object.freeze({__proto__:null,getElementOrBody:e=>document.getElementById(e)||document.body,getElementSize:e=>e===document.body?{width:window.innerWidth,height:window.innerHeight}:e.getBoundingClientRect()}),ae=()=>{},oe=(e,t=ae,r=ae)=>({duration:e,progressRatioChangeRate:1/e,onProgress:t,onComplete:r,count:0,progressRatio:0,isCompleted:!1}),se=oe(0),ie=e=>{e.count=0,e.progressRatio=0,e.isCompleted=!1},le=e=>{if(e.isCompleted)return!0;const{count:t,duration:r,progressRatioChangeRate:n}=e;return t>=r?(e.progressRatio=1,e.onProgress(e),e.isCompleted=!0,e.onComplete(e),!0):(e.onProgress(e),e.count+=1,e.progressRatio+=n,!1)},ce=(e,t)=>{const r=Object.assign({},e),n=e.onComplete;return r.onComplete=()=>{n(r),t(r)},r},ue=e=>(le(e.current),e.isCompleted),de=(e,t)=>{e.index=t,e.current=e.timers[t]},he=e=>{r(e.timers,ie),de(e,0)},pe=e=>(de(e,e.index+1),e.current),ge=(e,t=!1)=>{let r;const n=new Array(e.length),a=()=>pe(r),o=e.length-1;for(let t=0;t<o;t+=1)n[t]=ce(e[t],a);return n[o]=ce(e[o],t?()=>he(r):()=>r.isCompleted=!0),r={timers:n,current:n[0],index:0,isCompleted:!1}},ye=ge([se]),fe=Object.freeze({__proto__:null,step:ue,setUnitIndex:de,reset:he,next:pe,create:ge,dummy:ye}),_e=e=>e(),me=Object.freeze({__proto__:null,create:e=>c(e),addTimer:(e,t)=>u(e,()=>le(t)),addChain:(e,t)=>u(e,()=>ue(t)),step:e=>{_(e,_e)},clear:e=>p(e)}),xe=Object.freeze({__proto__:null,Chain:fe,Set:me,emptyListener:ae,create:oe,dummy:se,reset:ie,step:le,addOnComplete:ce}),be=new Map([["A",".-"],["B","-..."],["C","-.-."],["D","-.."],["E","."],["F","..-."],["G","--."],["H","...."],["I",".."],["J",".---"],["K","-.-"],["L",".-.."],["M","--"],["N","-."],["O","---"],["P",".--."],["Q","--.-"],["R",".-."],["S","..."],["T","-"],["U","..-"],["V","...-"],["W",".--"],["X","-..-"],["Y","-.--"],["Z","--.."],["1",".----"],["2","..---"],["3","...--"],["4","....-"],["5","....."],["6","-...."],["7","--..."],["8","---.."],["9","----."],["0","-----"],[".",".-.-.-"],[",","--..--"],[":","---..."],["?","..--.."],["'",".----."],["!","-.-.--"],["-","-....-"],["/","-..-."],["@",".--.-."],["(","-.--."],[")","-.--.-"],['"',".-..-."],["=","-...-"],["+",".-.-."]]);class we{constructor(e,t,r){this.isOn=e,this.length=t,this.codeString=r;let n="";const a=e?"1":"0";for(let e=0;e<t;e+=1)n+=a;this.binaryString=n}}class ze extends we{constructor(e,t){super(!0,e,t)}}class Oe extends we{constructor(e,t){super(!1,e,t)}}const ve=new ze(1,"."),Ce=new ze(3,"-"),ke=new Oe(1,""),Me=new Oe(3," "),Se=new Oe(7," / "),Pe=new Oe(0,"");const Ae=Object.freeze({__proto__:null,Unit:we,DIT:ve,DAH:Ce,INTER_ELEMENT_GAP:ke,SHORT_GAP:Me,MEDIUM_GAP:Se,NUL:Pe,encode:function(e){const t=e.toUpperCase(),r=[];let n=void 0;for(let e=0,a=t.length;e<a;e+=1){const a=t.charAt(e);if(" "===a){n=Se;continue}if(0===a.charCodeAt(0)){n&&r.push(n),n=void 0,r.push(Pe);continue}const o=be.get(a);if(o){for(let e=0,t=o.length;e<t;e+=1){switch(n&&r.push(n),o.charAt(e)){case".":r.push(ve);break;case"-":case"_":r.push(Ce);break;default:continue}n=ke}n=Me}}return r},toString:e=>e.reduce((e,t)=>e+t.codeString,""),toBinaryString:e=>e.reduce((e,t)=>e+t.binaryString,""),getTotalLength:e=>e.reduce((e,t)=>e+t.length,0)});function Re(e){return 1e3/(e/60*50)}const Ie=e=>{e.timeout&&(e.off(Pe),clearTimeout(e.timeout),e.timeout=void 0),e.index=0},Ee=(e,t,r)=>{t.timeout=setTimeout(()=>{t.timeout=void 0,e(t)},r)},je=e=>{const t=(e=>{const{unitTime:t,signals:r,index:n,on:a,off:o}=e,s=r[n];return s.isOn?a(s):o(s),t*s.length})(e);e.index+=1,e.index<e.signals.length?Ee(je,e,t):(e.timeout=setTimeout(()=>{e.loop?(e.off(Pe),e.timeout=void 0):(e.off(Se),Ee(je,e,Se.length))},t),e.index=0)},Te=Object.freeze({__proto__:null,wpmToDotDuration:Re,create:(e,t,r=25,n=[],a=!1)=>({on:e,off:t,wpm:r,unitTime:Re(r),loop:a,signals:n,index:0,timeout:void 0}),stop:Ie,start:(e,t)=>{Ie(e),t&&(e.signals=t),je(e)}}),Le=Object.freeze({__proto__:null,Signal:Ae,Channel:Te}),Be=Object.freeze({Angle:j,ArrayList:m,ArrayUtility:l,Bezier:F,Easing:Y,FitBox:re,HtmlUtility:ne,Lazy:x,Math:k,MorseCode:Le,MutableVector2D:B,Random:te,RectangleRegion:T,RectangleSize:L,StructureOfArrays:b,Timer:xe,Vector2D:R});
/**
   * p5-extension
   *
   * An extension for p5.js.
   * GitHub repository: {@link https://github.com/fal-works/p5-extension}
   *
   * @module p5-extension
   * @copyright 2019 FAL
   * @author FAL <contact@fal-works.com>
   * @license MIT
   * @version 0.1.8
   */
let Fe,He;const De=e=>{Fe=e},Ue=e=>{He=e},We=e=>"string"==typeof e?Fe.color(e):Object.assign({},e),Qe=()=>{},Ge=e=>{if(null===e)return()=>Fe.noStroke();if(void 0===e)return Qe;const t=We(e);return()=>Fe.stroke(t)},Ne=e=>{if(null===e)return()=>Fe.noFill();if(void 0===e)return Qe;const t=We(e);return()=>Fe.fill(t)},Ve=(e,t)=>{const r=We(e);return r.setAlpha(t),r},qe=(e,t)=>{const r=new Array(t),n=t-1;if(1===t)r[0]="string"==typeof e?Fe.color(e):Object.assign({},e);else{const a=Fe.alpha(e);for(let o=1;o<t;o+=1){const t=a*(o/n);r[o]=Ve(e,t)}}return{colors:r,maxIndex:n}},Ke=(e,t)=>e.colors[Math.round(e.maxIndex*t*(1/255))],Je=Object.freeze({__proto__:null,create:qe,get:Ke}),Xe=()=>{},Ze=Object.freeze({__proto__:null,create:(e,t,r)=>{if(1===r)return{stroke:Ge(e),fill:Ne(t)};let n,a;if(null===e)n=()=>Fe.noStroke();else if(void 0===e)n=Xe;else{const t=qe(e,r);n=e=>Fe.stroke(Ke(t,e))}if(null===t)a=()=>Fe.noFill();else if(void 0===t)a=Xe;else{const e=qe(t,r);a=t=>Fe.fill(Ke(e,t))}return{stroke:n,fill:a}},apply:(e,t)=>{if(t<1)return Fe.noStroke(),void Fe.noFill();e.stroke(t),e.fill(t)}}),Ye=(e,t)=>{Fe.rotate(t),e(),Fe.rotate(-t)},$e=(e,t)=>{Fe.scale(t),e(),Fe.scale(1/t)},et=e=>{const{controlPoint1:t,controlPoint2:r,targetPoint:n}=e;Fe.bezierVertex(t.x,t.y,r.x,r.y,n.x,n.y)},tt=e=>{const{point:t,controlLine:r}=e,{x:n,y:a}=t,o=R.fromPolar(.5*r.length,r.angle),s=o.x,i=o.y;Fe.line(n-s,a-i,n+s,a+i)};let rt=0,nt=0,at="DEFAULT";const ot=k.TWO_PI,st={x:0,y:0},it=()=>!0,lt=e=>({onClicked:e.onClicked||it,onPressed:e.onPressed||it,onReleased:e.onReleased||it,onMoved:e.onMoved||it}),ct=lt({}),ut=m.create(32),dt=lt({}),ht=e=>e(st),pt=e=>{const t=(e=>{switch(e){case 0:return e=>e.onClicked;case 1:return e=>e.onPressed;case 2:return e=>e.onReleased;case 3:return e=>e.onMoved}})(e);return()=>{if(!ht(t(ct)))return;const e=ut.array;let r=ut.size-1;for(;r>=0;){if(!ht(t(e[r])))break;r-=1}ht(t(dt))}},gt=pt(0),yt=pt(1),ft=pt(2),_t=pt(3),mt=Object.freeze({__proto__:null,logicalPosition:st,updatePosition:()=>{if(!He)return;const e=1/He.scaleFactor;st.x=e*Fe.mouseX,st.y=e*Fe.mouseY},emptyCallback:it,stopCallback:()=>!1,createEventHandler:lt,topEventHandler:ct,eventHandlerStack:ut,bottomEventHandler:dt,addEventHandler:e=>{const t=lt(e);return m.add(ut,t),t},removeEventHandler:e=>{m.removeShiftElement(ut,e)},onClicked:gt,onPressed:yt,onReleased:ft,onMoved:_t}),xt=Object.freeze({__proto__:null,anyKeyIsDown:e=>{for(const t of e)if(Fe.keyIsDown(t))return!0;return!1}});let bt=0,wt=0;const zt={x:0,y:0};let Ot=!1,vt=!1,Ct=!1,kt=!1;const Mt=1/Math.sqrt(2),St=(e,t)=>B.setCartesian(zt,e,t),Pt=()=>{switch(wt=(Ot?-1:0)+(Ct?1:0),bt=(vt?-1:0)+(kt?1:0)){case-1:switch(wt){case-1:St(-Mt,-Mt);break;case 0:St(-1,0);break;case 1:St(-Mt,Mt)}break;case 0:switch(wt){case-1:St(0,-1);break;case 0:St(0,0);break;case 1:St(0,1)}break;case 1:switch(wt){case-1:St(Mt,-Mt);break;case 0:St(1,0);break;case 1:St(Mt,Mt)}}},At=Object.freeze({__proto__:null,get horizontalMove(){return bt},get verticalMove(){return wt},unitVector:zt,get up(){return Ot},get left(){return vt},get down(){return Ct},get right(){return kt},onPressed:()=>{switch(Fe.key){case"w":Ot=!0;break;case"a":vt=!0;break;case"s":Ct=!0;break;case"d":kt=!0}switch(Fe.keyCode){case 38:Ot=!0;break;case 37:vt=!0;break;case 40:Ct=!0;break;case 39:kt=!0}Pt()},onReleased:()=>{switch(Fe.key){case"w":Ot=!1;break;case"a":vt=!1;break;case"s":Ct=!1;break;case"d":kt=!1}switch(Fe.keyCode){case 38:Ot=!1;break;case 37:vt=!1;break;case 40:Ct=!1;break;case 39:kt=!1}Pt()}});let Rt=!1;const It=[],Et=(e,t,r,n)=>{const a=ne.getElementSize("string"==typeof e?ne.getElementOrBody(e):e),o=null!==r?re.calculateScaleFactor(t,a,r):1,s=Fe.createCanvas(o*t.width,o*t.height,n),i=1!==o?e=>$e(e,o):e=>e();return{p5Canvas:s,scaleFactor:o,logicalSize:t,logicalRegion:T.create(R.zero,t),drawScaled:i,logicalCenterPosition:{x:t.width/2,y:t.height/2}}},jt=Object.freeze({AlphaColor:Je,KeyBoard:xt,Mouse:mt,MoveKeys:At,ShapeColor:Ze,applyShake:()=>{if(0===rt)return;const{width:e,height:t}=He.logicalSize,r="VERTICAL"===at?0:te.signed(rt*e),n="HORIZONTAL"===at?0:te.signed(rt*t);Fe.translate(r,n),(rt*=nt)<.001&&(rt=0)},arcAtOrigin:(e,t,r,n,a,o)=>Fe.arc(0,0,e,t,r*ot,n*ot,a,o),get canvas(){return He},circleAtOrigin:e=>Fe.circle(0,0,e),circularArcAtOrigin:(e,t,r,n,a)=>Fe.arc(0,0,e,e,t*ot,r*ot,n,a),colorWithAlpha:Ve,createPixels:e=>(Fe.push(),e(),Fe.pop(),Fe.loadPixels(),Fe.pixels),createScaledCanvas:Et,drawBezierControlLines:e=>{l.loop(e,tt)},drawBezierCurve:e=>{const{startPoint:t,paths:r}=e;Fe.vertex(t.x,t.y),l.loop(r,et)},drawRotated:Ye,drawScaled:$e,drawTransformed:(e,t,r,n,a)=>{Fe.translate(t,r),Fe.rotate(n),Fe.scale(a),e(),Fe.scale(1/a),Fe.rotate(-n),Fe.translate(-t,-r)},drawTranslated:(e,t,r)=>{Fe.translate(t,r),e(),Fe.translate(-t,-r)},drawTranslatedAndRotated:(e,t,r,n)=>{Fe.translate(t,r),Ye(e,n),Fe.translate(-t,-r)},graphicsToImage:e=>{const t=e,{width:r,height:n}=t,a=Fe.createImage(r,n);return a.copy(e,0,0,r,n,0,0,r,n),a},line:(e,t)=>Fe.line(e.x,e.y,t.x,t.y),lineAtOrigin:e=>Fe.line(0,0,e.x,e.y),lineWithMargin:(e,t,r)=>{const n=j.between(e,t),a=r*Math.cos(n),o=r*Math.sin(n);return Fe.line(e.x+a,e.y+o,t.x-a,t.y-o)},onSetup:It,get p(){return Fe},parseColor:We,parseFill:Ne,parseStroke:Ge,pauseOrResume:()=>{Rt?(Fe.loop(),Rt=!1):(Fe.noLoop(),Rt=!0)},replaceCanvasPixels:e=>{Fe.pixels=e,Fe.updatePixels()},setCanvas:Ue,setP5Instance:De,setShake:(e,t,r="DEFAULT",n=!1)=>{t>=1||(n||0===rt)&&(rt=e,nt=t,at=r)},startSketch:t=>{const r="string"==typeof t.htmlElement?ne.getElementOrBody(t.htmlElement):t.htmlElement;new e(e=>{De(e),e.setup=()=>{Ue(Et(r,t.logicalCanvasSize,t.fittingOption)),l.loop(It,t=>t(e)),It.length=0,t.initialize()},t.setP5Methods(e)},r)}}),Tt=ne.getElementOrBody("Fragments"),Lt={width:800,height:800};let Bt,Ft;It.push(()=>{Bt=Fe}),It.push(()=>{Ft=He});let Ht;It.push(e=>{(Ht=e.createGraphics(100,100)).translate(5,5),Ht.stroke(0,64,64,8);let t=.3;const r=Math.floor(90);for(let e=0,n=r;e<=n;e+=t)Ht.line(0,0,e,r),t+=.005});const Dt=te.angle,Ut=te.between,Wt=B;let Qt;It.push(()=>{Qt=Ft.logicalRegion.rightBottom.y+50});const Gt=e=>{const{position:t,velocity:r,rotation:n,scale:a}=e;return Wt.add(t,r),(e=>{e.angle+=e.velocity})(n),(e=>{const{factor:t,parameter:r,parameterChangeRate:n}=e;Wt.add(r,n),t.x=Math.sin(r.x),t.y=Math.sin(r.y)})(a),t.y>=Qt},Nt=e=>{const{position:t,scale:r,rotation:n}=e,{x:a,y:o}=t,{angle:s}=n,{x:i,y:l}=r.factor;0!==i&&0!==l&&(Bt.translate(a,o),Bt.rotate(s),Bt.scale(i,l),Bt.image(Ht,0,0),Bt.scale(1/i,1/l),Bt.rotate(-s),Bt.translate(-a,-o))},{ArrayList:Vt}=Be,{startSketch:qt,createPixels:Kt,replaceCanvasPixels:Jt,pauseOrResume:Xt}=jt;let Zt;const Yt=Vt.create(256),$t=()=>{},er=()=>{Bt.frameCount%4==0&&Vt.add(Yt,(()=>({position:{x:Ut(.25,.75)*Ft.logicalSize.width,y:-50},velocity:{x:0,y:Ut(2,5)},rotation:{angle:Dt(),velocity:Ut(.005,.02)},scale:{factor:{x:1,y:1},parameter:{x:Dt(),y:Dt()},parameterChangeRate:{x:Ut(.01,.05),y:Ut(.01,.05)}}}))()),Vt.removeShiftAll(Yt,Gt),Vt.loop(Yt,Nt)},tr=()=>{Zt(),Ft.drawScaled(er)},rr=()=>{switch(Bt.key){case"p":Xt();break;case"g":Bt.save("image.png")}};qt({htmlElement:Tt,logicalCanvasSize:Lt,initialize:()=>{const e=Kt(()=>{Ft.drawScaled(()=>{const{width:e,height:t}=Lt,r=Bt.createGraphics(e/4,t/4);r.background(232,236,240),r.noStroke(),r.fill(252,253,255),r.ellipse(r.width/2,r.height/2,r.width,r.height),r.filter(Bt.BLUR,10),Bt.image(r,0,0,e,t)})});Zt=()=>Jt(e),Bt.imageMode(Bt.CENTER)},setP5Methods:e=>{e.preload=$t,e.draw=tr,e.keyTyped=rr},fittingOption:void 0})}(p5);