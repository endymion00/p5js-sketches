/**
 * Rotational Symmetry.
 * Website => https://www.fal-works.com/
 * @copyright 2019 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.1
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";function t(t,e){return t+(o=e-t,Math.floor(Math.random()*o));var o}function e(t,e){const o=t.length;for(let n=0;n<o;n+=1)e(t[n])}var o,n;function r(t,e,n,r,i){const l=function(t,e,n){switch(n){default:case o.FIT_SIZE:const r=e.width/t.width,i=t.height;return r*i<e.height?r:e.height/i;case o.FIT_WIDTH:return e.width/t.width;case o.FIT_HEIGHT:return e.height/t.height}}(n,function(t){if(t===document.body)return{width:window.innerWidth,height:window.innerHeight};const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}(e),r);return{p5Canvas:t.createCanvas(l*n.width,l*n.height,i),scaleFactor:l}}function i(t,e,o,n,r,i,l,a){const u=t,s=a||u.pixelDensity(),c=u.pixels;for(let t=0;t<s;t+=1)for(let a=0;a<s;a+=1){const d=4*((o*s+a)*u.width*s+(e*s+t));c[d]=n,c[d+1]=r,c[d+2]=i,c[d+3]=l}}(n=o||(o={}))[n.FIT_SIZE=0]="FIT_SIZE",n[n.FIT_WIDTH=1]="FIT_WIDTH",n[n.FIT_HEIGHT=2]="FIT_HEIGHT";const l=(a="RotationalSymmetry",document.getElementById(a)||document.body);var a;new p5(o=>{let n,a,u,s,c;function d(t){t.applyColor();const e=t.revolution,n=t.count,r=t.shape,i=t.radius,l=t.shapeSize,a=t.rotationFactor;let u=e;const s=o.TWO_PI/n;for(let t=0;t<n;t+=1){const t=i*Math.cos(u),e=i*Math.sin(u),n=a*u;o.translate(t,e),o.rotate(n),r.draw(l),o.rotate(-n),o.translate(-t,-e),u+=s}t.revolution=e+t.revolutionVelocity}function h(t){const n=t.x,r=t.y;o.translate(n,r),e(t.shapeGroupList,d),o.translate(-n,-r)}const f=1/3,p=2/3,g=1/o.sqrt(3),w=1.2;function m(t,e,n,r,i){const l=o.random(t),a=i.pop();if(!a)throw"createShapeGroup - No colors in stack.";let u;switch(l.foldingNumber){case 1:u=1;break;case 4:u=o.random([-1,0,1]);break;case 1/0:u=0;break;default:u=o.random([-1,1])}return{shape:l,count:e,shapeSize:18,radius:n,revolution:0,revolutionVelocity:.004*r*o.TWO_PI,applyColor:a,rotationFactor:u}}function I(e,n,r,i,l=!1){const a=o.shuffle(i,!1),u=l?-1:1;return{x:e,y:n,shapeGroupList:[m(r,t(3,6),35,-u,a),m(r,t(4,10),75,u,a)]}}function b(t){if(t.foldingNumber===1/0)return null;const e=o.TWO_PI/t.foldingNumber*.5;return{draw:n=>{o.rotate(e),t.draw(n),o.rotate(-e)},foldingNumber:t.foldingNumber}}function T(t,e){return{draw:n=>{const r=e*n;o.translate(r,0),t.draw(n),o.translate(-r,0)},foldingNumber:1}}function F(t,e,o){return{draw:o=>{t.draw(o),e.draw(o)},foldingNumber:o}}function N(t){const e=t.foldingNumber;let o;return o=e===1/0?2:e%2==0?2:1,F(T(t,-.2),T(t,.2),o)}function v(t){const e=[t],o=b(t);o&&(e.push(o),e.push(function(t){const e=b(t);if(!e)throw"createRotatedCompositeShape() - Invalid input.";return F(t,e,2*t.foldingNumber)}(t)),e.push(N(o)));const n=N(t);if(e.push(n),2===n.foldingNumber){const t=b(n);t&&e.push(t)}return e}function y(){const t=(e=[{draw:function(t){o.rect(0,0,t,t,.05*t)},foldingNumber:4},{draw:function(t){const e=w*t;o.triangle(p*e,0,-f*e,-g*e,-f*e,g*e)},foldingNumber:3},{draw:function(t){o.ellipse(0,0,t,t)},foldingNumber:1/0},{draw:function(t){o.ellipse(0,0,.9*t,1.3*t)},foldingNumber:2},{draw:function(t){o.quad(.9*t,0,0,.6*t,-.9*t,0,0,-.6*t)},foldingNumber:2},{draw:function(t){o.beginShape(),o.vertex(.8*t,0),o.vertex(0,.5*t),o.curveVertex(-.4*t,0),o.vertex(0,-.5*t),o.endShape(o.CLOSE)},foldingNumber:1}].map(v),[].concat.apply([],e));var e;const r=["#C7243A","#2266AF","#009250","#EDAD0B"].map(t=>o.color(t)).map(t=>(function(t,e){const o=e.strokeColor,n=e.fillColor;return o&&n?()=>{t.stroke(o),t.fill(n)}:o?null===n?()=>{t.stroke(o),t.noFill()}:()=>{t.stroke(o)}:n?null===o?()=>{t.noStroke(),t.fill(n)}:()=>t.fill(n):null===o?null===n?()=>{t.noStroke(),t.noFill()}:()=>t.noStroke():null===n?()=>t.noFill():()=>{}})(o,{strokeColor:t,fillColor:void 0}));c=[];let i=!1;const l=n/3;for(let e=0;e<3;e+=1){const o=(e+.5)*l;for(let e=0;e<3;e+=1){const n=I((e+.5)*l,o,t,r,i);c.push(n),i=!i}}}o.preload=(()=>{}),o.setup=(()=>{n=640,a=640,u=r(o,l,{width:640,height:640});const t=function(t,e,o,n){const r=t.createGraphics(e,o),l=r.width,a=r.height,u=r.pixelDensity();r.loadPixels();for(let t=0;t<a;t+=1)for(let e=0;e<l;e+=1)i(r,e,t,0,0,0,255*Math.random()*n,u);return r.updatePixels(),r}(o,n,a,.05);o.push(),o.scale(u.scaleFactor),o.image(t,0,0),o.pop(),o.loadPixels(),s=o.pixels,o.noFill(),o.strokeWeight(2),o.rectMode(o.CENTER),y()}),o.draw=(()=>{o.pixels=s,o.updatePixels(),o.push(),o.scale(u.scaleFactor),e(c,h),o.pop()}),o.mousePressed=(()=>{y()}),o.keyTyped=(()=>{"p"===o.key&&o.noLoop()})},l)}();