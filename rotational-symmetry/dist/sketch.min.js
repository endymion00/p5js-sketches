/**
 * Rotational Symmetry.
 * Including module: p5ex (Copyright 2018 FAL, licensed under MIT).
 * Website => https://www.fal-works.com/
 * @copyright 2019 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.0
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";class t{}class e extends t{get width(){return this.rightPositionX-this.leftPositionX}get height(){return this.bottomPositionY-this.topPositionY}get area(){return this.width*this.height}constructor(t,e,n,i,s=0){super(),this.leftPositionX=t-s,this.topPositionY=e-s,this.rightPositionX=n+s,this.bottomPositionY=i+s}contains(t,e=0){return t.x>=this.leftPositionX-e&&t.x<=this.rightPositionX+e&&t.y>=this.topPositionY-e&&t.y<=this.bottomPositionY+e}constrain(t,e=0){t.x<this.leftPositionX-e?t.x=this.leftPositionX-e:t.x>this.rightPositionX+e&&(t.x=this.rightPositionX+e),t.y<this.topPositionY-e?t.y=this.topPositionY-e:t.y>this.bottomPositionY+e&&(t.y=this.bottomPositionY+e)}}class n{constructor(t,n,i,s){this.p=t,this.canvasElement=t.createCanvas(n.scaledWidth,n.scaledHeight,s),this.canvasElement&&"parent"in this.canvasElement&&this.canvasElement.parent(i),this.region=new e(0,0,0,0),this.nonScaledShortSideLength=n.nonScaledShortSideLength,this.updateSize()}get scaleFactor(){return this._scaleFactor}get nonScaledWidth(){return this._nonScaledWidth}get nonScaledHeight(){return this._nonScaledHeight}get aspectRatio(){return this._aspectRatio}resize(t){this.p.resizeCanvas(t.scaledWidth,t.scaledHeight),this.nonScaledShortSideLength=t.nonScaledShortSideLength,this.updateSize()}updateSize(){const t=this.p;this._scaleFactor=Math.min(t.width,t.height)/this.nonScaledShortSideLength,this._inversedScaleFactor=1/this._scaleFactor,this._nonScaledWidth=t.width/this._scaleFactor,this._nonScaledHeight=t.height/this._scaleFactor,this._aspectRatio=t.width/t.height,this.region.rightPositionX=this._nonScaledWidth,this.region.bottomPositionY=this._nonScaledHeight}scale(){this.p.scale(this._scaleFactor)}cancelScale(){this.p.scale(this._inversedScaleFactor)}getNonScaledValueOf(t){return t/this._scaleFactor}}n.DUMMY_PARAMETERS={scaledWidth:100,scaledHeight:100,nonScaledShortSideLength:100};const i={SQUARE640x640:"SQUARE640x640",RECT640x480:"RECT640x480",FULL:"FULL",CUSTOM:"CUSTOM"};class s{constructor(t,e){this.p=t,this.p5Color=e}stroke(){this.p.currentRenderer.stroke(this.p5Color)}fill(){this.p.currentRenderer.fill(this.p5Color)}}class a{constructor(t){this.p=t}stroke(){this.p.currentRenderer.noStroke()}fill(){this.p.currentRenderer.noFill()}}class o{stroke(){}fill(){}}class r{constructor(t,e,n=256){this.p=t;const i=[];for(let s=0;s<n;s+=1)i.push(t.color(t.red(e),t.green(e),t.blue(e),t.alpha(e)*s/(n-1)));this.colorArray=i,this.maxIndex=n-1}stroke(t){this.p.currentRenderer.stroke(this.getColor(t))}fill(t){this.p.currentRenderer.fill(this.getColor(t))}getColor(t){return this.colorArray[t?Math.floor(this.p.map(t,0,255,0,this.maxIndex)):this.maxIndex]}}function h(t,e,n,i){return t&&void 0!==e?null===e?new a(t):n?new r(t,e,i):new s(t,e):new o}class l{constructor(t,e,n,i,s){this.strokeColor=h(t,e,i,s),this.fillColor=h(t,n,i,s)}applyColor(t){this.strokeColor.stroke(t),this.fillColor.fill(t)}}l.UNDEFINED=new l(void 0,void 0,void 0);Math.PI;const c=new p5(t=>{t.setup=(()=>{t.noCanvas()})});Math.PI,c.createVector(),c.createVector();function d(t,e){return t+(n=e-t,Math.floor(Math.random()*n));var n}class u{constructor(t=256){this.array=new Array(t),this.length=0}get(t){return this.array[t]}getLast(){return this.array[this.length-1]}push(t){return this.array[this.length]=t,this.length+=1,this.length}pushRawArray(t,e=t.length){for(let n=0;n<e;n+=1)this.array[this.length+n]=t[n];return this.length+=e,this.length}pushAll(t){return this.pushRawArray(t.array,t.length)}pop(){return this.length-=1,this.array[this.length]}clear(){this.length=0}loop(t){!function(t,e,n){let i=0;for(;i<n;)e(t[i],i,t),i+=1}(this.array,t,this.length)}loopBackwards(t){!function(t,e,n){for(;n--;)e(t[n],n,t)}(this.array,t,this.length)}roundRobin(t){!function(t,e,n){for(let i=0,s=n-1;i<s;i+=1)for(let s=i+1;s<n;s+=1)e(t[i],t[s])}(this.array,t,this.length)}nestedLoopJoin(t,e){!function(t,e,n,i,s){for(let a=0;a<i;a+=1)for(let i=0;i<s;i+=1)n(t[a],e[i])}(this.array,t.array,e,this.length,t.length)}}class p extends u{static drawFunction(t){t.draw()}draw(){this.loop(p.drawFunction)}}class g extends u{static stepFunction(t){t.step()}step(){this.loop(g.stepFunction)}}class f extends u{}f.prototype.step=g.prototype.step,f.prototype.draw=p.prototype.draw;class S extends u{constructor(t){super(t),this.recentRemovedElements=new u(t)}clean(){this.recentRemovedElements.clear();let t=0;for(let e=0;e<this.length;e+=1)this.array[e].clean(),this.array[e].isToBeRemoved?this.recentRemovedElements.push(this.array[e]):(this.array[t]=this.array[e],t+=1);this.length=t}}class m extends S{}m.prototype.draw=f.prototype.draw,m.prototype.step=f.prototype.step;c.createVector(),c.createVector();function w(t,e,n,i,s,a,o,r){const h=t,l=r||h.pixelDensity();for(let t=0;t<l;t+=1)for(let r=0;r<l;r+=1){const c=4*((n*l+r)*h.width*l+(e*l+t));h.pixels[c]=i,h.pixels[c+1]=s,h.pixels[c+2]=a,h.pixels[c+3]=o}}c.createVector();new class extends p5{setCurrentRenderer(t){this.currentRenderer=t}get nonScaledWidth(){return this.scalableCanvas.nonScaledWidth}get nonScaledHeight(){return this.scalableCanvas.nonScaledHeight}get idealFrameRate(){return this._idealFrameRate}get unitAngleSpeed(){return this._unitAngleSpeed}get unitSpeed(){return this._unitSpeed}get unitAccelerationMagnitude(){return this._unitAccelerationMagnitude}constructor(t,e,n){super(t,"string"==typeof e?document.getElementById(e)||void 0:e,n),this.node=e&&"boolean"!=typeof e?"string"==typeof e?document.getElementById(e)||document.body:e:document.body,this.currentRenderer=this,this.maxCanvasRegion={width:0,height:0,getShortSideLength(){return Math.min(this.width,this.height)}},this.updateMaxCanvasRegion(),this.setFrameRate()}setFrameRate(t=60){return this.frameRate(t),t&&(this._idealFrameRate=t,this._unitAngleSpeed=2*Math.PI/this._idealFrameRate,this._unitSpeed=1/this._idealFrameRate,this._unitAccelerationMagnitude=this._unitSpeed/this._idealFrameRate),this}updateMaxCanvasRegion(){if(this.maxCanvasRegion.width=this.windowWidth,this.maxCanvasRegion.height=this.windowHeight,this.node===document.body)return;const t=this.node.getBoundingClientRect();this.maxCanvasRegion.width=t.width,this.maxCanvasRegion.height=t.height}createScalableCanvas(t,e,i){this.scalableCanvasType=t,this.scalableCanvas=new n(this,this.createScalableCanvasParameter(t,e),this.node,i)}resizeScalableCanvas(t,e){this.scalableCanvas.resize(this.createScalableCanvasParameter(t||this.scalableCanvasType,e))}createScalableCanvasParameter(t,e){this.updateMaxCanvasRegion();const s=this.maxCanvasRegion.getShortSideLength();switch(t){case i.SQUARE640x640:return{scaledWidth:s,scaledHeight:s,nonScaledShortSideLength:640};case i.RECT640x480:return{scaledWidth:s,scaledHeight:.75*s,nonScaledShortSideLength:480};case i.FULL:return{scaledWidth:this.maxCanvasRegion.width,scaledHeight:this.maxCanvasRegion.height,nonScaledShortSideLength:640};default:return e||n.DUMMY_PARAMETERS}}}(t=>{let e,n;function s(e){e.shapeColor.applyColor();const n=e.revolution,i=e.count,s=e.shape,a=e.radius,o=e.shapeSize,r=e.rotationFactor;let h=n;const l=t.TWO_PI/i;for(let e=0;e<i;e+=1){const e=a*Math.cos(h),n=a*Math.sin(h),i=r*h;t.translate(e,n),t.rotate(i),s.draw(o),t.rotate(-i),t.translate(-e,-n),h+=l}e.revolution=n+e.revolutionVelocity}function a(e){const n=e.x,i=e.y;t.translate(n,i),function(t,e){const n=t.length;for(let i=0;i<n;i+=1)e(t[i])}(e.shapeGroupList,s),t.translate(-n,-i)}const o=1/3,r=2/3,h=1/t.sqrt(3),c=1.2;function p(e,n,i,s,a){const o=t.random(e),r=a.pop();if(!r)throw"createShapeGroup - No colors in stack.";let h;switch(o.foldingNumber){case 1:h=1;break;case 4:h=t.random([-1,0,1]);break;case 1/0:h=0;break;default:h=t.random([-1,1])}return{shape:o,count:n,shapeSize:18,radius:i,revolution:0,revolutionVelocity:.004*s*t.TWO_PI,shapeColor:r,rotationFactor:h}}function g(e,n,i,s,a=!1){const o=t.shuffle(s,!1),r=a?-1:1;return{x:e,y:n,shapeGroupList:[p(i,d(3,6),35,-r,o),p(i,d(4,10),75,r,o)]}}function f(e){if(e.foldingNumber===1/0)return null;const n=t.TWO_PI/e.foldingNumber*.5;return{draw:i=>{t.rotate(n),e.draw(i),t.rotate(-n)},foldingNumber:e.foldingNumber}}function S(e,n){return{draw:i=>{const s=n*i;t.translate(s,0),e.draw(i),t.translate(-s,0)},foldingNumber:1}}function m(t,e,n){return{draw:n=>{t.draw(n),e.draw(n)},foldingNumber:n}}function y(t){const e=t.foldingNumber;let n;return n=e===1/0?2:e%2==0?2:1,m(S(t,-.2),S(t,.2),n)}function v(t){const e=[t],n=f(t);n&&(e.push(n),e.push(function(t){const e=f(t);if(!e)throw"createRotatedCompositeShape() - Invalid input.";return m(t,e,2*t.foldingNumber)}(t)),e.push(y(n)));const i=y(t);if(e.push(i),2===i.foldingNumber){const t=f(i);t&&e.push(t)}return e}function x(){const e=(i=[{draw:function(e){t.rect(0,0,e,e,.05*e)},foldingNumber:4},{draw:function(e){const n=c*e;t.triangle(r*n,0,-o*n,-h*n,-o*n,h*n)},foldingNumber:3},{draw:function(e){t.ellipse(0,0,e,e)},foldingNumber:1/0},{draw:function(e){t.ellipse(0,0,.9*e,1.3*e)},foldingNumber:2},{draw:function(e){t.quad(.9*e,0,0,.6*e,-.9*e,0,0,-.6*e)},foldingNumber:2},{draw:function(e){t.beginShape(),t.vertex(.8*e,0),t.vertex(0,.5*e),t.curveVertex(-.4*e,0),t.vertex(0,-.5*e),t.endShape(t.CLOSE)},foldingNumber:1}].map(v),[].concat.apply([],i));var i;const s=["#C7243A","#2266AF","#009250","#EDAD0B"].map(e=>t.color(e)).map(e=>new l(t,e,void 0));n=new u(9);let a=!1;const d=t.nonScaledWidth/3;for(let t=0;t<3;t+=1){const i=(t+.5)*d;for(let t=0;t<3;t+=1){const o=g((t+.5)*d,i,e,s,a);n.push(o),a=!a}}}t.preload=(()=>{}),t.setup=(()=>{t.createScalableCanvas(i.SQUARE640x640);const n=function(t,e,n,i){const s=t.createGraphics(e,n),a=s.width,o=s.height,r=s.pixelDensity();s.loadPixels();for(let t=0;t<o;t+=1)for(let e=0;e<a;e+=1)w(s,e,t,0,0,0,255*Math.random()*i,r);return s.updatePixels(),s}(t,t.nonScaledWidth,t.nonScaledHeight,.05);t.scalableCanvas.scale(),t.image(n,0,0),t.scalableCanvas.cancelScale(),t.loadPixels(),e=t.pixels,t.noFill(),t.strokeWeight(2),t.rectMode(t.CENTER),x()}),t.draw=(()=>{t.pixels=e,t.updatePixels(),t.scalableCanvas.scale(),n.loop(a),t.scalableCanvas.cancelScale()}),t.mousePressed=(()=>{x()}),t.keyTyped=(()=>{"p"===t.key&&t.noLoop()})},"RotationalSymmetry")}();