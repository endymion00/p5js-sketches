/**
 * Rotational Symmetry.
 * Website => https://www.fal-works.com/
 * @copyright 2019 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.3
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";function t(t){return document.getElementById(t)||document.body}function e(t){return Math.floor(Math.random()*t)}function n(t,n){return t+e(n-t)}function o(t){const n=t.length;if(0===n)throw new Error("Passed empty array.");return t[e(n)]}function r(t,e){const n=t.length;for(let o=0;o<n;o+=1)e(t[o],o,t)}var i,a;function l(e,n,o,r,a){let l;const u=function(t,e,n){switch(n){default:case i.FIT_TO_BOX:const o=e.width/t.width,r=t.height,a=e.height;return o*r<a?o:a/r;case i.FIT_WIDTH:return e.width/t.width;case i.FIT_HEIGHT:return e.height/t.height}}(o,function(t){if(t===document.body)return{width:window.innerWidth,height:window.innerHeight};const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}(l="string"==typeof n?t(n):n),r);return{p5Canvas:e.createCanvas(u*o.width,u*o.height,a),scaleFactor:u}}function u(t,e,n,o,r,i,a,l){const u=t,c=l||u.pixelDensity(),s=u.pixels;for(let t=0;t<c;t+=1)for(let l=0;l<c;l+=1){const d=4*((n*c+l)*u.width*c+(e*c+t));s[d]=o,s[d+1]=r,s[d+2]=i,s[d+3]=a}}(a=i||(i={}))[a.FIT_TO_BOX=0]="FIT_TO_BOX",a[a.FIT_WIDTH=1]="FIT_WIDTH",a[a.FIT_HEIGHT=2]="FIT_HEIGHT";const c=t("RotationalSymmetry"),s=["#C7243A","#2266AF","#009250","#EDAD0B"];var d,h,f,p,m;new p5(t=>{let e,i,a,w,g,F;function x(e){e.applyColor();const n=e.revolution%t.TWO_PI,o=e.count,r=e.shape,i=e.radius,a=e.shapeSize,l=e.rotationFactor;let u=n;const c=t.TWO_PI/o,s=()=>r.draw(a);for(let e=0;e<o;e+=1){const e=i*Math.cos(u),o=i*Math.sin(u);h=s,f=e,p=o,m=u+(l||0)*n,w=void 0,g=void 0,F=void 0,(d=t).translate(f,p),g=h,F=m,(w=d).rotate(F),g(w),w.rotate(-F),d.translate(-f,-p),u+=c}var d,h,f,p,m,w,g,F;e.revolution=n+e.revolutionVelocity}function T(e){var n,o,i,a;n=t,o=(()=>r(e.shapeGroupList,x)),i=e.x,a=e.y,n.translate(i,a),o(n),n.translate(-i,-a)}const b=1/3,v=2/3,y=1/t.sqrt(3),I=1.2;function N(e,n,r,i,a){const l=o(e),u=a.pop();if(!u)throw"createShapeGroup - No colors in stack.";let c;switch(l.maxFoldingNumber){case 1:c=1;break;case 4:c=o([-2,-1,0,1,2]);break;case 1/0:c=null;break;default:c=o([-2,0,2])}return{shape:l,count:n,shapeSize:18,radius:r,revolution:0,revolutionVelocity:.004*i*t.TWO_PI,applyColor:u,rotationFactor:c}}function _(e,o,r,i,a=!1){const l=t.shuffle(i,!1),u=a?-1:1;return{x:e,y:o,shapeGroupList:[N(r,n(3,6),35,-u,l),N(r,n(4,10),75,u,l)]}}function k(e){if(e.maxFoldingNumber===1/0)return null;const n=t.TWO_PI/e.maxFoldingNumber*.5;return{draw:o=>{t.rotate(n),e.draw(o),t.rotate(-n)},maxFoldingNumber:e.maxFoldingNumber}}function C(e,n){return{draw:o=>{const r=n*o;t.translate(r,0),e.draw(o),t.translate(-r,0)},maxFoldingNumber:1}}function O(t,e,n){return{draw:n=>{t.draw(n),e.draw(n)},maxFoldingNumber:n}}function E(t){const e=t.maxFoldingNumber;let n;return n=e===1/0?2:e%2==0?2:1,O(C(t,-.2),C(t,.2),n)}function H(t){const e=[t],n=k(t);n&&(e.push(n),e.push(function(t){const e=k(t);if(!e)throw new Error("Could not create rotated shape.");return O(t,e,2*t.maxFoldingNumber)}(t)),e.push(E(n)));const o=E(t);if(e.push(o),2===o.maxFoldingNumber){const t=k(o);t&&e.push(t)}return e}function P(){var e;e=[{draw:function(e){t.rect(0,0,e,e,.05*e)},maxFoldingNumber:4},{draw:function(e){const n=I*e;t.triangle(v*n,0,-b*n,-y*n,-b*n,y*n)},maxFoldingNumber:3},{draw:function(e){t.ellipse(0,0,e,e)},maxFoldingNumber:1/0},{draw:function(e){t.ellipse(0,0,.9*e,1.3*e)},maxFoldingNumber:2},{draw:function(e){t.quad(.9*e,0,0,.6*e,-.9*e,0,0,-.6*e)},maxFoldingNumber:2},{draw:function(e){t.beginShape(),t.vertex(.8*e,0),t.vertex(0,.5*e),t.curveVertex(-.4*e,0),t.vertex(0,-.5*e),t.endShape(t.CLOSE)},maxFoldingNumber:1}].map(H),g=[].concat.apply([],e),F=s.map(e=>t.color(e)).map(e=>(function(t,e){const n=e.strokeColor,o=e.fillColor;return n&&o?()=>{t.stroke(n),t.fill(o)}:n?null===o?()=>{t.stroke(n),t.noFill()}:()=>{t.stroke(n)}:o?null===n?()=>{t.noStroke(),t.fill(o)}:()=>t.fill(o):null===n?null===o?()=>{t.noStroke(),t.noFill()}:()=>t.noStroke():null===o?()=>t.noFill():()=>{}})(t,{strokeColor:e,fillColor:void 0}))}function S(){w=[];let t=!1;const n=e.width/3;for(let e=0;e<3;e+=1){const o=(e+.5)*n;for(let e=0;e<3;e+=1){const r=_((e+.5)*n,o,g,F,t);w.push(r),t=!t}}}function W(){r(w,T)}t.preload=(()=>{}),t.setup=(()=>{i=l(t,c,e={width:640,height:640}),m=(t=>{t.scale(i.scaleFactor),t.image(function(t,e,n){const o=t.createGraphics(e.width,e.height),r=o.width,i=o.height,a=o.pixelDensity();o.loadPixels();for(let t=0;t<i;t+=1)for(let e=0;e<r;e+=1)u(o,e,t,0,0,0,255*Math.random()*n,a);return o.updatePixels(),o}(t,e,.05),0,0)}),(p=t).push(),m(p),p.pop(),p.loadPixels(),a=p.pixels,t.noFill(),t.strokeWeight(2),t.rectMode(t.CENTER),P(),S()}),t.draw=(()=>{t.pixels=a,t.updatePixels(),d=t,h=W,f=i.scaleFactor,d.scale(f),h(d),d.scale(1/f)}),t.mousePressed=(()=>{S()}),t.keyTyped=(()=>{"p"===t.key&&t.noLoop()})},c)}();