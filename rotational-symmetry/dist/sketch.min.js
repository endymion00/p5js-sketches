/**
 * Rotational Symmetry.
 * Website => https://www.fal-works.com/
 * @copyright 2019 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.7
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";const t=t=>document.getElementById(t)||document.body,e=t=>t===document.body?{width:window.innerWidth,height:window.innerHeight}:t.getBoundingClientRect(),n=t=>Math.floor(Math.random()*t),o=(t,e)=>t+n(e-t),r=t=>t[n(t.length)];function a(t,e){const n=t.length;for(let o=0;o<n;o+=1)e(t[o],o,t)}const i=t=>[].concat.apply([],t);var l,s;(s=l||(l={}))[s.FIT_TO_BOX=0]="FIT_TO_BOX",s[s.FIT_WIDTH=1]="FIT_WIDTH",s[s.FIT_HEIGHT=2]="FIT_HEIGHT";const c=(t,e,n)=>{switch(n){default:case l.FIT_TO_BOX:return Math.min(e.width/t.width,e.height/t.height);case l.FIT_WIDTH:return e.width/t.width;case l.FIT_HEIGHT:return e.height/t.height}};const u=(t,e)=>{const n=e.strokeColor,o=e.fillColor;switch(n){case void 0:switch(o){case void 0:return()=>{};case null:return()=>t.noFill();default:return()=>t.fill(o)}case null:switch(o){case void 0:return()=>t.noStroke();case null:return()=>{t.noStroke(),t.noFill()};default:return()=>{t.noStroke(),t.fill(o)}}default:switch(o){case void 0:return()=>t.stroke(n);case null:return()=>{t.stroke(n),t.noFill()};default:return()=>{t.stroke(n),t.fill(o)}}}};function d(t,e,n,o,r,a,i,l){const s=t,c=l||s.pixelDensity(),u=s.pixels;for(let t=0;t<c;t+=1)for(let l=0;l<c;l+=1){const d=4*((n*c+l)*s.width*c+(e*c+t));u[d]=o,u[d+1]=r,u[d+2]=a,u[d+3]=i}}const h=t("RotationalSymmetry"),f=["#C7243A","#2266AF","#009250","#EDAD0B"];var p,m,w,g,F;new p5(n=>{let l,s,x,T,b;function v(t){t.applyColor();const e=t.revolution%n.TWO_PI,o=t.count,r=t.shape,a=t.radius,i=t.shapeSize,l=t.rotationFactor;let s=e;const c=n.TWO_PI/o,u=()=>r.draw(i);for(let t=0;t<o;t+=1){const t=a*Math.cos(s),o=a*Math.sin(s);h=u,f=t,p=o,m=s+(l||0)*e,w=void 0,g=void 0,F=void 0,(d=n).translate(f,p),g=h,F=m,(w=d).rotate(F),g(w),w.rotate(-F),d.translate(-f,-p),s+=c}var d,h,f,p,m,w,g,F;t.revolution=e+t.revolutionVelocity}function I(t){var e,o,r,i;e=n,o=(()=>a(t.shapeGroupList,v)),r=t.x,i=t.y,e.translate(r,i),o(e),e.translate(-r,-i)}const y=1/3,N=2/3,k=1/n.sqrt(3);function _(t,e,o,a,i){const l=r(t),s=i.pop();if(!s)throw new Error("No colors in stack.");let c;switch(l.maxFoldingNumber){case 1:c=0;break;case 4:c=r([-2,-1,0,1,2]);break;case 1/0:c=null;break;default:c=r([-2,0,2])}return{shape:l,count:e,shapeSize:18,radius:o,revolution:0,revolutionVelocity:.004*a*n.TWO_PI,applyColor:s,rotationFactor:c}}function C(t,e,r,a,i=!1){const l=n.shuffle(a,!1),s=i?-1:1;return{x:t,y:e,shapeGroupList:[_(r,o(3,6),35,-s,l),_(r,o(4,10),75,s,l)]}}function S(t){if(t.maxFoldingNumber===1/0)return null;const e=n.TWO_PI/t.maxFoldingNumber*.5;return{draw:o=>{n.rotate(e),t.draw(o),n.rotate(-e)},maxFoldingNumber:t.maxFoldingNumber}}function O(t,e){return{draw:o=>{const r=e*o;n.translate(r,0),t.draw(o),n.translate(-r,0)},maxFoldingNumber:1}}function E(t,e,n){return{draw:n=>{t.draw(n),e.draw(n)},maxFoldingNumber:n}}function H(t){const e=t.maxFoldingNumber;let n;return n=e===1/0?2:e%2==0?2:1,E(O(t,-.2),O(t,.2),n)}function P(t){const e=[t],n=S(t);n&&(e.push(n),e.push(function(t){const e=S(t);if(!e)throw new Error("Could not create rotated shape.");return E(t,e,2*t.maxFoldingNumber)}(t)),e.push(H(n)));const o=H(t);if(e.push(o),2===o.maxFoldingNumber){const t=S(o);t&&e.push(t)}return e}function W(){T=i([{draw:function(t){n.rect(0,0,t,t,.05*t)},maxFoldingNumber:4},{draw:function(t){const e=1.2*t,o=-y*e,r=N*e,a=k*e;n.triangle(r,0,o,-a,o,a)},maxFoldingNumber:3},{draw:function(t){n.ellipse(0,0,t,t)},maxFoldingNumber:1/0},{draw:function(t){n.ellipse(0,0,.9*t,1.3*t)},maxFoldingNumber:2},{draw:function(t){n.quad(.9*t,0,0,.6*t,-.9*t,0,0,-.6*t)},maxFoldingNumber:2},{draw:function(t){n.beginShape(),n.vertex(.8*t,0),n.vertex(0,.5*t),n.curveVertex(-.4*t,0),n.vertex(0,-.5*t),n.endShape(n.CLOSE)},maxFoldingNumber:1}].map(P)),b=f.map(t=>n.color(t)).map(t=>u(n,{strokeColor:t,fillColor:void 0}))}function D(){x=[];let t=!1;const e=l.nonScaledSize.width/3;for(let n=0;n<3;n+=1){const o=(n+.5)*e;for(let n=0;n<3;n+=1){const r=C((n+.5)*e,o,T,b,t);x.push(r),t=!t}}}function M(){a(x,I)}n.preload=(()=>{}),n.setup=(()=>{const o={width:640,height:640};l=function(n,o,r,a,i){const l=e("string"==typeof o?t(o):o),s=c(r,l,a);return{p5Canvas:n.createCanvas(s*r.width,s*r.height,i),scaleFactor:s,nonScaledSize:r}}(n,h,o),F=(t=>{t.background(255),t.scale(l.scaleFactor),t.image(function(t,e,n){const o=t.createGraphics(e.width,e.height),r=o.width,a=o.height,i=o.pixelDensity();o.loadPixels();for(let t=0;t<a;t+=1)for(let e=0;e<r;e+=1)d(o,e,t,0,0,0,255*Math.random()*n,i);return o.updatePixels(),o}(t,o,.05),0,0)}),(g=n).push(),F(g),g.pop(),g.loadPixels(),s=g.pixels,n.noFill(),n.strokeWeight(2),n.rectMode(n.CENTER),W(),D()}),n.draw=(()=>{n.pixels=s,n.updatePixels(),p=n,m=M,w=l.scaleFactor,p.scale(w),m(p),p.scale(1/w)}),n.mousePressed=(()=>{D()}),n.keyTyped=(()=>{"p"===n.key&&n.noLoop()})},h)}();