/**
 * Rotational Symmetry.
 * Website => https://www.fal-works.com/
 * @copyright 2019 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.2
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";function t(t,e){return t+(o=e-t,Math.floor(Math.random()*o));var o}function e(t,e){const o=t.length;for(let n=0;n<o;n+=1)e(t[n])}var o,n;function r(t,e,n,r,i){const a=function(t,e,n){switch(n){default:case o.FIT_SIZE:const r=e.width/t.width,i=t.height;return r*i<e.height?r:e.height/i;case o.FIT_WIDTH:return e.width/t.width;case o.FIT_HEIGHT:return e.height/t.height}}(n,function(t){if(t===document.body)return{width:window.innerWidth,height:window.innerHeight};const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}(e),r);return{p5Canvas:t.createCanvas(a*n.width,a*n.height,i),scaleFactor:a}}function i(t,e,o,n,r,i,a,l){const u=t,s=l||u.pixelDensity(),c=u.pixels;for(let t=0;t<s;t+=1)for(let l=0;l<s;l+=1){const d=4*((o*s+l)*u.width*s+(e*s+t));c[d]=n,c[d+1]=r,c[d+2]=i,c[d+3]=a}}(n=o||(o={}))[n.FIT_SIZE=0]="FIT_SIZE",n[n.FIT_WIDTH=1]="FIT_WIDTH",n[n.FIT_HEIGHT=2]="FIT_HEIGHT";const a=(l="RotationalSymmetry",document.getElementById(l)||document.body);var l;new p5(o=>{let n,l,u,s,c;function d(t){t.applyColor();const e=t.revolution,n=t.count,r=t.shape,i=t.radius,a=t.shapeSize,l=t.rotationFactor;let u=e;const s=o.TWO_PI/n;for(let t=0;t<n;t+=1){const t=i*Math.cos(u),e=i*Math.sin(u),n=l*u;o.translate(t,e),o.rotate(n),r.draw(a),o.rotate(-n),o.translate(-t,-e),u+=s}t.revolution=e+t.revolutionVelocity}function h(t){const n=t.x,r=t.y;o.translate(n,r),e(t.shapeGroupList,d),o.translate(-n,-r)}const p=1/3,f=2/3,m=1/o.sqrt(3),g=1.2;function w(t,e,n,r,i){const a=o.random(t),l=i.pop();if(!l)throw"createShapeGroup - No colors in stack.";let u;switch(a.maxFoldingNumber){case 1:u=1;break;case 4:u=o.random([-1,0,1]);break;case 1/0:u=0;break;default:u=o.random([-1,1])}return{shape:a,count:e,shapeSize:18,radius:n,revolution:0,revolutionVelocity:.004*r*o.TWO_PI,applyColor:l,rotationFactor:u}}function F(e,n,r,i,a=!1){const l=o.shuffle(i,!1),u=a?-1:1;return{x:e,y:n,shapeGroupList:[w(r,t(3,6),35,-u,l),w(r,t(4,10),75,u,l)]}}function x(t){if(t.maxFoldingNumber===1/0)return null;const e=o.TWO_PI/t.maxFoldingNumber*.5;return{draw:n=>{o.rotate(e),t.draw(n),o.rotate(-e)},maxFoldingNumber:t.maxFoldingNumber}}function I(t,e){return{draw:n=>{const r=e*n;o.translate(r,0),t.draw(n),o.translate(-r,0)},maxFoldingNumber:1}}function b(t,e,o){return{draw:o=>{t.draw(o),e.draw(o)},maxFoldingNumber:o}}function T(t){const e=t.maxFoldingNumber;let o;return o=e===1/0?2:e%2==0?2:1,b(I(t,-.2),I(t,.2),o)}function N(t){const e=[t],o=x(t);o&&(e.push(o),e.push(function(t){const e=x(t);if(!e)throw"createRotatedCompositeShape() - Invalid input.";return b(t,e,2*t.maxFoldingNumber)}(t)),e.push(T(o)));const n=T(t);if(e.push(n),2===n.maxFoldingNumber){const t=x(n);t&&e.push(t)}return e}function v(){const t=(e=[{draw:function(t){o.rect(0,0,t,t,.05*t)},maxFoldingNumber:4},{draw:function(t){const e=g*t;o.triangle(f*e,0,-p*e,-m*e,-p*e,m*e)},maxFoldingNumber:3},{draw:function(t){o.ellipse(0,0,t,t)},maxFoldingNumber:1/0},{draw:function(t){o.ellipse(0,0,.9*t,1.3*t)},maxFoldingNumber:2},{draw:function(t){o.quad(.9*t,0,0,.6*t,-.9*t,0,0,-.6*t)},maxFoldingNumber:2},{draw:function(t){o.beginShape(),o.vertex(.8*t,0),o.vertex(0,.5*t),o.curveVertex(-.4*t,0),o.vertex(0,-.5*t),o.endShape(o.CLOSE)},maxFoldingNumber:1}].map(N),[].concat.apply([],e));var e;const r=["#C7243A","#2266AF","#009250","#EDAD0B"].map(t=>o.color(t)).map(t=>(function(t,e){const o=e.strokeColor,n=e.fillColor;return o&&n?()=>{t.stroke(o),t.fill(n)}:o?null===n?()=>{t.stroke(o),t.noFill()}:()=>{t.stroke(o)}:n?null===o?()=>{t.noStroke(),t.fill(n)}:()=>t.fill(n):null===o?null===n?()=>{t.noStroke(),t.noFill()}:()=>t.noStroke():null===n?()=>t.noFill():()=>{}})(o,{strokeColor:t,fillColor:void 0}));c=[];let i=!1;const a=n/3;for(let e=0;e<3;e+=1){const o=(e+.5)*a;for(let e=0;e<3;e+=1){const n=F((e+.5)*a,o,t,r,i);c.push(n),i=!i}}}o.preload=(()=>{}),o.setup=(()=>{n=640,l=640,u=r(o,a,{width:640,height:640});const t=function(t,e,o,n){const r=t.createGraphics(e,o),a=r.width,l=r.height,u=r.pixelDensity();r.loadPixels();for(let t=0;t<l;t+=1)for(let e=0;e<a;e+=1)i(r,e,t,0,0,0,255*Math.random()*n,u);return r.updatePixels(),r}(o,n,l,.05);o.push(),o.scale(u.scaleFactor),o.image(t,0,0),o.pop(),o.loadPixels(),s=o.pixels,o.noFill(),o.strokeWeight(2),o.rectMode(o.CENTER),v()}),o.draw=(()=>{o.pixels=s,o.updatePixels(),o.push(),o.scale(u.scaleFactor),e(c,h),o.pop()}),o.mousePressed=(()=>{v()}),o.keyTyped=(()=>{"p"===o.key&&o.noLoop()})},a)}();