/**
 * Creative Imagery.
 * Website => https://www.fal-works.com/
 * Including module: p5ex (Copyright 2018 FAL, licensed under MIT).
 * @copyright 2018 FAL
 * @author FAL <falworks.contact@gmail.com>
 * @version 0.1.0
 * @license CC-BY-SA-3.0
 */
!function(){"use strict";class t{}class e extends t{get width(){return this.rightPositionX-this.leftPositionX}get height(){return this.bottomPositionY-this.topPositionY}get area(){return this.width*this.height}constructor(t,e,i,s,r=0){super(),this.leftPositionX=t-r,this.topPositionY=e-r,this.rightPositionX=i+r,this.bottomPositionY=s+r}contains(t,e=0){return t.x>=this.leftPositionX-e&&t.x<=this.rightPositionX+e&&t.y>=this.topPositionY-e&&t.y<=this.bottomPositionY+e}constrain(t,e=0){t.x<this.leftPositionX-e?t.x=this.leftPositionX-e:t.x>this.rightPositionX+e&&(t.x=this.rightPositionX+e),t.y<this.topPositionY-e?t.y=this.topPositionY-e:t.y>this.bottomPositionY+e&&(t.y=this.bottomPositionY+e)}}class i{constructor(t,i,s,r){this.p=t,this.canvasElement=t.createCanvas(i.scaledWidth,i.scaledHeight,r),this.canvasElement&&"parent"in this.canvasElement&&this.canvasElement.parent(s),this.region=new e(0,0,0,0),this.nonScaledShortSideLength=i.nonScaledShortSideLength,this.updateSize()}get scaleFactor(){return this._scaleFactor}get nonScaledWidth(){return this._nonScaledWidth}get nonScaledHeight(){return this._nonScaledHeight}get aspectRatio(){return this._aspectRatio}resize(t){this.p.resizeCanvas(t.scaledWidth,t.scaledHeight),this.nonScaledShortSideLength=t.nonScaledShortSideLength,this.updateSize()}updateSize(){const t=this.p;this._scaleFactor=Math.min(t.width,t.height)/this.nonScaledShortSideLength,this._inversedScaleFactor=1/this._scaleFactor,this._nonScaledWidth=t.width/this._scaleFactor,this._nonScaledHeight=t.height/this._scaleFactor,this._aspectRatio=t.width/t.height,this.region.rightPositionX=this._nonScaledWidth,this.region.bottomPositionY=this._nonScaledHeight}scale(){this.p.scale(this._scaleFactor)}cancelScale(){this.p.scale(this._inversedScaleFactor)}getNonScaledValueOf(t){return t/this._scaleFactor}}i.DUMMY_PARAMETERS={scaledWidth:100,scaledHeight:100,nonScaledShortSideLength:100};const s={SQUARE640x640:"SQUARE640x640",RECT640x480:"RECT640x480",FULL:"FULL",CUSTOM:"CUSTOM"};class r{constructor(t,e){this.p=t,this.p5Color=e}stroke(){this.p.currentRenderer.stroke(this.p5Color)}fill(){this.p.currentRenderer.fill(this.p5Color)}}class n{constructor(t){this.p=t}stroke(){this.p.currentRenderer.noStroke()}fill(){this.p.currentRenderer.noFill()}}class a{stroke(){}fill(){}}class o{constructor(t,e,i=256){this.p=t;const s=[];for(let r=0;r<i;r+=1)s.push(t.color(t.red(e),t.green(e),t.blue(e),t.alpha(e)*r/(i-1)));this.colorArray=s,this.maxIndex=i-1}stroke(t){this.p.currentRenderer.stroke(this.getColor(t))}fill(t){this.p.currentRenderer.fill(this.getColor(t))}getColor(t){return this.colorArray[t?Math.floor(this.p.map(t,0,255,0,this.maxIndex)):this.maxIndex]}}function h(t,e,i,s){return t&&void 0!==e?null===e?new n(t):i?new o(t,e,s):new r(t,e):new a}class c{constructor(t,e,i,s,r){this.strokeColor=h(t,e,s,r),this.fillColor=h(t,i,s,r)}applyColor(t){this.strokeColor.stroke(t),this.fillColor.fill(t)}}c.UNDEFINED=new c(void 0,void 0,void 0);const l=()=>{},u=(Math.PI,new p5(t=>{t.setup=(()=>{t.noCanvas()})}));Math.PI,u.createVector(),u.createVector();function d(t){return Math.floor(Math.random()*t)}function p(t,e){return t+d(e-t)}const g=t=>t>6/29?t*t*t:6/29*3*(6/29)*(t-16/116);const S=[[3.2406255,-1.537208,-.4986286],[-.9689307,1.8757561,.0415175],[.0557101,-.2040211,1.0569959]];class C{constructor(t,e){this.name=t,this.tristimulusValues=e}}let R={D50:new C("D50",[.9642,1,.8251]),D55:new C("D55",[.9568,1,.9214]),D65:new C("D65",[.95047,1,1.08883]),E:new C("E",[1,1,1])}.D50;const m=[0,0,0],f=[0,0,0],E=[0,0,0],y=[0,0,0];function w(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function A(t){return 255*((e=Math.min(Math.max(t,0),1))<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055);var e}function _(t,e,i,s){const r=function(t,e,i){const s=(t[0]+16)/116,r=s+t[1]/500,n=s-t[2]/200;return i?(i[0]=e.tristimulusValues[0]*g(r),i[1]=e.tristimulusValues[1]*g(s),i[2]=e.tristimulusValues[2]*g(n),i):[e.tristimulusValues[0]*g(r),e.tristimulusValues[1]*g(s),e.tristimulusValues[2]*g(n)]}(w(m,t,e,i),R,f),n=function(t,e,i){const s=t.length,r=t[0].length,n=i||new Array(s);for(let a=0;a<s;a+=1){n[a]=0;for(let i=0;i<r;i+=1)n[a]+=t[a][i]*e[i]}return n}(S,r,E),a=w(y,A(n[0]),A(n[1]),A(n[2]));return s?[a[0],a[1],a[2],s]:[a[0],a[1],a[2]]}function L(t,e,i,s){return _(t,e*Math.cos(i),e*Math.sin(i),s)}class v{constructor(t=256){this.array=new Array(t),this.length=0}get(t){return this.array[t]}getLast(){return this.array[this.length-1]}push(t){return this.array[this.length]=t,this.length+=1,this.length}pushRawArray(t,e=t.length){for(let i=0;i<e;i+=1)this.array[this.length+i]=t[i];return this.length+=e,this.length}pushAll(t){return this.pushRawArray(t.array,t.length)}pop(){return this.length-=1,this.array[this.length]}clear(){this.length=0}loop(t){!function(t,e,i){let s=0;for(;s<i;)e(t[s],s,t),s+=1}(this.array,t,this.length)}loopBackwards(t){!function(t,e,i){for(;i--;)e(t[i],i,t)}(this.array,t,this.length)}roundRobin(t){!function(t,e,i){for(let s=0,r=i-1;s<r;s+=1)for(let n=s+1;n<i;n+=1)e(t[s],t[n])}(this.array,t,this.length)}nestedLoopJoin(t,e){!function(t,e,i,s,r){for(let n=0;n<s;n+=1)for(let s=0;s<r;s+=1)i(t[n],e[s])}(this.array,t.array,e,this.length,t.length)}}class b extends v{static drawFunction(t){t.draw()}draw(){this.loop(b.drawFunction)}}class P extends v{static stepFunction(t){t.step()}step(){this.loop(P.stepFunction)}}class T extends v{}T.prototype.step=P.prototype.step,T.prototype.draw=b.prototype.draw;class x extends v{constructor(t){super(t),this.recentRemovedElements=new v(t)}clean(){this.recentRemovedElements.clear();let t=0;for(let e=0;e<this.length;e+=1)this.array[e].clean(),this.array[e].isToBeRemoved?this.recentRemovedElements.push(this.array[e]):(this.array[t]=this.array[e],t+=1);this.length=t}}class F extends x{}F.prototype.draw=T.prototype.draw,F.prototype.step=T.prototype.step;u.createVector(),u.createVector(),u.createVector();class I{constructor(){this.count=0}resetCount(t=0){return this.count=t,this}step(){this.count+=1}mod(t){return this.count%t}}class z extends I{get isOn(){return this._isOn}constructor(t,e=l){super(),this._isOn=!0,this.completeBehavior=e,this.durationFrameCount=t}on(t){return this._isOn=!0,t&&(this.durationFrameCount=t),this}off(){return this._isOn=!1,this}step(){this._isOn&&(this.count+=1,this.count>this.durationFrameCount&&this.completeCycle())}}class M extends z{get isCompleted(){return this._isCompleted}constructor(t,e){super(t,e),this._isCompleted=!1}on(t){return super.on(t),this}off(){return super.off(),this}resetCount(){return super.resetCount(),this._isCompleted=!1,this}getProgressRatio(){return this._isCompleted?1:this.count/this.durationFrameCount}completeCycle(){this._isCompleted=!0,this._isOn=!1,this.completeBehavior()}}var H,k;(k=H||(H={}))[k.CIRCLE=0]="CIRCLE",k[k.HALF_CIRCLE=1]="HALF_CIRCLE",k[k.SQUARE=2]="SQUARE",k[k.TRIANGLE=3]="TRIANGLE",k[k.RECTANGLE=4]="RECTANGLE",k[k.L_SHAPE=5]="L_SHAPE",k[k.CROSS=6]="CROSS",k[k.RING=7]="RING",k[k.ARC=8]="ARC";class N{constructor(t,e,i){switch(this.p=t,this.position=e,this.color=i,this.isToBeRemoved=!1,this.beginDeath=!1,this.beginBirth=(()=>{this.birthTimer.on()}),this.die=(()=>{this.isToBeRemoved=!0}),this.currentSize=0,this.currentAngle=0,this.shapeType=t.random(N.typeList),this.birthDelayTimer=new M(10,this.beginBirth).on(),this.birthTimer=new M(30).off(),this.deathTimer=new M(30,this.die).off(),this.size=t.random(20,50),this.rotationAngle=d(8)*t.QUARTER_PI,this.rotationAngleFactor=Math.random()<.5?-1:1,this.shapeType){case H.CIRCLE:case H.HALF_CIRCLE:case H.SQUARE:case H.TRIANGLE:case H.RECTANGLE:this.shapeColor=new c(t,i,t.color(t.red(i),t.green(i),t.blue(i),128));break;case H.L_SHAPE:case H.CROSS:case H.RING:case H.ARC:this.shapeColor=new c(t,i,null)}}step(){let t;this.birthDelayTimer.step(),this.birthTimer.step(),this.deathTimer.step(),this.birthTimer.isOn?t=function(t){return Math.pow(t-1,3)+1}(this.birthTimer.getProgressRatio()):this.deathTimer.isOn?t=1-function(t){return 1-Math.pow(t-1,2)}(this.deathTimer.getProgressRatio()):(this.beginDeath&&this.deathTimer.on(),t=1),this.currentSize=this.size*t,this.currentAngle=this.rotationAngle+this.rotationAngleFactor*Math.PI*t}clean(){}draw(){if(this.birthDelayTimer.isOn)return;const t=this.p;switch(t.push(),t.translate(this.position.x,this.position.y),t.rotate(this.currentAngle),this.shapeColor.applyColor(),this.shapeType){case H.CIRCLE:case H.RING:t.ellipse(0,0,this.currentSize,this.currentSize);break;case H.HALF_CIRCLE:t.arc(0,0,this.currentSize,this.currentSize,0,t.PI,t.CHORD);break;case H.SQUARE:t.rect(0,0,this.currentSize,this.currentSize);break;case H.TRIANGLE:t.triangle(0,.8*this.currentSize,.3*-this.currentSize,.4*-this.currentSize,.3*this.currentSize,.4*-this.currentSize);break;case H.RECTANGLE:t.rect(0,0,2*this.currentSize,this.currentSize/2);break;case H.L_SHAPE:t.line(0,0,0,.8*-this.currentSize),t.line(0,0,.6*this.currentSize,0);break;case H.CROSS:t.line(.5*-this.currentSize,0,.5*this.currentSize,0),t.line(0,.5*-this.currentSize,0,.5*this.currentSize);break;case H.ARC:t.arc(0,0,this.currentSize,this.currentSize,0,t.PI,t.OPEN)}t.pop()}}N.typeList=[H.CIRCLE,H.HALF_CIRCLE,H.SQUARE,H.TRIANGLE,H.RECTANGLE,H.L_SHAPE,H.CROSS,H.RING,H.ARC];var O;new class extends p5{setCurrentRenderer(t){this.currentRenderer=t}get nonScaledWidth(){return this.scalableCanvas.nonScaledWidth}get nonScaledHeight(){return this.scalableCanvas.nonScaledHeight}get idealFrameRate(){return this._idealFrameRate}get unitAngleSpeed(){return this._unitAngleSpeed}get unitSpeed(){return this._unitSpeed}get unitAccelerationMagnitude(){return this._unitAccelerationMagnitude}constructor(t,e,i){super(t,"string"==typeof e?document.getElementById(e)||void 0:e,i),this.node=e&&"boolean"!=typeof e?"string"==typeof e?document.getElementById(e)||document.body:e:document.body,this.currentRenderer=this,this.maxCanvasRegion={width:0,height:0,getShortSideLength(){return Math.min(this.width,this.height)}},this.updateMaxCanvasRegion(),this.setFrameRate()}setFrameRate(t=60){return this.frameRate(t),t&&(this._idealFrameRate=t,this._unitAngleSpeed=2*Math.PI/this._idealFrameRate,this._unitSpeed=1/this._idealFrameRate,this._unitAccelerationMagnitude=this._unitSpeed/this._idealFrameRate),this}updateMaxCanvasRegion(){if(this.maxCanvasRegion.width=this.windowWidth,this.maxCanvasRegion.height=this.windowHeight,this.node===document.body)return;const t=this.node.getBoundingClientRect();this.maxCanvasRegion.width=t.width,this.maxCanvasRegion.height=t.height}createScalableCanvas(t,e,s){this.scalableCanvasType=t,this.scalableCanvas=new i(this,this.createScalableCanvasParameter(t,e),this.node,s)}resizeScalableCanvas(t,e){this.scalableCanvas.resize(this.createScalableCanvasParameter(t||this.scalableCanvasType,e))}createScalableCanvasParameter(t,e){this.updateMaxCanvasRegion();const r=this.maxCanvasRegion.getShortSideLength();switch(t){case s.SQUARE640x640:return{scaledWidth:r,scaledHeight:r,nonScaledShortSideLength:640};case s.RECT640x480:return{scaledWidth:r,scaledHeight:.75*r,nonScaledShortSideLength:480};case s.FULL:return{scaledWidth:this.maxCanvasRegion.width,scaledHeight:this.maxCanvasRegion.height,nonScaledShortSideLength:640};default:return e||i.DUMMY_PARAMETERS}}}(t=>{let e,i,r;function n(){i.loop(t=>{t.beginDeath=!0});const e=t.nonScaledWidth/4;for(let s=1;s<4;s+=1)for(let n=1;n<4;n+=1)for(let a=0;a<3;a+=1){const a=t.createVector(e*s+10*p(-3,4),e*n+10*p(-3,4));i.push(new N(t,a,t.random(r)))}}t.preload=(()=>{}),t.setup=(()=>{t.createScalableCanvas(s.SQUARE640x640),t.rectMode(t.CENTER),t.strokeWeight(2),i=new F,e=t.color(252),r=[t.color(L(50,90,t.radians(-90))),t.color(L(50,90,t.radians(60))),t.color(L(80,90,t.radians(90)))],n()}),t.draw=(()=>{t.background(e),t.scalableCanvas.scale(),i.step(),i.clean(),i.draw(),t.scalableCanvas.cancelScale()}),t.windowResized=(()=>{}),t.mousePressed=(()=>{(t=t).mouseX<0||t.mouseX>t.width||t.mouseY<0||t.mouseY>t.height||n()}),t.keyTyped=(()=>{t.keyCode===t.ENTER&&t.noLoop()})},"CreativeImagery")}();