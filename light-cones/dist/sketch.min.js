/**
 * LightCones.
 * Source code in TypeScript: https://github.com/fal-works/p5js-sketches/tree/master/light-cones
 *
 * Bundled libraries:
 *   @fal-works/creative-coding-core (MIT license)
 *   @fal-works/p5-extension (MIT license)
 *
 * @copyright 2020 FAL
 * @version 0.1.0
 */
!function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;
/**
   * creative-coding-core
   *
   * Utility library that might be useful for creative coding.
   * GitHub repository: {@link https://github.com/fal-works/creative-coding-core}
   *
   * @module creative-coding-core
   * @copyright 2019-2020 FAL
   * @author FAL <contact@fal-works.com>
   * @license MIT
   * @version 0.7.2
   */
const t=(e,t,r,o)=>{for(let n=r;n<o;n+=1)t(e[n],n,e)},r=(e,r)=>t(e,r,0,e.length),o=(e,t,r,o)=>{let n=o;for(;n>r;)--n,t(e[n],n,e)},n=(e,t)=>o(e,t,0,e.length),a=(e,t,r,o,n,a,s)=>{for(let i=o;i<n;i+=1)for(let o=a;o<s;o+=1)r(e[i],t[o])},s=(e,t,r)=>a(e,t,r,0,e.length,0,t.length),i=(e,t,r,o)=>{const n=o-1;for(let a=r;a<n;a+=1)for(let r=a+1;r<o;r+=1)t(e[a],e[r])},c=(e,t)=>i(e,t,0,e.length),l=e=>e?Array.isArray(e)?e.slice():[e]:[],u=e=>[].concat(...e),d=(e,t=1)=>t>0?e.reduce((e,r)=>e.concat(Array.isArray(r)?d(r,t-1):r),[]):e,y=(e,t,r)=>{const o=r||e.length;for(let r=0;r<o;r+=1)e[r]=t(r);return e},p=(e,t)=>y(new Array(t),e),g=e=>{const t=new Array(e);for(let r=0;r<e;r+=1)t[r]=r;return t},h=e=>{const{start:t,end:r}=e,o=r-t,n=new Array(o);for(let e=0;e<o;e+=1)n[e]=t+e;return n},f=(e,t)=>{const r=[],o=e.length;for(let n=0;n<o;n+=1){const o=t(e[n],n,e);void 0!==o&&r.push(o)}return r},m=e=>{const t=e.length;for(let r=0;r<t;r+=1)e[r]()},x=(e,t)=>{const r=e.length;for(let o=0;o<r;o+=1)e[o](t)},_=(e,t,r,o,n)=>{let a=n;for(;a;)a-=1,e[r+a]=t[o+a]},b=Object.freeze({__proto__:null,loopArrayRange:t,loopArray:r,loopArrayRangeBackwards:o,loopArrayBackwards:n,arrayNestedLoopJoinWithRange:a,arrayNestedLoopJoin:s,arrayRoundRobinWithRange:i,arrayRoundRobin:c,unifyToArray:l,flatArrayNaive:u,flatArrayRecursive:d,populateArray:y,createPopulatedArray:p,createIntegerSequence:g,arrayFromRange:h,filterMapArray:f,loopRunArray:m,loopRunArrayWithArgument:x,blitArray:_}),v=Object.freeze({__proto__:null,FullName:b,loopRange:t,loop:r,loopRangeBackwards:o,loopBackwards:n,nestedLoopJoinWithRange:a,nestedLoopJoin:s,roundRobinWithRange:i,roundRobin:c,unifyToArray:l,flatNaive:u,flatRecursive:d,populate:y,createPopulated:p,createIntegerSequence:g,fromRange:h,filterMap:f,loopRun:m,loopRunWithArgument:x,blit:_}),O=e=>({array:new Array(e),size:0}),R=(e,t)=>({array:new Array(e).fill(t),size:e}),S=(e,t)=>({array:y(new Array(e),t),size:e}),w=e=>({array:e,size:e.length}),z=(e,t)=>{e.array[e.size]=t,e.size+=1},A=z,C=e=>{const t=e.size-1,r=e.array[t];return e.size=t,r},E=(e,t)=>e.array[t],P=e=>e.array[e.size-1],I=P,T=(e,t)=>{const{array:r,size:o}=e,n=t.length;let a=n;for(;a;)a-=1,r[o+a]=t[a];e.size+=n},L=(e,t)=>{const{array:r,size:o}=e,{array:n,size:a}=t;let s=a;for(;s;)s-=1,r[o+s]=n[s];e.size+=a},F=e=>{e.size=0},k=e=>{const{array:t,size:r}=e,o=t.length;t.length=r,t.length=o},V=e=>{e.size=0,k(e)},j=(e,r)=>t(e.array,r,0,e.size),M=(e,t)=>o(e.array,t,0,e.size),N=(e,t)=>{const{array:r,size:o}=e;for(let e=0;e<o;e+=1)if(t(r[e],e,r))return r[e]},B=(e,t)=>{const{array:r,size:o}=e;for(let e=0;e<o;e+=1)if(r[e]===t)return e;return-1},D=(e,t)=>{const{array:r,size:o}=e,n=r[t];return r.copyWithin(t,t+1,o),e.size=o-1,n},q=(e,t)=>{const r=B(e,t);return r>=0?D(e,r):null},Q=(e,t)=>{const r=e.array,o=r[t],n=e.size-1;return r[t]=r[n],e.size=n,o},H=(e,t)=>{const r=B(e,t);return r>=0?Q(e,r):null},W=(e,t)=>{const{array:r,size:o}=e;let n=0,a=!1;for(let e=0;e<o;e+=1){const o=r[e];t(o,e,r)?a=!0:(r[n]=o,n+=1)}return e.size=n,a},U=(e,t)=>{let r=!1;const o=e.array;for(let n=0;n<e.size;n+=1)t(o[n],n,o)&&(Q(e,n),r=!0);return r},G=(e,t)=>(y(e.array,t),e.size=e.array.length,e),Z=(e,t,r)=>a(e.array,t.array,r,0,e.size,0,t.size),J=(e,t)=>i(e.array,t,0,e.size),K=Object.freeze({__proto__:null,createArrayList:O,createFilledArrayList:R,createPopulatedArrayList:S,arrayListFromArray:w,addToArrayList:z,pushToArrayList:A,popFromArrayList:C,getFromArrayList:E,peekFromArrayList:P,getLastFromArrayList:I,addArrayToArrayList:T,addListToArrayList:L,clearArrayList:F,cleanUnusedSlotsOfArrayList:k,clearReferenceOfArrayList:V,loopArrayList:j,loopArrayListBackwards:M,findInArrayList:N,findIndexInArrayList:B,removeShiftFromArrayList:D,removeShiftElementFromArrayList:q,removeSwapFromArrayList:Q,removeSwapElementFromArrayList:H,removeShiftAllFromArrayList:W,removeSwapAllFromArrayList:U,populateArrayList:G,arrayListNestedLoopJoin:Z,arrayListRoundRobin:J}),X=Object.freeze({__proto__:null,FullName:K,create:O,createFilled:R,createPopulated:S,fromArray:w,add:z,push:A,pop:C,get:E,peek:P,getLast:I,addArray:T,addList:L,clear:F,cleanUnusedSlots:k,clearReference:V,loop:j,loopBackwards:M,find:N,findIndex:B,removeShift:D,removeShiftElement:q,removeSwap:Q,removeSwapElement:H,removeShiftAll:W,removeSwapAll:U,populate:G,nestedLoopJoin:Z,roundRobin:J}),Y=e=>({array:new Array(e),headIndex:0,tailIndex:0,size:0}),$=e=>0===e.size,ee=e=>e.size===e.array.length,te=(e,t)=>{const{array:r,tailIndex:o}=e;r[o]=t;const n=o+1;e.tailIndex=n<r.length?n:0,e.size+=1},re=(e,t)=>{ee(e)||te(e,t)},oe=e=>{const{array:t,headIndex:r}=e,o=r+1;return e.headIndex=o<t.length?o:0,e.size-=1,t[r]},ne=e=>$(e)?void 0:oe(e),ae=e=>ee(e)?oe(e):void 0,se=e=>e.array[e.headIndex],ie=e=>{const{headIndex:t}=e;return t!==e.tailIndex?e.array[t]:void 0},ce=(e,r)=>{if(0===e.size)return;const{array:o,headIndex:n,tailIndex:a}=e;n<a?t(o,r,n,a):(t(o,r,n,o.length),t(o,r,0,a))},le=(e,t)=>{const{array:r,headIndex:o}=e,n=r[o];if(!t(n))return;const a=o+1;return e.headIndex=a<r.length?a:0,e.size-=1,n},ue=(e,t)=>$(e)?void 0:le(e,t),de=e=>{e.headIndex=0,e.tailIndex=0,e.size=0},ye=e=>{de(e);const{array:t}=e,r=t.length;t.length=0,t.length=r},pe=Object.freeze({__proto__:null,createArrayQueue:Y,arrayQueueIsEmpty:$,arrayQueueIsFull:ee,enqueue:te,enqueueSafe:re,dequeue:oe,dequeueSafe:ne,dequeueIfFull:ae,loopArrayQueue:ce,peekArrayQueue:se,peekArrayQueueSafe:ie,dequeueIf:le,dequeueSafeIf:ue,clearArrayQueue:de,clearArrayQueueReference:ye}),ge=Object.freeze({__proto__:null,FullName:pe,create:Y,isEmpty:$,isFull:ee,enqueue:te,enqueueSafe:re,dequeue:oe,dequeueSafe:ne,dequeueIfFull:ae,peek:se,peekSafe:ie,loop:ce,dequeueIf:le,dequeueSafeIf:ue,clear:de,clearReference:ye}),he=Object.freeze({__proto__:null,create:e=>({value:void 0,factory:e}),get:e=>e.value||(e.value=e.factory()),clear:e=>{e.value=void 0}}),fe=Object.freeze({__proto__:null,from:(e,t)=>{const r={};for(const o of Object.keys(e))r[o]=new Array(t).fill(e[o]);return{data:r,length:t}}}),{abs:me,acos:xe,asin:_e,atan:be,atan2:ve,ceil:Oe,cos:Re,exp:Se,floor:we,log:ze,max:Ae,min:Ce,pow:Ee,round:Pe,sin:Ie,sqrt:Te,tan:Le,clz32:Fe,imul:ke,sign:Ve,log10:je,log2:Me,log1p:Ne,expm1:Be,cosh:De,sinh:qe,tanh:Qe,acosh:He,asinh:We,atanh:Ue,hypot:Ge,trunc:Ze,fround:Je,cbrt:Ke}=Math,Xe=Te,Ye=Fe,$e=ke,et=Ge,tt=Ze,rt=Je,ot=Ke,nt=e=>e*e,at=e=>e*e*e,st=e=>nt(e*e),it=(e,t)=>e<t?e:t,ct=(e,t)=>e>t?e:t,lt=(e,t)=>0!==e||0!==t?ve(e,t):0,ut=(e,t)=>e*e+t*t,dt=(e,t)=>Te(e*e+t*t),yt=(e,t,r)=>e+r*(t-e),pt=(e,t,r)=>e<t?t:e>r?r:e,gt=(e,t,r)=>t>r?(t+r)/2:e<t?t:e>r?r:e,ht=Object.freeze({__proto__:null,abs:me,acos:xe,asin:_e,atan:be,atan2:ve,ceil:Oe,cos:Re,exp:Se,floor:we,log:ze,max:Ae,min:Ce,pow:Ee,round:Pe,sin:Ie,sqrt:Te,tan:Le,clz32:Fe,imul:ke,sign:Ve,log10:je,log2:Me,log1p:Ne,expm1:Be,cosh:De,sinh:qe,tanh:Qe,acosh:He,asinh:We,atanh:Ue,hypot:Ge,trunc:Ze,fround:Je,cbrt:Ke,squareRoot:Xe,leadingZeros32:Ye,multInt:$e,hypotenuse:et,integerPart:tt,floatRound:rt,cubeRoot:ot,square:nt,cube:at,pow4:st,pow5:e=>nt(e*e)*e,squareInt:e=>ke(e,e),cubeInt:e=>ke(ke(e,e),e),equal:(e,t)=>me(e-t)<2220446049250313e-31,min2:it,max2:ct,atan2safe:lt,hypotenuseSquared2D:ut,hypotenuse2D:dt,lerp:yt,clamp:pt,constrain:gt,map:(e,t,r,o,n)=>o+(n-o)*(e-t)/(r-t),createMap:(e,t,r,o)=>{const n=t-e,a=o-r;return t=>r+a*(t-e)/n},inverseLerp:(e,t,r)=>(e-t)/(r-t)}),{E:ft,LN10:mt,LN2:xt,LOG2E:_t,LOG10E:bt}=Math,vt=Math.SQRT2,Ot=Math.SQRT1_2,Rt=Math.sqrt(3),St=Ot,wt=vt,zt=1/Rt,At=2/Rt,Ct=Rt/2,Et=Ot,Pt=Object.freeze({__proto__:null,E:ft,LN10:mt,LN2:xt,LOG2E:_t,LOG10E:bt,ONE_HALF:.5,ONE_THIRD:1/3,TWO_THIRDS:2/3,ONE_QUARTER:.25,TWO_QUARTERS:.5,THREE_QUARTERS:.75,INVERSE30:1/30,INVERSE60:1/60,INVERSE255:1/255,SQUARE_ROOT_TWO:vt,SQUARE_ROOT_ONE_HALF:Ot,SQUARE_ROOT_THREE:Rt,ONE_OVER_SQUARE_ROOT_TWO:St,TWO_OVER_SQUARE_ROOT_TWO:wt,ONE_OVER_SQUARE_ROOT_THREE:zt,TWO_OVER_SQUARE_ROOT_THREE:At,SQUARE_ROOT_THREE_OVER_TWO:Ct,SQUARE_ROOT_TWO_OVER_TWO:Et}),It=Math.PI,Tt=2*It,Lt=It/2,Ft=It/3,kt=It/4,Vt=3*kt,jt=St,Mt=Ct,Nt=Mt,Bt=jt,Dt=Tt/360,qt=360/Tt,Qt=(e,t)=>{const r=t.x-e.x,o=t.y-e.y;return 0!==r||0!==o?ve(o,r):0},Ht=Object.freeze({__proto__:null,PI:It,TWO_PI:Tt,HALF_PI:Lt,THIRD_PI:Ft,QUARTER_PI:kt,THREE_QUARTERS_PI:Vt,SIN30:.5,SIN45:jt,SIN60:Mt,COS30:Nt,COS45:Bt,COS60:.5,DEGREES_TO_RADIANS:Dt,RADIANS_TO_DEGREES:qt,createArray:e=>{const t=new Array(e),r=Tt/e;for(let o=0;o<e;o+=1)t[o]=o*r;return t},fromDegrees:e=>Dt*e,toDegrees:e=>qt*e,fromOrigin:e=>{const{x:t,y:r}=e;return 0!==t||0!==r?ve(e.y,e.x):0},betweenPoints:Qt,betweenCoordinates:(e,t,r,o)=>e!==r||t!==o?ve(r-e,o-t):0}),Wt=(e,t)=>({x:e,y:t}),Ut={x:0,y:0},Gt=e=>0===e.x&&0===e.y,Zt=(e,t)=>({x:e*Re(t),y:e*Ie(t)}),Jt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Kt=(e,t,r)=>({x:e.x+t,y:e.y+r}),Xt=(e,t,r)=>({x:e.x+t*Re(r),y:e.y+t*Ie(r)}),Yt=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),$t=(e,t,r)=>({x:e.x-t,y:e.y-r}),er=(e,t,r)=>({x:e.x-t*Re(r),y:e.y-t*Ie(r)}),tr=(e,t)=>({x:e.x*t,y:e.y*t}),rr=(e,t)=>({x:e.x/t,y:e.y/t}),or=(e,t)=>ut(t.x-e.x,t.y-e.y),nr=(e,t)=>dt(t.x-e.x,t.y-e.y),ar=e=>`{x:${e.x},y:${e.y}}`,sr=e=>({x:e.x,y:e.y}),ir=e=>ut(e.x,e.y),cr=e=>dt(e.x,e.y),lr=e=>{const{x:t,y:r}=e;return 0!==t||0!==r?ve(e.y,e.x):0},ur=()=>({x:0,y:0}),dr=(e,t)=>(e.x+=t.x,e.y+=t.y,e),yr=(e,t,r)=>(e.x+=t,e.y+=r,e),pr=(e,t,r)=>(e.x+=t*Re(r),e.y+=t*Ie(r),e),gr=(e,t)=>(e.x-=t.x,e.y-=t.y,e),hr=(e,t,r)=>(e.x-=t,e.y-=r,e),fr=(e,t,r)=>(e.x-=t*Re(r),e.y-=t*Ie(r),e),mr=(e,t)=>(e.x=t.x,e.y=t.y,e),xr=(e,t,r)=>(e.x=t,e.y=r,e),_r=(e,t,r)=>(e.x=t*Re(r),e.y=t*Ie(r),e),br=(e,t)=>(e.x*=t,e.y*=t,e),vr=(e,t)=>{const r=1/t;return e.x*=r,e.y*=r,e},Or=(e,t,r,o,n)=>(e.x=pt(e.x,t,r),e.y=pt(e.y,o,n),e),Rr=(e,t,r,o,n)=>(e.x=gt(e.x,t,r),e.y=gt(e.y,o,n),e),Sr=(e,t,r)=>{if(or(e,t)>=r*r)return e;const o=Qt(t,e);return e.x=t.x+r*Re(o),e.y=t.y+r*Ie(o),e},wr=(e,t,r,o)=>{if(or(e,t)>=r*r)return;const n=Qt(e,t),a=yt(e.x,t.x,o),s=yt(e.y,t.y,o),i=r/2,c=i*Re(n),l=i*Ie(n);t.x=a+c,t.y=s+l,e.x=a-c,e.y=s-l},zr=Object.freeze({__proto__:null,create:ur,add:dr,addCartesian:yr,addPolar:pr,subtract:gr,subtractCartesian:hr,subtractPolar:fr,set:mr,setCartesian:xr,setPolar:_r,multiply:br,divide:vr,clamp:Or,constrain:Rr,separate:Sr,separateEachOther:wr}),Ar=(e,t,r)=>(r.x=e.x+t.x,r.y=e.y+t.y,r),Cr=(e,t,r,o)=>(o.x=e.x+t,o.y=e.y+r,o),Er=(e,t,r,o)=>(o.x=e.x+t*Re(r),o.y=e.y+t*Ie(r),o),Pr=(e,t,r)=>(r.x=e.x-t.x,r.y=e.y-t.y,r),Ir=(e,t,r,o)=>(o.x=e.x-t,o.y=e.y-r,o),Tr=(e,t,r,o)=>(o.x=e.x-t*Re(r),o.y=e.y-t*Ie(r),o),Lr=(e,t,r)=>(r.x=e,r.y=t,r),Fr=(e,t,r)=>(r.x=e.x*t,r.y=e.y*t,r),kr=(e,t,r)=>{const o=1/t;return r.x=e.x*o,r.y=e.y*o,r},Vr=(e,t,r,o,n,a)=>(a.x=pt(e.x,t,r),a.y=pt(e.y,o,n),a),jr=(e,t,r,o,n,a)=>(a.x=gt(e.x,t,r),a.y=gt(e.y,o,n),a),Mr=(e,t,r)=>{const o=t.x-e.x,n=t.y-e.y,a=dt(o,n);return r.x=o/a,r.y=n/a,r},Nr=Object.freeze({__proto__:null,add:Ar,addCartesian:Cr,addPolar:Er,subtract:Pr,subtractCartesian:Ir,subtractPolar:Tr,setCartesian:Lr,setPolar:(e,t,r)=>(r.x=e*Re(t),r.y=e*Ie(t),r),multiply:Fr,divide:kr,clamp:Vr,constrain:jr,normalize:(e,t)=>{const{x:r,y:o}=e,n=dt(r,o);return t.x=r/n,t.y=o/n,t},normalizeBetween:Mr}),Br=Object.freeze({__proto__:null,createVector:Wt,zeroVector:Ut,vectorIsZero:Gt,vectorFromPolar:Zt,addVector:Jt,addCartesian:Kt,addPolar:Xt,subtractVector:Yt,subtractCartesian:$t,subtractPolar:er,multiplyVector:tr,divideVector:rr,distanceOfVectorsSquared:or,distanceOfVectors:nr,vectorToStr:ar,copyVector:sr,vectorLengthSquared:ir,vectorLength:cr,vectorAngle:lr,createVectorMutable:ur,addVectorMutable:dr,addCartesianMutable:yr,addPolarMutable:pr,subtractVectorMutable:gr,subtractCartesianMutable:hr,subtractPolarMutable:fr,setVector:mr,setCartesian:xr,setPolar:_r,multiplyVectorMutable:br,divideVectorMutable:vr,clampVector:Or,constrainVector:Rr,separateVector:Sr,separateVectors:wr,addVectorAssign:Ar,addCartesianAssign:Cr,addPolarAssign:Er,subtractVectorAssign:Pr,subtractCartesianAssign:Ir,subtractPolarAssign:Tr,multiplyVectorAssign:Fr,divideVectorAssign:kr,clampVectorAssign:Vr,constrainVectorAssign:jr}),Dr=Object.freeze({__proto__:null,Mutable:zr,Assign:Nr,FullName:Br,create:Wt,zero:Ut,isZero:Gt,fromPolar:Zt,add:Jt,addCartesian:Kt,addPolar:Xt,subtract:Yt,subtractCartesian:$t,subtractPolar:er,multiply:tr,divide:rr,distanceSquared:or,distance:nr,toStr:ar,copy:sr,lengthSquared:ir,length:cr,angle:lr,dot:(e,t)=>e.x*t.x+e.y*t.y,normalize:e=>{const{x:t,y:r}=e,o=dt(t,r);return{x:t/o,y:r/o}},normalizeBetween:(e,t)=>{const r=t.x-e.x,o=t.y-e.y,n=dt(r,o);return{x:r/n,y:o/n}}}),qr=e=>{const{topLeft:t,bottomRight:r}=e;return{width:r.x-t.x,height:r.y-t.y}},Qr=e=>{const{topLeft:t,bottomRight:r}=e;return{x:(t.x+r.x)/2,y:(t.y+r.y)/2}},Hr=Object.freeze({__proto__:null,create:(e,t)=>({topLeft:e,bottomRight:{x:e.x+t.width,y:e.y+t.height}}),createFromCenter:(e,t)=>{const{x:r,y:o}=e,n=t.width/2,a=t.height/2;return{topLeft:{x:r-n,y:o-a},bottomRight:{x:r+n,y:o+a}}},containsPoint:(e,t,r)=>{const{topLeft:o,bottomRight:n}=e,{x:a,y:s}=t;return a>=o.x+r&&s>=o.y+r&&a<n.x-r&&s<n.y-r},getWidth:e=>e.bottomRight.x-e.topLeft.x,getHeight:e=>e.bottomRight.y-e.topLeft.y,getSize:qr,getCenterPoint:Qr,createScaled:(e,t,r)=>{const{topLeft:o,bottomRight:n}=e;switch(r){case 0:return{topLeft:o,bottomRight:{x:yt(o.x,n.x,t),y:yt(o.y,n.y,t)}};case 1:{const r=Qr(e),o=qr(e),n=t*(o.width/2),a=t*(o.height/2);return{topLeft:{x:r.x-n,y:r.y-a},bottomRight:{x:r.x+n,y:r.y+a}}}}},copy:e=>({topLeft:sr(e.topLeft),bottomRight:sr(e.bottomRight)}),createInfinite:()=>({topLeft:{x:-1/0,y:-1/0},bottomRight:{x:1/0,y:1/0}}),addMargin:(e,t)=>{const{topLeft:r,bottomRight:o}=e;return{topLeft:{x:r.x-t,y:r.y-t},bottomRight:{x:o.x+t,y:o.y+t}}},addMargins:(e,t)=>{const{topLeft:r,bottomRight:o}=e;return{topLeft:{x:r.x-t.left,y:r.y-t.top},bottomRight:{x:o.x+t.right,y:o.y+t.bottom}}}}),Wr=Object.freeze({__proto__:null,getAspectRatio:e=>e.width/e.height,getArea:e=>e.width*e.height,createInfinite:()=>({width:1/0,height:1/0})}),Ur=Object.freeze({__proto__:null,createCurve:e=>{const t=[],r=e.length;let o=e[0],n=o.controlLine;for(let a=1;a<r;a+=1){const r=e[a],s=r.controlLine;t.push({controlPoint1:Xt(o.point,.5*n.length,n.angle),controlPoint2:er(r.point,.5*s.length,s.angle),targetPoint:r.point}),o=r,n=s}return{startPoint:e[0].point,paths:t}}}),Gr=Object.freeze({__proto__:null,distanceSquared:(e,t,r,o)=>ut(r-e,o-t),distance:(e,t,r,o)=>dt(r-e,o-t)}),Zr=nt,Jr=at,Kr=st,Xr=e=>e?Ee(2,10*(e-1)):0,Yr=(e=1.70158)=>t=>t*t*((e+1)*t-e),$r=Object.freeze({__proto__:null,quad:Zr,cubic:Jr,quart:Kr,expo:Xr,createBack:Yr}),eo=e=>1-nt(e-1),to=e=>at(e-1)+1,ro=e=>1-st(e-1),oo=e=>e<1?1-Ee(2,-10*e):1,no=(e=1.70158)=>t=>{const r=t-1,o=r*r;return(e+1)*(r*o)+e*o+1},ao=Object.freeze({__proto__:null,quad:eo,cubic:to,quart:ro,expo:oo,createBack:no}),so=(e,t,r=.5)=>{const o=1/r;return n=>{if(n<r)return e(o*n);return t((n-r)/(1-r))}},io=(e,t,r=.5)=>{const o=1/r;return n=>{if(n<r)return r*e(o*n);{const e=1-r;return r+e*t((n-r)/e)}}},co=io(Zr,eo),lo=io(Jr,to),uo=io(Kr,ro),yo=io(Xr,oo),po=e=>io(Yr(e),no(e)),go=Object.freeze({__proto__:null,quad:co,cubic:lo,quart:uo,expo:yo,createBack:po}),ho=io(eo,Zr),fo=io(to,Jr),mo=io(ro,Kr),xo=io(oo,Xr),_o=e=>io(no(e),Yr(e)),bo=Object.freeze({__proto__:null,quad:ho,cubic:fo,quart:mo,expo:xo,createBack:_o}),vo=e=>e,Oo=Object.freeze({__proto__:null,easeInQuad:Zr,easeInCubic:Jr,easeInQuart:Kr,easeInExpo:Xr,createEaseInBack:Yr,easeOutQuad:eo,easeOutCubic:to,easeOutQuart:ro,easeOutExpo:oo,createEaseOutBack:no,easeInOutQuad:co,easeInOutCubic:lo,easeInOutQuart:uo,easeInOutExpo:yo,createEaseInOutBack:po,easeOutInQuad:ho,easeOutInCubic:fo,easeOutInQuart:mo,easeOutInExpo:xo,createEaseOutInBack:_o,easeLinear:vo,concatenateEasing:so,integrateEasing:io}),Ro=Object.freeze({__proto__:null,In:$r,Out:ao,InOut:go,OutIn:bo,FullName:Oo,linear:vo,concatenate:so,integrate:io});let So=Math.random,wo=So;const zo=e=>{So=e,wo=e},Ao=e=>So()*e,Co=()=>So()*Tt,Eo=(e,t)=>e+So()*(t-e),Po=e=>Eo(e.start,e.end),Io=e=>So()<e,To=e=>So()<e?1:-1,Lo=e=>(So()<.5?1:-1)*So()*e,Fo=()=>(So()<.5?1:-1)*So()*It,ko=e=>Zt(e,Co()),Vo=e=>{const{topLeft:t,bottomRight:r}=e;return{x:Eo(t.x,r.x),y:Eo(t.y,r.y)}},jo=e=>we(So()*e),Mo=(e,t)=>e+we(So()*(t-e)),No=e=>(So()<.5?1:-1)*we(So()*e),Bo=Object.freeze({__proto__:null,value:jo,between:Mo,signed:No}),Do=e=>we(So()/e)*e,qo=(e,t)=>we(So()*(t/e))*e,Qo=(e,t,r)=>t+we(So()*((r-t)/e))*e,Ho=(e,t)=>(So()<.5?1:-1)*we(So()*(t/e))*e,Wo=e=>we(So()*(Tt/e))*e,Uo=e=>(So()<.5?1:-1)*we(So()*(It/e))*e,Go=Object.freeze({__proto__:null,ratio:Do,value:qo,between:Qo,signed:Ho,angle:Wo,signedAngle:Uo}),Zo=e=>e[jo(e.length)],Jo=e=>e.splice(jo(e.length),1)[0],Ko=Object.freeze({__proto__:null,get:Zo,removeGet:Jo}),Xo=e=>e(So()),Yo=(e,t)=>e(So())*t,$o=(e,t,r)=>t+e(So())*(r-t),en=(e,t)=>$o(e,t.start,t.end),tn=Object.freeze({__proto__:null,ratio:Xo,value:Yo,between:$o,inRange:en,angle:e=>e(So())*Tt,signed:(e,t)=>(So()<.5?1:-1)*e(So())*t,signedAngle:e=>(So()<.5?1:-1)*e(So())*It}),rn=Object.freeze({__proto__:null,setBaseRandomFunction:zo,get randomRatio(){return wo},randomValue:Ao,randomAngle:Co,randomBetween:Eo,randomInRange:Po,randomBool:Io,randomSign:To,randomSigned:Lo,randomSignedAngle:Fo,randomInteger:jo,randomIntegerBetween:Mo,randomIntegerSigned:No,randomDiscreteRatio:Do,randomDiscreteValue:qo,randomDiscreteAngle:Wo,randomDiscreteBetween:Qo,randomDiscreteSigned:Ho,randomDiscreteSignedAngle:Uo,randomFromArray:Zo,randomRemoveFromArray:Jo,randomRatioCurved:Xo,randomValueCurved:Yo,randomBetweenCurved:$o,randomInRangeCurved:en,randomVector:ko,randomPointInRectangleRegin:Vo}),on=Object.freeze({__proto__:null,Integer:Bo,Discrete:Go,Arrays:Ko,Curved:tn,FullName:rn,get random(){return So},get ratio(){return wo},setBaseFunction:zo,value:Ao,angle:Co,between:Eo,inRange:Po,bool:Io,sign:To,signed:Lo,signedAngle:Fo,vector:ko,pointInRectangleRegion:Vo}),nn=Object.freeze({__proto__:null,calculateScaleFactor:(e,t,r)=>{switch(r){default:case"FIT_TO_BOX":return it(t.width/e.width,t.height/e.height);case"FIT_WIDTH":return t.width/e.width;case"FIT_HEIGHT":return t.height/e.height}}}),an=Object.freeze({__proto__:null,getElementOrBody:e=>document.getElementById(e)||document.body,getElementSize:e=>e===document.body?{width:window.innerWidth,height:window.innerHeight}:e.getBoundingClientRect()}),sn=()=>{},cn=Object.freeze({__proto__:null,returnVoid:sn,returnUndefined:()=>{},returnNull:()=>null,returnZero:()=>0,returnOne:()=>1,returnTrue:()=>!0,returnFalse:()=>!1,returnArgument:e=>e,runSelf:e=>e()});let ln=sn;let un=0;const dn=e=>e.step(),yn=e=>e.reset();class pn{constructor(e,t){this.id=un++,this.name="no name",this.onStart=e,this.onComplete=t,this.isStarted=!1,this.isCompleted=!1,ln("timer ",this.id,": created.")}tryStart(){if(this.isStarted)return!1;const{id:e,name:t}=this;return ln("timer ",e,t,": starting..."),x(this.onStart,e),ln("timer ",e,t,": started."),this.isStarted=!0}complete(){const{id:e,name:t}=this;return ln("timer ",e,t,": completing..."),x(this.onComplete,e),ln("timer ",e,t,": completed."),this.isCompleted=!0}setName(e){return this.name=e,this}}const gn=Object.freeze({__proto__:null,step:dn,reset:yn,Base:pn}),hn=e=>({duration:e,ratioChangeRate:1/ct(1,e),count:0,ratio:0});class fn extends pn{constructor(e,t,r,o){super(e,r),this.onProgress=t,this.progress=o}static create(e,t,r,o){return new fn(e,t,r,o)}step(){if(this.isCompleted)return!0;this.tryStart();const{progress:e}=this;return e.count>=e.duration?(e.ratio=1,x(this.onProgress,e),this.complete()):(x(this.onProgress,e),(e=>{e.count+=1,e.ratio+=e.ratioChangeRate})(e),!1)}reset(){var e;return(e=this.progress).count=0,e.ratio=0,this.isStarted=!1,this.isCompleted=!1,this}setName(e){return super.setName(e),this}}const mn=e=>fn.create(l(e.onStart),l(e.onProgress),l(e.onComplete),hn(e.duration)),xn=fn.create([],[],[],hn(0));xn.isStarted=!0,xn.isCompleted=!0;const _n=(e,t)=>{e.index=t,e.currentComponent=e.components[t]};class bn extends pn{constructor(e){super([],[]),this.components=e.slice(),this.index=0,this.currentComponent=e[0]}static create(e){return new bn(e)}step(){return this.tryStart(),!!this.currentComponent.step()&&(e=>{const t=e.index+1;return t<e.components.length?(_n(e,t),!1):e.complete()})(this)}reset(){return r(this.components,yn),_n(this,0),this.isStarted=!1,this.isCompleted=!1,this}pushComponent(e){this.components.push(e)}setName(e){return super.setName(e),this}}const vn=e=>bn.create(e),On=Object.freeze({__proto__:null,Unit:bn,create:vn});class Rn extends pn{constructor(e){super([],[]),this.components=e.slice(),this.runningComponentList=w(e.slice())}static create(e){return new Rn(e)}step(){this.tryStart();const{runningComponentList:e}=this;return W(e,dn),!(e.size>0)&&this.complete()}reset(){const{runningComponentList:e}=this;return F(e),T(e,this.components),j(e,yn),this.isStarted=!1,this.isCompleted=!1,this}setName(e){return super.setName(e),this}addComponent(e){this.components.push(e),z(this.runningComponentList,e)}}const Sn=e=>Rn.create(e),wn=Object.freeze({__proto__:null,Unit:Rn,create:Sn});class zn extends pn{constructor(e,t){super([],[]),this.component=e,this.loopCount=t,this.remainingCount=t}static create(e,t){return new zn(e,t)}step(){return this.tryStart(),!!this.component.step()&&(!!this.isCompleted||((this.remainingCount-=1)>0?(this.component.reset(),!1):this.complete()))}reset(){const{loopCount:e}=this;return this.remainingCount=e,this.component.reset(),this.isStarted=!1,this.isCompleted=!1,this}setName(e){return super.setName(e),this}}const An=(e,t=1/0)=>zn.create(e,t),Cn=Object.freeze({__proto__:null,Unit:zn,create:An}),En=e=>({runningComponents:O(e),newComponentsBuffer:O(e)}),Pn=(e,t)=>z(e.newComponentsBuffer,t),In=e=>{const{runningComponents:t,newComponentsBuffer:r}=e;L(t,r),F(r),W(t,dn)},Tn=e=>{F(e.runningComponents),F(e.newComponentsBuffer)},Ln=Object.freeze({__proto__:null,create:En,add:Pn,step:In,clear:Tn,construct:e=>{const t=En(e);return{add:Pn.bind(void 0,t),step:In.bind(void 0,t),clear:Tn.bind(void 0,t)}}}),Fn=Object.freeze({__proto__:null,Component:gn,Chain:On,Parallel:wn,Loop:Cn,Set:Ln,chain:vn,parallel:Sn,loop:An,outputVerbose:(e=!0)=>{ln=e?console.info:sn},Unit:fn,create:mn,dummy:xn}),kn=new Map([["A",".-"],["B","-..."],["C","-.-."],["D","-.."],["E","."],["F","..-."],["G","--."],["H","...."],["I",".."],["J",".---"],["K","-.-"],["L",".-.."],["M","--"],["N","-."],["O","---"],["P",".--."],["Q","--.-"],["R",".-."],["S","..."],["T","-"],["U","..-"],["V","...-"],["W",".--"],["X","-..-"],["Y","-.--"],["Z","--.."],["1",".----"],["2","..---"],["3","...--"],["4","....-"],["5","....."],["6","-...."],["7","--..."],["8","---.."],["9","----."],["0","-----"],[".",".-.-.-"],[",","--..--"],[":","---..."],["?","..--.."],["'",".----."],["!","-.-.--"],["-","-....-"],["/","-..-."],["@",".--.-."],["(","-.--."],[")","-.--.-"],['"',".-..-."],["=","-...-"],["+",".-.-."]]),Vn=(e,t,r)=>{let o="";const n=e?"1":"0";for(let e=0;e<t;e+=1)o+=n;return Object.freeze({isOn:e,length:t,codeString:r,binaryString:o})},jn=(e,t)=>Vn(!0,e,t),Mn=(e,t)=>Vn(!1,e,t),Nn=jn(1,"."),Bn=jn(3,"-"),Dn=Mn(1,""),qn=Mn(3," "),Qn=Mn(7," / "),Hn=Mn(0,"");const Wn=Object.freeze({__proto__:null,DIT:Nn,DAH:Bn,INTER_ELEMENT_GAP:Dn,SHORT_GAP:qn,MEDIUM_GAP:Qn,NUL:Hn,encode:function(e){const t=e.toUpperCase(),r=[];let o=void 0;for(let e=0,n=t.length;e<n;e+=1){const n=t.charAt(e);if(" "===n){o=Qn;continue}if(0===n.charCodeAt(0)){o&&r.push(o),o=void 0,r.push(Hn);continue}const a=kn.get(n);if(a){for(let e=0,t=a.length;e<t;e+=1){switch(o&&r.push(o),a.charAt(e)){case".":r.push(Nn);break;case"-":case"_":r.push(Bn);break;default:continue}o=Dn}o=qn}}return r},toString:e=>e.reduce((e,t)=>e+t.codeString,""),toBinaryString:e=>e.reduce((e,t)=>e+t.binaryString,""),getTotalLength:e=>e.reduce((e,t)=>e+t.length,0)});function Un(e){return 1e3/(e/60*50)}const Gn=e=>{e.timeout&&(e.off(Hn),clearTimeout(e.timeout),e.timeout=void 0),e.index=0},Zn=(e,t,r)=>{t.timeout=setTimeout(()=>{t.timeout=void 0,e(t)},r)},Jn=e=>{const t=(e=>{const{unitTime:t,signals:r,index:o,on:n,off:a}=e,s=r[o];return s.isOn?n(s):a(s),t*s.length})(e);e.index+=1,e.index<e.signals.length?Zn(Jn,e,t):(e.timeout=setTimeout(()=>{e.loop?(e.off(Hn),e.timeout=void 0):(e.off(Qn),Zn(Jn,e,Qn.length))},t),e.index=0)},Kn=Object.freeze({__proto__:null,wpmToDotDuration:Un,create:(e,t,r=25,o=[],n=!1)=>({on:e,off:t,wpm:r,unitTime:Un(r),loop:n,signals:o,index:0,timeout:void 0}),stop:Gn,start:(e,t)=>{Gn(e),t&&(e.signals=t),Jn(e)}}),Xn=Object.freeze({__proto__:null,Signal:Wn,Channel:Kn}),Yn=Object.freeze({__proto__:null,create:(e,t,r)=>{const{x:o,y:n}=e,{x:a,y:s}=r.target,i=r.easing||vo;return mn({duration:t,onProgress:t=>{const r=i(t.ratio);xr(e,yt(o,a,r),yt(n,s,r))}})},setCreate:(e,t,r)=>{let o,n,a,s,i;return mn({duration:t,onStart:()=>{const{target:t,easing:c}=r();({x:o,y:n}=e),({x:a,y:s}=t),i=c||vo},onProgress:t=>{const r=i(t.ratio);xr(e,yt(o,a,r),yt(n,s,r))}})}}),$n=Object.freeze({__proto__:null,Vector2D:Yn,create:(e,t,r)=>{const{start:o,end:n}=r,a=r.easing||vo;return mn({duration:t,onProgress:t=>e(yt(o,n,a(t.ratio)))})},setCreate:(e,t,r)=>{let o,n,a;return mn({duration:t,onStart:()=>{const{start:e,end:t,easing:s}=r();o=e,n=t,a=s||vo},onProgress:t=>e(yt(o,n,a(t.ratio)))})}}),ea=Object.freeze({__proto__:null,create:(e,t=1)=>({callback:e,frequency:t,accumulation:0}),run:e=>{for(e.accumulation+=e.frequency;e.accumulation>=1;)e.accumulation-=1,e.callback()},reset:e=>{e.accumulation=0}});let ta=sn,ra=sn,oa=sn;const na=Object.freeze({__proto__:null,get info(){return ta},get warn(){return ra},get error(){return oa},outputInfo:(e=!0)=>{ta=e?console.info:sn},outputWarn:(e=!0)=>{ra=e?console.warn:sn},outputError:(e=!0)=>{oa=e?console.error:sn}}),aa=(e,t,r)=>{e.x+=e.vx,e.y+=e.vy,e.vx+=t,e.vy+=r},sa=(e,t,r)=>{e.vx2=e.vx+.5*t,e.vy2=e.vy+.5*r,e.vx+=t,e.vy+=r,e.x+=e.vx2,e.y+=e.vy2},ia=(e,t,r)=>{e.vx=e.vx2+.5*t,e.vy=e.vy2+.5*r},ca=Object.freeze({__proto__:null,createQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0}),updateEuler:e=>{e.x+=e.vx,e.y+=e.vy},updateEulerAccelerated:aa,updateVerlet:sa,postUpdateVerlet:ia,positionVector:(e,t)=>Lr(e.x,e.y,t),velocityVector:(e,t)=>Lr(e.vx,e.vy,t),getSpeed:e=>dt(e.vx,e.vy),getVelocityAngle:e=>lt(e.vy,e.vx),truncateVelocity:(e,t)=>{const{vx:r,vy:o}=e;if(ut(r,o)<=t*t)return e;const n=ve(o,r);return e.vx=t*Re(n),e.vy=t*Ie(n),e},setVelocity:(e,t)=>(e.vx=t.x,e.vy=t.y,e),setVelocityCartesian:(e,t,r)=>(e.vx=t,e.vy=r,e),setVelocityPolar:(e,t,r)=>(e.vx=t*Re(r),e.vy=t*Ie(r),e),bounceInRectangleRegion:(e,t,r)=>{const{x:o,y:n,vx:a,vy:s}=r,{x:i,y:c}=e.topLeft,{x:l,y:u}=e.bottomRight;return o<i?(r.x=i,a<0&&(r.vx=-t*a),!0):o>=l?(r.x=l-1,a>0&&(r.vx=-t*a),!0):n<c?(r.y=c,s<0&&(r.vy=-t*s),!0):n>=u&&(r.y=u-1,s>0&&(r.vy=-t*s),!0)}}),la=(e,t)=>(e.fx+=t.x,e.fy+=t.y,e),ua=Object.freeze({__proto__:null,createQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0,fx:0,fy:0}),createVerletQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0,vx2:0,vy2:0,fx:0,fy:0}),updateEuler:e=>{aa(e,e.fx,e.fy),e.fx=0,e.fy=0},updateVerlet:e=>{sa(e,e.fx,e.fy),e.fx=0,e.fy=0},postUpdateVerlet:e=>{ia(e,e.fx,e.fy)},forceVector:(e,t)=>Lr(e.fx,e.fy,t),truncateForce:(e,t)=>{const{fx:r,fy:o}=e;if(ut(r,o)<=t*t)return e;const n=ve(o,r);return e.fx=t*Re(n),e.fy=t*Ie(n),e},addForce:la,addForceCartesian:(e,t,r)=>(e.fx+=t,e.fy+=r,e),addForcePolar:(e,t,r)=>(e.fx+=t*Re(r),e.fy+=t*Ie(r),e)}),da=Object.freeze({__proto__:null,createQuantity:(e,t,r,o,n)=>({x:e,y:t,vx:o||0,vy:n||0,fx:0,fy:0,mass:r}),createVerletQuantity:(e,t,r,o,n)=>({x:e,y:t,vx:o||0,vy:n||0,vx2:0,vy2:0,fx:0,fy:0,mass:r}),updateEuler:e=>{const{mass:t}=e;aa(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0},updateVerlet:e=>{const{mass:t}=e;sa(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0},postUpdateVerlet:e=>{const{mass:t}=e;ia(e,e.fx/t,e.fy/t)}});let ya=1,pa=-ya;const ga=(e,t,r,o)=>Fr(e,pa*t/(r*r*r),o),ha=(e,t,r)=>ga(Pr(t,e,r),e.mass*t.mass,nr(e,t),r),fa=(e,t,r)=>Fr(e,pa/(t*t*t),r),ma=(e,t,r)=>fa(Pr(t,e,r),nr(e,t),r),xa=(e,t,r)=>{const{x:o,y:n}=r;e.fx-=o,e.fy-=n,t.fx+=o,t.fy+=n},_a={x:0,y:0},ba={precalculated:(e,t,r,o)=>la(e,ga(t,r,o,_a)),calculate:(e,t)=>la(t,ha(e,t,_a)),precalculatedSimple:(e,t,r)=>la(e,fa(t,r,_a)),calculateSimple:(e,t)=>la(t,ma(e,t,_a))},va={precalculated:(e,t,r,o,n)=>xa(e,t,ga(r,o,n,_a)),calculate:(e,t)=>xa(e,t,ha(e,t,_a)),precalculatedSimple:(e,t,r,o)=>xa(e,t,fa(r,o,_a)),calculateSimple:(e,t)=>xa(e,t,ma(e,t,_a))},Oa=Object.freeze({__proto__:null,get constant(){return ya},setConstant:e=>{ya=e,pa=-ya},calculateCore:ga,calculate:ha,calculateCoreSimple:fa,calculateSimple:ma,attract:ba,attractEachOther:va}),Ra=Object.freeze({__proto__:null,update:e=>{e.rotationAngle+=e.rotationVelocity},createRandomQuantity:(e,t)=>({rotationAngle:Co(),rotationVelocity:Lo(Eo(e,t))})}),Sa=(e,t,r,o,n)=>{const a=-(e*r.x+t*r.y);return Fr(r,(1+o)*a,n),n},wa={x:0,y:0},za={x:0,y:0},Aa={calculate:(e,t,r)=>{const o=t.vx-e.vx,n=t.vy-e.vy;Mr(e,t,za),Sa(o,n,za,r,wa),la(t,wa),br(wa,-1),la(e,wa)},preCalculated:(e,t,r,o,n,a)=>{Sa(r,o,n,a,wa),la(t,wa),br(wa,-1),la(e,wa)}},Ca=Object.freeze({__proto__:null,calculateForce:Sa,withinRectangle:(e,t,r)=>{const{x:o,y:n}=e,{topLeft:{x:a,y:s},bottomRight:{x:i,y:c}}=t;o<a?(e.x=a,e.vx=-r*e.vx):o>=i&&(e.x=i-1,e.vx=-r*e.vx),n<s?(e.y=s,e.vy=-r*e.vy):n>=c&&(e.y=c-1,e.vy=-r*e.vy)},addForce:(e,t,r)=>la(e,Sa(e.vx,e.vy,t,r,wa)),addForceEachOther:Aa,addForceWithinRectangle:(e,t,r)=>{const{x:o,y:n}=e,{topLeft:{x:a,y:s},bottomRight:{x:i,y:c}}=t,l=1+r;o<a?(e.x=a,e.fx-=l*e.vx):o>=i&&(e.x=i-1,e.fx-=l*e.vx),n<s?(e.y=s,e.fy-=l*e.vy):n>=c&&(e.y=c-1,e.fy-=l*e.vy)}}),Ea=Object.freeze({__proto__:null,withRandomHue:(e,t)=>[Ao(360),e,t],toRGB:e=>{const[t,r,o]=e,n=o*r,a=t*(1/60),s=n*(1-me(a%2-1));let i;switch(we(a)){case 0:i=[n,s,0];break;case 1:i=[s,n,0];break;case 2:i=[0,n,s];break;case 3:i=[0,s,n];break;case 4:i=[s,0,n];break;case 5:i=[n,0,s];break;default:i=[0,0,0]}const c=o-n;return[i[0]+c,i[1]+c,i[2]+c]}}),Pa=Object.freeze({__proto__:null,Angle:Ht,ArrayList:X,ArrayQueue:ge,Arrays:v,Bezier:Ur,Bounce:Ca,ConstantFunction:cn,Coordinates2D:Gr,Dynamics:da,Easing:Ro,FitBox:nn,Gravitation:Oa,HSV:Ea,HtmlUtility:an,Kinematics:ca,Lazy:he,Log:na,MathConstants:Pt,MorseCode:Xn,Numeric:ht,Random:on,RectangleRegion:Hr,RectangleSize:Wr,Repeater:ea,Rotation:Ra,SimpleDynamics:ua,StructureOfArrays:fe,Timer:Fn,Tween:$n,Vector2D:Dr}),{RectangleRegion:Ia,FitBox:Ta,Arrays:{FullName:{loopArray:La,unifyToArray:Fa}},ArrayList:ka,Vector2D:Va,Vector2D:{FullName:{vectorFromPolar:ja,copyVector:Ma,zeroVector:Na,constrainVector:Ba,setCartesian:Da}},Coordinates2D:{distance:qa},Numeric:{sin:Qa,cos:Ha,round:Wa,lerp:Ua,inverseLerp:Ga,max2:Za,clamp:Ja},MathConstants:{ONE_OVER_SQUARE_ROOT_TWO:Ka,INVERSE255:Xa},Random:{FullName:{randomValue:Ya,randomSigned:$a}},Angle:es,Angle:{TWO_PI:ts},HSV:rs,ConstantFunction:os,ConstantFunction:{returnVoid:ns},Tween:as,Timer:ss}=Pa;let is,cs,ls;const us=e=>{is=e,ls=is},ds=e=>{cs=e},ys=t=>t instanceof e.Color?Object.create(t):is.color(t),ps=e=>{if(null===e)return()=>ls.noStroke();if(void 0===e)return ns;const t=ys(e);return()=>ls.stroke(t)},gs=e=>{if(null===e)return()=>ls.noFill();if(void 0===e)return ns;const t=ys(e);return()=>ls.fill(t)},hs=(e,t)=>{const r=ys(e);return is.color(is.red(r),is.green(r),is.blue(r),t)},fs=(e,t)=>{const r=new Array(t),o=t-1,n=ys(e);if(1===t)r[0]=n;else{const e=is.alpha(n);for(let a=1;a<t;a+=1){const t=e*(a/o);r[a]=hs(n,t)}}return{colors:r,maxIndex:o}},ms=(e,t)=>e.colors[Wa(e.maxIndex*t*Xa)],xs=Object.freeze({__proto__:null,create:fs,get:ms}),_s=[],bs=(e,t,r,o)=>{if(1===o)return e.stroke=ps(t),e.fill=gs(r),e;if(null===t)e.stroke=()=>ls.noStroke();else if(void 0===t)e.stroke=ns;else{const r=fs(t,o);e.stroke=e=>ls.stroke(ms(r,e))}if(null===r)e.fill=()=>ls.noFill();else if(void 0===r)e.fill=ns;else{const t=fs(r,o);e.fill=e=>ls.fill(ms(t,e))}return e},vs=Object.freeze({__proto__:null,create:(e,t,r)=>{const o={stroke:ns,fill:ns},n=bs.bind(void 0,o,e,t,r);return is?n():(_s.push(n),o)},apply:(e,t)=>{if(t<1)return ls.noStroke(),void ls.noFill();e.stroke(t),e.fill(t)}}),Os=(e=is,t)=>{t&&(e.push(),t(e),e.pop()),e.loadPixels();const r=e.pixels;return()=>{e.pixels=r,e.updatePixels()}},Rs=(e=is)=>{const t=e.pixelDensity(),r=e.width*t,{pixels:o}=e;return(e,n,a,s,i,c)=>{const l=e*t,u=l+t,d=n*t,y=d+t;for(let e=d;e<y;e+=1){const t=e*r;for(let e=l;e<u;e+=1){const r=4*(t+e);o[r]=a,o[r+1]=s,o[r+2]=i,o[r+3]=c}}}},Ss=(e=is)=>{const t=e.pixelDensity(),r=e.width*t,{pixels:o}=e;return(e,n,a,s,i)=>{const c=e*t,l=c+t;for(let e=c;e<l;e+=1){const t=e*r;for(let e=0;e<r;e+=1){const r=4*(t+e);o[r]=n,o[r+1]=a,o[r+2]=s,o[r+3]=i}}}},ws=(e,t,r)=>{ls.translate(t,r),e(),ls.translate(-t,-r)},zs=(e,t)=>{ls.rotate(t),e(),ls.rotate(-t)},As=(e,t)=>{ls.scale(t),e(),ls.scale(1/t)},Cs=(e,t,r,o)=>{ls.translate(t,r),As(e,o),ls.translate(-t,-r)};let Es=0,Ps=0,Is=0,Ts=1;const Ls=e=>ls.curveVertex(e.x,e.y),Fs=e=>{const{controlPoint1:t,controlPoint2:r,targetPoint:o}=e;ls.bezierVertex(t.x,t.y,r.x,r.y,o.x,o.y)},ks=e=>{const{point:t,controlLine:r}=e,{x:o,y:n}=t,a=ja(.5*r.length,r.angle),s=a.x,i=a.y;ls.line(o-s,n-i,o+s,n+i)};let Vs=0,js=0,Ms="DEFAULT";const Ns=(e,t=is)=>{const{width:r,height:o}=t;t.loadPixels();const n=Rs(t);for(let t=0;t<o;t+=1)for(let o=0;o<r;o+=1)e(n,o,t);t.updatePixels()},Bs=(e,t=is)=>{const{height:r}=t;t.loadPixels();const o=Ss(t);for(let t=0;t<r;t+=1)e(o,t);t.updatePixels()},Ds=(e,t,r,o,n,a)=>{const s=r-e,i=o-t;ls.line(e+n*s,t+n*i,e+a*s,t+a*i)},qs=(e,t,r,o)=>{const n=r-e,a=o-t;return(r,o)=>ls.line(e+r*n,t+r*a,e+o*n,t+o*a)},Qs=Object.freeze({__proto__:null,draw:Ds,create:qs}),Hs=(e,t,r,o,n,a,s,i)=>{n!==a&&ls.arc(e,t,r,o,n*ts,a*ts,s,i)},Ws=(e,t,r,o,n,a)=>(s,i)=>Hs(e,t,r,o,s,i,n,a),Us=Object.freeze({__proto__:null,draw:Hs,create:Ws}),Gs=(e,t,r,o,n,a,s)=>Hs(e,t,r,r,o,n,a,s),Zs=(e,t,r,o,n)=>Ws(e,t,r,r,o,n),Js=Object.freeze({__proto__:null,draw:Gs,create:Zs}),Ks=(e,t)=>({from:e,to:t,length:qa(e.x,e.y,t.x,t.y)}),Xs=(e,t)=>{const{from:r,to:o}=e;ls.vertex(Ua(r.x,o.x,t),Ua(r.y,o.y,t))},Ys=e=>{const t=(e=>{const t=e.length,r=new Array(t),o=t-1;let n=0;for(let t=0;t<o;t+=1){const o=Ks(e[t],e[t+1]);r[t]=o,n+=o.length}const a=Ks(e[o],e[0]);r[o]=a,n+=a.length;const s=new Array(t);for(let e=0,o=0;e<t;e+=1){const t=r[e],a=o+t.length/n;s[e]={from:t.from,to:t.to,previousRatio:o,nextRatio:a},o=a}return s})(e);return(e,r)=>{const o=((e,t)=>{for(let r=t.length-1;r>=0;r-=1)if(t[r].previousRatio<=e)return r;return 0})(e,t),n=((e,t)=>{const{length:r}=t;for(let o=0;o<r;o+=1)if(e<=t[o].nextRatio)return o;return r-1})(r,t),a=Ga(e,t[o].previousRatio,t[o].nextRatio),s=Ga(r,t[n].previousRatio,t[n].nextRatio);if(ls.beginShape(),Xs(t[o],a),o!==n)for(let e=o;e<n;e+=1){const r=t[e].to;ls.vertex(r.x,r.y)}Xs(t[n],s),ls.endShape()}},$s=Object.freeze({__proto__:null,create:Ys}),ei=(e,t,r,o)=>{const n=e+r,a=t+o;return Ys([{x:e,y:t},{x:n,y:t},{x:n,y:a},{x:e,y:a}])},ti=(e,t,r,o)=>{const n=.5*r,a=.5*o,s=e-n,i=t-a,c=e+n,l=t+a;return Ys([{x:s,y:i},{x:c,y:i},{x:c,y:l},{x:s,y:l}])},ri=Object.freeze({__proto__:null,createCorner:ei,createCenter:ti}),oi=(e,t,r)=>ei(e,t,r,r),ni=(e,t,r)=>ti(e,t,r,r),ai=Object.freeze({__proto__:null,createCorner:oi,createCenter:ni}),si=Object.freeze({__proto__:null,drawTrimmedLine:Ds,createTrimmedLine:qs,drawTrimmedEllipse:Hs,createTrimmedEllipse:Ws,drawTrimmedCircle:Gs,createTrimmedCircle:Zs,createTrimmedPolygon:Ys,createTrimmedRectangleCorner:ei,createTrimmedRectangleCenter:ti,createTrimmedSquareCorner:oi,createTrimmedSquareCenter:ni}),ii=Object.freeze({__proto__:null,Line:Qs,Ellipse:Us,Circle:Js,Polygon:$s,Rectangle:ri,Square:ai,FullName:si}),ci=e=>{e.zoomTimer=ss.dummy,e.targetZoomFactor=void 0},li=Object.freeze({__proto__:null,create:e=>{const{displaySize:t,initialDisplayPosition:r,initialFocusPoint:o,minZoomFactor:n,maxZoomFactor:a}=e,s=e.regionBoundary||Ia.createInfinite(),i=Ta.calculateScaleFactor(Ia.getSize(s),t),c=n?Za(i,n):i,l=a?Za(c,a):1/0;return{displaySize:t,displayPosition:Ma(r||Na),regionBoundary:s,zoomFactorRange:{start:c,end:l},focusPoint:o?Ma(o):s?Ia.getCenterPoint(s):Ma(Na),zoomFactor:1,zoomTimer:ss.dummy,targetZoomFactor:void 0,targetFocusPoint:void 0,focusPointEasingFactor:.1}},update:e=>{const{displaySize:{width:t,height:r},regionBoundary:{topLeft:{x:o,y:n},bottomRight:{x:a,y:s}},zoomFactor:i,focusPoint:c,targetFocusPoint:l,focusPointEasingFactor:u}=e;l&&(c.x+=u*(l.x-c.x),c.y+=u*(l.y-c.y));const d=t/(2*i),y=r/(2*i);Ba(c,o+d,a-d,n+y,s-y),ss.Component.step(e.zoomTimer)},draw:(e,t)=>{const{displaySize:r,displayPosition:o,focusPoint:n,zoomFactor:a}=e;Cs(t,o.x+r.width/2-a*n.x,o.y+r.height/2-a*n.y,a)},stopTweenZoom:ci,setZoom:(e,t)=>{const{zoomFactorRange:r}=e,o=Ja(t,r.start,r.end);e.zoomFactor=o,ci(e)},tweenZoom:(e,t,r,o=60)=>{const{zoomFactorRange:n}=e,a=Ja(t,n.start,n.end),s=as.create(t=>e.zoomFactor=t,o,{start:e.zoomFactor,end:a,easing:r});return s.onComplete.push(ci.bind(void 0,e)),e.targetZoomFactor=a,e.zoomTimer=s},getWorldPosition:(e,t,r)=>{const{displaySize:o,displayPosition:n,focusPoint:a,zoomFactor:s}=e,i=1/s;return Da(r,i*(t.x-(n.x+o.width/2))+a.x,i*(t.y-(n.y+o.height/2))+a.y)},getScreenPosition:(e,t,r)=>{const{displaySize:o,displayPosition:n,focusPoint:a,zoomFactor:s}=e;return Da(r,n.x+o.width/2+s*(t.x-a.x),n.y+o.height/2+s*(t.y-a.y))}}),ui={x:0,y:0},di={x:0,y:0},yi={x:0,y:0};let pi=!0;const gi=os.returnVoid,hi=os.returnFalse,fi=e=>{let t=!0;for(let r=0;r<e.length;r+=1)t=!1!==e[r](ui)&&t;return t},mi=e=>({onClicked:Fa(e.onClicked),onPressed:Fa(e.onPressed),onReleased:Fa(e.onReleased),onMoved:Fa(e.onMoved),onEnter:Fa(e.onEnter),onLeave:Fa(e.onLeave),isMouseOver:e.isMouseOver||os.returnTrue,active:!0,mouseOver:!1}),xi=mi({}),_i=ka.create(32),bi=mi({}),vi=e=>{const t=mi(e);return ka.add(_i,t),t},Oi=e=>{const t=(e=>{const t=(e=>{switch(e){case 0:return e=>e.onClicked;case 1:return e=>e.onPressed;case 2:return e=>e.onReleased;case 3:return e=>e.onMoved}})(e);return e=>!e.active||!e.mouseOver||fi(t(e))})(e);return()=>{if(!pi)return;if(!1===t(xi))return;const e=_i.array;let r=_i.size-1;for(;r>=0;){if(!1===t(e[r]))return;r-=1}t(bi)}},Ri=Oi(0),Si=Oi(1),wi=Oi(2),zi=e=>(e.mouseOver=!1,!0),Ai=e=>{if(e.active){if(!e.isMouseOver(ui))return e.mouseOver?(e.mouseOver=!1,fi(e.onLeave)):void 0;if(!e.mouseOver){e.mouseOver=!0;const t=!1!==fi(e.onEnter);return!1!==fi(e.onMoved)&&t}return fi(e.onMoved)}},Ci=Object.freeze({__proto__:null,get active(){return pi},setActive:e=>{pi=e},emptyHandler:gi,stopHandler:hi,createListener:mi,topListener:xi,listenerStack:_i,bottomListener:bi,addListener:e=>ka.add(_i,e),addNewListener:vi,removeListener:e=>ka.removeShiftElement(_i,e),onClicked:Ri,onPressed:Si,onReleased:wi,onMoved:()=>{if(!pi)return;let e=Ai;!1===e(xi)&&(e=zi);const t=_i.array;let r=_i.size-1;for(;r>=0;)!1===e(t[r])&&(e=zi),r-=1;e(bi)}});var Ei;!function(e){e[e.Default=0]="Default",e[e.MouseOver=1]="MouseOver",e[e.Pressed=2]="Pressed",e[e.Inactive=3]="Inactive",e[e.Hidden=4]="Hidden"}(Ei||(Ei={}));const Pi=e=>{e.state=Ei.Default,e.draw=e.drawDefault,e.listener.active=!0},Ii=e=>{e.state=Ei.MouseOver,e.draw=e.drawMouseOver,e.listener.active=!0},Ti=e=>{e.state=Ei.Pressed,e.draw=e.drawPressed,e.listener.active=!0},Li=Object.freeze({__proto__:null,get State(){return Ei},setStateDefault:Pi,setStateMouseOver:Ii,setStatePressed:Ti,setStateInactive:e=>{e.state=Ei.Inactive,e.draw=e.drawInactive,e.listener.active=!1},setStateHidden:e=>{e.state=Ei.Hidden,e.draw=ns,e.listener.active=!1},create:(e,t=!0)=>{const r=e.drawDefault,o=e.drawMouseOver||r,n=e.drawPressed||r,a=e.drawInactive||r,s=r,i=t?vi(e):mi(e),c={listener:i,drawDefault:r,drawMouseOver:o,drawPressed:n,drawInactive:a,draw:s,state:Ei.Default},l=!!e.allowSubsequentEvents,u=()=>(Ii(c),l);return i.onEnter.push(u,()=>is.cursor("pointer")),i.onPressed.push(()=>(Ti(c),l)),i.onClicked.push(u),i.onLeave.push(()=>(Pi(c),l),()=>is.cursor("auto")),l||(i.onMoved.push(hi),i.onReleased.push(hi)),c},draw:e=>e.draw()}),Fi=Object.freeze({__proto__:null,Event:Ci,Button:Li,position:ui,previousPosition:di,displacement:yi,updatePosition:()=>{if(!cs)return;const e=1/cs.scaleFactor;Va.Mutable.set(di,ui),Va.Mutable.setCartesian(ui,e*is.mouseX,e*is.mouseY),Va.Assign.subtract(ui,di,yi)},setCenter:()=>Va.Mutable.set(ui,cs.logicalCenterPosition),drawAtCursor:e=>ws(e,ui.x,ui.y),isOnCanvas:()=>Ia.containsPoint(cs.logicalRegion,ui,0)}),ki=Object.freeze({__proto__:null,anyKeyIsDown:e=>{for(const t of e)if(is.keyIsDown(t))return!0;return!1}});let Vi=0,ji=0;const Mi={x:0,y:0};let Ni=!1,Bi=!1,Di=!1,qi=!1;const Qi=(e,t)=>Va.Mutable.setCartesian(Mi,e,t),Hi=()=>{switch(Vi=(Bi?-1:0)+(qi?1:0),ji=(Ni?-1:0)+(Di?1:0),Vi){case-1:switch(ji){case-1:Qi(-Ka,-Ka);break;case 0:Qi(-1,0);break;case 1:Qi(-Ka,Ka)}break;case 0:switch(ji){case-1:Qi(0,-1);break;case 0:Qi(0,0);break;case 1:Qi(0,1)}break;case 1:switch(ji){case-1:Qi(Ka,-Ka);break;case 0:Qi(1,0);break;case 1:Qi(Ka,Ka)}}},Wi=Object.freeze({__proto__:null,get horizontalMove(){return Vi},get verticalMove(){return ji},unitVector:Mi,get up(){return Ni},get left(){return Bi},get down(){return Di},get right(){return qi},onPressed:()=>{switch(is.key){case"w":Ni=!0;break;case"a":Bi=!0;break;case"s":Di=!0;break;case"d":qi=!0}switch(is.keyCode){case 38:Ni=!0;break;case 37:Bi=!0;break;case 40:Di=!0;break;case 39:qi=!0}Hi()},onReleased:()=>{switch(is.key){case"w":Ni=!1;break;case"a":Bi=!1;break;case"s":Di=!1;break;case"d":qi=!1}switch(is.keyCode){case 38:Ni=!1;break;case 37:Bi=!1;break;case 40:Di=!1;break;case 39:qi=!1}Hi()}});let Ui=!1;const Gi=()=>{is.noLoop(),Ui=!0},Zi=()=>{is.loop(),Ui=!1},Ji=()=>{Ui?Zi():Gi()},Ki=(e=>{let t=0,r=1;for(let e=0;e<10;e+=1)t+=r/=2;return t/2})(),Xi=Object.freeze({__proto__:null,withOffset:(e=Ya(4096))=>t=>is.noise(e+t),withOffset2:(e=Ya(4096),t=Ya(256))=>(r,o)=>is.noise(e+r,t+o),withOffset3:(e=Ya(4096),t=Ya(256),r=Ya(16))=>(o,n,a)=>is.noise(e+o,t+n,r+a),withChangeRate:(e,t=Ya(4096))=>{let r=t;return()=>is.noise(r+=e)},withChangeRate1:(e,t=Ya(4096),r=Ya(256))=>{let o=r;return r=>is.noise(t+r,o+=e)},withChangeRate2:(e,t=Ya(4096),r=Ya(256),o=Ya(16))=>{let n=o;return(o,a)=>is.noise(t+o,r+a,n+=e)},AVERAGE:Ki}),Yi=()=>({width:is.windowWidth,height:is.windowHeight}),$i=e=>{const{scaleFactor:t,logicalSize:r}=e;return{width:t*r.width,height:t*r.height}},ec=e=>{const{scaleFactor:t,logicalSize:r}=e,o=1!==t?e=>As(e,t):e=>e();return{logicalSize:r,logicalRegion:Ia.create(Va.zero,r),logicalCenterPosition:{x:r.width/2,y:r.height/2},scaleFactor:t,drawScaled:o}},tc=(e,t)=>{const r=e(),{width:o,height:n}=$i(r),a=is.createCanvas(o,n,t),s=Object.assign({p5Canvas:a},ec(r));let i=r;return Object.assign(s,{resizeIfNeeded:t=>{const r=e();if(((e,t)=>{if(e.scaleFactor!==t.scaleFactor)return!1;const r=e.logicalSize,o=t.logicalSize;return r.width===o.width&&o.height==o.height})(i,r))return;const{width:o,height:n}=$i(r);is.resizeCanvas(o,n,t);const a=ec(r);Object.assign(s,a),i=r}})},rc=e=>{const{logicalSize:t,getPhysicalContainerSize:r,fittingOption:o,renderer:n}=Object.assign({getPhysicalContainerSize:Yi},e),a=null!==o?()=>Ta.calculateScaleFactor(t,r(),o):cn.returnOne;return tc(()=>({scaleFactor:a(),logicalSize:t}),n)},oc=e=>{const{logicalHeight:t,getPhysicalContainerSize:r,renderer:o}=Object.assign({getPhysicalContainerSize:Yi},e),n=e.disableScaling?cn.returnOne:()=>r().height/t;return tc(()=>{const e=n();return{scaleFactor:e,logicalSize:{width:r().width/e,height:t}}},o)},nc=t=>{const r="string"==typeof t.htmlElement?an.getElementOrBody(t.htmlElement):t.htmlElement,{logicalCanvasWidth:o,logicalCanvasHeight:n,initialize:a,setP5Methods:s,fittingOption:i,renderer:c}=t;new e(e=>{us(e),e.setup=()=>{const t=r?an.getElementSize.bind(void 0,r):void 0,s=o?rc({logicalSize:{width:o,height:n},getPhysicalContainerSize:t,fittingOption:i,renderer:c}):oc({logicalHeight:n,getPhysicalContainerSize:t,renderer:c});ds(s),v.loopRunWithArgument(_s,e),_s.length=0,a()},s(e)},r)},ac=Object.freeze({__proto__:null,AlphaColor:xs,Camera:li,KeyBoard:ki,Mouse:Fi,MoveKeys:Wi,Noise:Xi,ShapeColor:vs,TrimmedShape2D:ii,applyShake:()=>{if(0===Vs)return;const{width:e,height:t}=cs.logicalSize,r="VERTICAL"===Ms?0:$a(Vs*e),o="HORIZONTAL"===Ms?0:$a(Vs*t);is.translate(r,o),Vs*=js,Vs<.001&&(Vs=0)},arcAtOrigin:(e,t,r,o,n,a)=>ls.arc(0,0,e,t,r*ts,o*ts,n,a),get canvas(){return cs},circleAtOrigin:e=>ls.circle(0,0,e),circularArcAtOrigin:(e,t,r,o,n)=>ls.arc(0,0,e,e,t*ts,r*ts,o,n),colorToARGB:e=>({a:is.alpha(e),r:is.red(e),g:is.green(e),b:is.blue(e)}),colorToRGB:e=>({r:is.red(e),g:is.green(e),b:is.blue(e)}),colorWithAlpha:hs,createFullScaledCanvas:oc,createScaledCanvas:rc,createSetPixel:Rs,createSetPixelRow:Ss,createTexture:(e,t,r)=>{const o=is.createGraphics(e,t);return Ns(r,o),o},createTextureRowByRow:(e,t,r)=>{const o=is.createGraphics(e,t);return Bs(r,o),o},curveVertexFromVector:Ls,drawBezierControlLines:e=>{La(e,ks)},drawBezierCurve:e=>{const{startPoint:t,paths:r}=e;ls.vertex(t.x,t.y),La(r,Fs)},drawCurve:e=>{const{length:t}=e;ls.beginShape(),Ls(e[0]);for(let r=0;r<t;r+=1)Ls(e[r]);Ls(e[t-1]),ls.endShape()},drawCurveClosed:e=>{const{length:t}=e;ls.beginShape();for(let r=0;r<t;r+=1)Ls(e[r]);for(let t=0;t<3;t+=1)Ls(e[t]);ls.endShape()},drawRotated:zs,drawScaled:As,drawTexture:Ns,drawTextureRowByRow:Bs,drawTransformed:(e,t,r,o,n)=>{ls.translate(t,r),ls.rotate(o),ls.scale(n),e(),ls.scale(1/n),ls.rotate(-o),ls.translate(-t,-r)},drawTranslated:ws,drawTranslatedAndRotated:(e,t,r,o)=>{ls.translate(t,r),zs(e,o),ls.translate(-t,-r)},drawTranslatedAndScaled:Cs,getWindowSize:Yi,graphicsToImage:e=>{const t=e,{width:r,height:o}=t,n=is.createImage(r,o);return n.copy(e,0,0,r,o,0,0,r,o),n},hsvColor:(e,t,r,o=255)=>{const[n,a,s]=rs.toRGB([e,t,r]);return is.color(255*n,255*a,255*s,o)},line:(e,t)=>ls.line(e.x,e.y,t.x,t.y),lineAtOrigin:e=>ls.line(0,0,e.x,e.y),lineWithMargin:(e,t,r)=>{const o=es.betweenPoints(e,t),n=r*Ha(o),a=r*Qa(o);return ls.line(e.x+n,e.y+a,t.x-n,t.y-a)},onSetup:_s,get p(){return is},parseColor:ys,parseFill:gs,parseStroke:ps,pause:Gi,pauseOrResume:Ji,get renderer(){return ls},resume:Zi,reverseColor:e=>is.color(255-is.red(e),255-is.green(e),255-is.blue(e),is.alpha(e)),rotate:e=>{Is=e,ls.rotate(e)},rotateScale:(e,t)=>{Is=e,Ts=t,ls.rotate(e),ls.scale(t)},scale:e=>{Ts=e,ls.scale(e)},setCanvas:ds,setP5Instance:us,setRenderer:e=>{ls=e},setShake:(e,t,r="DEFAULT",o=!1)=>{t>=1||(o||0===Vs)&&(Vs=e,js=t,Ms=r)},startSketch:nc,storePixels:Os,transform:(e,t,r,o)=>{Es=e,Ps=t,Is=r,Ts=o,ls.translate(e,t),ls.rotate(r),ls.scale(o)},translate:(e,t)=>{Es=e,Ps=t,ls.translate(e,t)},translateRotate:(e,t,r)=>{Es=e,Ps=t,Is=r,ls.translate(e,t),ls.rotate(r)},translateScale:(e,t,r)=>{Es=e,Ps=t,Ts=r,ls.translate(e,t),ls.scale(r)},undoRotate:()=>{ls.rotate(-Is)},undoRotateScale:()=>{ls.scale(1/Ts),ls.rotate(-Is)},undoScale:()=>{ls.scale(1/Ts)},undoTransform:()=>{ls.scale(1/Ts),ls.rotate(-Is),ls.translate(-Es,-Ps)},undoTranslate:()=>{ls.translate(-Es,-Ps)},undoTranslateRotate:()=>{ls.rotate(-Is),ls.translate(-Es,-Ps)},undoTranslateScale:()=>{ls.scale(1/Ts),ls.translate(-Es,-Ps)}}),{Vector2D:sc,Random:ic,Numeric:{hypotenuse2D:cc,lerp:lc},Angle:{TWO_PI:uc,PI:dc},Tween:yc,Timer:pc,Easing:gc}=Pa,{onSetup:hc}=ac;let fc,mc;hc.push(e=>{fc=e}),hc.push(()=>{mc=cs});const xc=()=>2*ic.angle(),_c=()=>ic.between(.1,.7),bc=()=>ic.signed(.15),vc=()=>ic.between(80,100),Oc=()=>ic.between(60,90);let Rc,Sc;const wc=e=>{const{bearingAngle:t,interiorAngle:r,directionOffsetAngle:o,hue:n,saturation:a,brightness:s}=e,i=xc(),c=_c(),l=bc(),u=(n+110)%360,d=vc(),y=Oc(),p=pc.create({duration:50,onProgress:p=>{const g=gc.InOut.expo(p.ratio);e.bearingAngle=lc(t,i,g),e.interiorAngle=lc(r,c,g),e.directionOffsetAngle=lc(o,l,g),e.hue=lc(n,u,g),e.saturation=lc(a,d,g),e.brightness=lc(s,y,g)}}),g=pc.create({duration:77}),h=pc.chain([p,g]);return h.onComplete.push(()=>{e.timer=wc(e)}),h},zc=(e,t,r)=>{const o={rotationVelocity:r,rotationAngle:e,bearingAngle:xc(),interiorAngle:_c(),directionOffsetAngle:bc(),hue:t,saturation:vc(),brightness:Oc(),timer:pc.dummy};return o.timer=wc(o),o},Ac=e=>{e.rotationAngle+=e.rotationVelocity,e.timer.step()},Cc=sc.Mutable.create(),Ec=e=>{fc.fill(e.hue,e.saturation,e.brightness);const t=e.bearingAngle+e.rotationAngle;sc.Assign.setPolar(Rc,t,Cc);const r=t+dc+e.directionOffsetAngle,o=e.interiorAngle/2;fc.arc(Cc.x,Cc.y,Sc,Sc,r-o,r+o)};let Pc;const Ic=[],Tc=()=>{fc.background(252),Pc=Os(),(()=>{const e=cc(mc.logicalSize.width,mc.logicalSize.height);Rc=e/2*1.2,Sc=2*(Rc+e/2)})(),Ic.length=0;const e=uc/3,t=fc.random(60);Ic.push(zc(0*e,t,.001),zc(1*e,(t+150)%360,-.001),zc(2*e,(t+210)%360,.003))},Lc=()=>{fc.translate(mc.logicalCenterPosition.x,mc.logicalCenterPosition.y),Ic.forEach(Ec)},Fc=()=>{Ic.forEach(Ac),Pc(),mc.drawScaled(Lc)},kc=()=>{switch(fc.key){case"p":Ji();break;case"g":fc.save("image.png")}};nc({htmlElement:"LightCones",logicalCanvasHeight:800,initialize:()=>{fc.noStroke(),fc.blendMode(fc.HARD_LIGHT),fc.colorMode(fc.HSB,360,100,100,100),Tc()},setP5Methods:e=>{e.draw=Fc,e.keyTyped=kc,e.windowResized=()=>{mc.resizeIfNeeded(),Tc()},e.mouseClicked=Tc}})}(p5);