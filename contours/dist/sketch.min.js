/**
 * Contours.
 * Source code in TypeScript: https://github.com/fal-works/p5js-sketches/tree/master/contours
 *
 * Bundled libraries:
 *   @fal-works/creative-coding-core (MIT license)
 *   @fal-works/p5-extension (MIT license)
 *
 * @copyright 2019 FAL
 * @version 0.1.0
 */
!function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;
/**
   * creative-coding-core
   *
   * Utility library that might be useful for creative coding.
   * GitHub repository: {@link https://github.com/fal-works/creative-coding-core}
   *
   * @module creative-coding-core
   * @copyright 2019 FAL
   * @author FAL <contact@fal-works.com>
   * @license MIT
   * @version 0.1.9
   */
const t=(e,t,r,o)=>{for(let n=r;n<o;n+=1)t(e[n],n,e)},r=(e,r)=>t(e,r,0,e.length),o=(e,t,r,o)=>{let n=o;for(;n>r;)t(e[--n],n,e)},n=(e,t,r,o,n,a,s)=>{for(let i=o;i<n;i+=1)for(let o=a;o<s;o+=1)r(e[i],t[o])},a=(e,t,r,o)=>{const n=o-1;for(let a=r;a<n;a+=1)for(let r=a+1;r<o;r+=1)t(e[a],e[r])},s=(e,t=1)=>t>0?e.reduce((e,r)=>e.concat(Array.isArray(r)?s(r,t-1):r),[]):e,i=(e,t,r)=>{const o=r||e.length;for(let r=0;r<o;r+=1)e[r]=t(r);return e},l=Object.freeze({__proto__:null,loopRange:t,loop:r,loopRangeBackwards:o,loopBackwards:(e,t)=>o(e,t,0,e.length),nestedLoopJoinWithRange:n,nestedLoopJoin:(e,t,r)=>n(e,t,r,0,e.length,0,t.length),roundRobinWithRange:a,roundRobin:(e,t)=>a(e,t,0,e.length),flatNaive:e=>[].concat(...e),flatRecursive:s,populate:i,createPopulated:(e,t)=>i(new Array(t),e)}),c=e=>({array:new Array(e),size:0}),u=(e,t)=>{e.array[e.size]=t,e.size+=1},y=u,d=e=>{const{array:t,size:r}=e,o=t.length;t.length=r,t.length=o},x=e=>{e.size=0,d(e)},p=(e,t)=>{const{array:r,size:o}=e;for(let e=0;e<o;e+=1)if(r[e]===t)return e;return-1},f=(e,t)=>{const{array:r,size:o}=e,n=r[t];return r.copyWithin(t,t+1,o),e.size=o-1,n},_=(e,t)=>{const r=e.array,o=r[t],n=e.size-1;return r[t]=r[n],e.size=n,o},g=(e,t)=>{const{array:r,size:o}=e;let n=0,a=!1;for(let e=0;e<o;e+=1){const o=r[e];t(o,e,r)?a=!0:(r[n]=o,n+=1)}return e.size=n,a},h=Object.freeze({__proto__:null,create:c,createFilled:(e,t)=>({array:new Array(e).fill(t),size:e}),createPopulated:(e,t)=>({array:i(new Array(e),t),size:e}),fromArray:e=>({array:e,size:e.length}),add:u,push:y,pop:e=>{const t=e.size-1,r=e.array[t];return e.size=t,r},clear:e=>{e.size=0},cleanUnusedSlots:d,clearReference:x,loop:(e,r)=>t(e.array,r,0,e.size),loopBackwards:(e,t)=>o(e.array,t,0,e.size),find:(e,t)=>{const{array:r,size:o}=e;for(let e=0;e<o;e+=1)if(t(r[e],e,r))return r[e]},findIndex:p,removeShift:f,removeShiftElement:(e,t)=>{const r=p(e,t);return r>=0?f(e,r):null},removeSwap:_,removeSwapElement:(e,t)=>{const r=p(e,t);return r>=0?_(e,r):null},removeShiftAll:g,removeSwapAll:(e,t)=>{let r=!1;const o=e.array;for(let n=0;n<e.size;n+=1)t(o[n],n,o)&&(_(e,n),r=!0);return r},populate:(e,t)=>(i(e.array,t),e.size=e.array.length,e),nestedLoopJoin:(e,t,r)=>n(e.array,t.array,r,0,e.size,0,t.size),roundRobin:(e,t)=>a(e.array,t,0,e.size)}),m=Object.freeze({__proto__:null,create:e=>({value:void 0,factory:e}),get:e=>e.value||(e.value=e.factory()),clear:e=>{e.value=void 0}}),O=Object.freeze({__proto__:null,from:(e,t)=>{const r={};for(const o of Object.keys(e))r[o]=new Array(t).fill(e[o]);return{data:r,length:t}}}),{abs:v,acos:R,asin:b,atan:E,atan2:S,ceil:z,cos:w,exp:A,floor:T,log:C,max:P,min:I,pow:k,round:L,sin:j,sqrt:V,tan:Q,clz32:U,imul:B,sign:H,log10:N,log2:D,log1p:F,expm1:M,cosh:W,sinh:G,tanh:q,acosh:J,asinh:K,atanh:Z,hypot:X,trunc:$,fround:Y,cbrt:ee}=Math,te=V,re=U,oe=B,ne=X,ae=$,se=Y,ie=ee,le=e=>e*e,ce=e=>e*e*e,ue=e=>le(e*e),ye=(e,t)=>e<t?e:t,de=(e,t)=>0!==e||0!==t?S(e,t):0,xe=(e,t)=>e*e+t*t,pe=(e,t)=>V(e*e+t*t),fe=(e,t,r)=>e+r*(t-e),_e=Object.freeze({__proto__:null,abs:v,acos:R,asin:b,atan:E,atan2:S,ceil:z,cos:w,exp:A,floor:T,log:C,max:P,min:I,pow:k,round:L,sin:j,sqrt:V,tan:Q,clz32:U,imul:B,sign:H,log10:N,log2:D,log1p:F,expm1:M,cosh:W,sinh:G,tanh:q,acosh:J,asinh:K,atanh:Z,hypot:X,trunc:$,fround:Y,cbrt:ee,squareRoot:te,leadingZeros32:re,multInt:oe,hypotenuse:ne,integerPart:ae,floatRound:se,cubeRoot:ie,square:le,cube:ce,pow4:ue,pow5:e=>le(e*e)*e,squareInt:e=>B(e,e),cubeInt:e=>B(B(e,e),e),equal:(e,t)=>v(e-t)<2220446049250313e-31,min2:ye,max2:(e,t)=>e>t?e:t,atan2safe:de,hypotenuseSquared2D:xe,hypotenuse2D:pe,lerp:fe,clamp:(e,t,r)=>e<t?t:e>r?r:e}),{E:ge,LN10:he,LN2:me,LOG2E:Oe,LOG10E:ve}=Math,Re=Math.SQRT2,be=Math.SQRT1_2,Ee=Math.sqrt(3),Se=be,ze=Re,we=1/Ee,Ae=2/Ee,Te=Ee/2,Ce=be,Pe=Object.freeze({__proto__:null,E:ge,LN10:he,LN2:me,LOG2E:Oe,LOG10E:ve,ONE_HALF:.5,ONE_THIRD:1/3,TWO_THIRDS:2/3,ONE_QUARTER:.25,TWO_QUARTERS:.5,THREE_QUARTERS:.75,INVERSE30:1/30,INVERSE60:1/60,INVERSE255:1/255,SQUARE_ROOT_TWO:Re,SQUARE_ROOT_ONE_HALF:be,SQUARE_ROOT_THREE:Ee,ONE_OVER_SQUARE_ROOT_TWO:Se,TWO_OVER_SQUARE_ROOT_TWO:ze,ONE_OVER_SQUARE_ROOT_THREE:we,TWO_OVER_SQUARE_ROOT_THREE:Ae,SQUARE_ROOT_THREE_OVER_TWO:Te,SQUARE_ROOT_TWO_OVER_TWO:Ce}),Ie=Math.PI,ke=2*Ie,Le=Ie/2,je=Ie/3,Ve=Ie/4,Qe=3*Ve,Ue=Se,Be=Te,He=Be,Ne=Ue,De=ke/360,Fe=360/ke,Me=Object.freeze({__proto__:null,PI:Ie,TWO_PI:ke,HALF_PI:Le,THIRD_PI:je,QUARTER_PI:Ve,THREE_QUARTERS_PI:Qe,SIN30:.5,SIN45:Ue,SIN60:Be,COS30:He,COS45:Ne,COS60:.5,DEGREES_TO_RADIANS:De,RADIANS_TO_DEGREES:Fe,createArray:e=>{const t=new Array(e),r=ke/e;for(let o=0;o<e;o+=1)t[o]=o*r;return t},fromDegrees:e=>De*e,toDegrees:e=>Fe*e,fromOrigin:e=>{const{x:t,y:r}=e;return 0!==t||0!==r?S(e.y,e.x):0},betweenPoints:(e,t)=>{const r=t.x-e.x,o=t.y-e.y;return 0!==r||0!==o?S(o,r):0},betweenCoordinates:(e,t,r,o)=>e!==r||t!==o?S(r-e,o-t):0}),We=e=>{const{topLeft:t,rightBottom:r}=e;return{width:r.x-t.x,height:r.y-t.y}},Ge=e=>{const{topLeft:t,rightBottom:r}=e;return{x:(t.x+r.x)/2,y:(t.y+r.y)/2}},qe=Object.freeze({__proto__:null,create:(e,t)=>({topLeft:e,rightBottom:{x:e.x+t.width,y:e.y+t.height}}),containsPoint:(e,t,r)=>{const{topLeft:o,rightBottom:n}=e,{x:a,y:s}=t;return a>=o.x+r&&s>=o.y+r&&a<n.x-r&&s<n.y-r},getWidth:e=>e.rightBottom.x-e.topLeft.x,getHeight:e=>e.rightBottom.y-e.topLeft.y,getSize:We,getCenterPoint:Ge,createScaled:(e,t,r)=>{const{topLeft:o,rightBottom:n}=e;switch(r){case 0:return{topLeft:o,rightBottom:{x:fe(o.x,n.x,t),y:fe(o.y,n.y,t)}};case 1:{const t=Ge(e),r=We(e),o=r.width/2,n=r.height/2;return{topLeft:{x:t.x-o,y:t.y-n},rightBottom:{x:t.x+o,y:t.y+n}}}}}}),Je=Object.freeze({__proto__:null,getAspectRatio:e=>e.width/e.height,getArea:e=>e.width*e.height}),Ke=(e,t)=>({x:e*w(t),y:e*j(t)}),Ze=(e,t,r)=>({x:e.x+t*w(r),y:e.y+t*j(r)}),Xe=(e,t,r)=>({x:e.x-t*w(r),y:e.y-t*j(r)}),$e=(e,t)=>pe(t.x-e.x,t.y-e.y),Ye=Object.freeze({__proto__:null,add:(e,t)=>(e.x+=t.x,e.y+=t.y,e),addCartesian:(e,t,r)=>(e.x+=t,e.y+=r,e),addPolar:(e,t,r)=>(e.x+=t*w(r),e.y+=t*j(r),e),subtract:(e,t)=>(e.x-=t.x,e.y-=t.y,e),subtractCartesian:(e,t,r)=>(e.x-=t,e.y-=r,e),subtractPolar:(e,t,r)=>(e.x-=t*w(r),e.y-=t*j(r),e),set:(e,t)=>(e.x=t.x,e.y=t.y,e),setCartesian:(e,t,r)=>(e.x=t,e.y=r,e),setPolar:(e,t,r)=>(e.x=t*w(r),e.y=t*j(r),e),multiply:(e,t)=>(e.x*=t,e.y*=t,e),divide:(e,t)=>(e.x/=t,e.y/=t,e)}),et=(e,t,r)=>(r.x=e.x-t.x,r.y=e.y-t.y,r),tt=(e,t,r)=>(r.x=e,r.y=t,r),rt=(e,t,r)=>(r.x=e.x*t,r.y=e.y*t,r),ot=Object.freeze({__proto__:null,add:(e,t,r)=>(r.x=e.x+t.x,r.y=e.y+t.y,r),addCartesian:(e,t,r,o)=>(o.x=e.x+t,o.y=e.y+r,o),addPolar:(e,t,r,o)=>(o.x=e.x+t*w(r),o.y=e.y+t*j(r),o),subtract:et,subtractCartesian:(e,t,r,o)=>(o.x=e.x-t,o.y=e.y-r,o),subtractPolar:(e,t,r,o)=>(o.x=e.x-t*w(r),o.y=e.y-t*j(r),o),setCartesian:tt,setPolar:(e,t,r)=>(r.x=e*w(t),r.y=e*j(t),r),multiply:rt,divide:(e,t,r)=>(r.x=e.x/t,r.y=e.y/t,r)}),nt=Object.freeze({__proto__:null,Mutable:Ye,Assign:ot,zero:{x:0,y:0},isZero:e=>0===e.x&&0===e.y,fromPolar:Ke,add:(e,t)=>({x:e.x+t.x,y:e.y+t.y}),addCartesian:(e,t,r)=>({x:e.x+t,y:e.y+r}),addPolar:Ze,subtract:(e,t)=>({x:e.x-t.x,y:e.y-t.y}),subtractCartesian:(e,t,r)=>({x:e.x-t,y:e.y-r}),subtractPolar:Xe,multiply:(e,t)=>({x:e.x*t,y:e.y*t}),divide:(e,t)=>({x:e.x/t,y:e.y/t}),distanceSquared:(e,t)=>xe(t.x-e.x,t.y-e.y),distance:$e,toStr:e=>`{x:${e.x},y:${e.y}}`,copy:e=>({x:e.x,y:e.y}),lengthSquared:e=>xe(e.x,e.y),length:e=>pe(e.x,e.y),angle:e=>{const{x:t,y:r}=e;return 0!==t||0!==r?S(e.y,e.x):0}}),at=Object.freeze({__proto__:null,createCurve:e=>{const t=[],r=e.length;let o=e[0],n=o.controlLine;for(let a=1;a<r;a+=1){const r=e[a],s=r.controlLine;t.push({controlPoint1:Ze(o.point,.5*n.length,n.angle),controlPoint2:Xe(r.point,.5*s.length,s.angle),targetPoint:r.point}),o=r,n=s}return{startPoint:e[0].point,paths:t}}}),st=(e,t,r=.5)=>o=>{if(o<r)return r*e(o/r);{const e=1-r;return r+e*t((o-r)/e)}},it=le,lt=e=>1-le(e-1),ct=ce,ut=e=>ce(e-1)+1,yt=ue,dt=e=>1-ue(e-1),xt=st(it,lt),pt=st(lt,it),ft=st(ct,ut),_t=st(ut,ct),gt=st(yt,dt),ht=st(dt,yt),mt=Object.freeze({__proto__:null,bind:e=>(t,r,o)=>t+e(o)*(r-t),concatenate:(e,t,r=.5)=>o=>{if(o<r)return e(o/r);return t((o-r)/(1-r))},integrate:st,easeLinear:e=>e,easeInQuad:it,easeOutQuad:lt,easeInCubic:ct,easeOutCubic:ut,easeInQuart:yt,easeOutQuart:dt,createEaseOutBack:(e=1.70158)=>t=>{const r=t-1;return(e+1)*ce(r)+e*le(r)+1},easeInOutQuad:xt,easeOutInQuad:pt,easeInOutCubic:ft,easeOutInCubic:_t,easeInOutQuart:gt,easeOutInQuart:ht}),{random:Ot}=Math,vt=e=>Ot()*e,Rt=()=>Ot()*ke,bt=(e,t)=>e+Ot()*(t-e),Et=e=>T(Ot()*e),St=e=>Ot()<.5?e:-e,zt=Object.freeze({__proto__:null,value:vt,angle:Rt,between:bt,inRange:e=>bt(e.start,e.end),integer:Et,integerBetween:(e,t)=>e+T(Ot()*(t-e)),signed:St,fromArray:e=>e[Et(e.length)],removeFromArray:e=>e.splice(Et(e.length),1)[0],bool:e=>Ot()<e,fromAbsolute:e=>-e+2*Ot()*e,vector:e=>Ke(e,Rt()),pointInRectangleRegion:e=>{const{topLeft:t,rightBottom:r}=e;return{x:bt(t.x,r.x),y:bt(t.y,r.y)}}}),wt=Object.freeze({__proto__:null,calculateScaleFactor:(e,t,r)=>{switch(r){default:case"FIT_TO_BOX":return ye(t.width/e.width,t.height/e.height);case"FIT_WIDTH":return t.width/e.width;case"FIT_HEIGHT":return t.height/e.height}}}),At=Object.freeze({__proto__:null,getElementOrBody:e=>document.getElementById(e)||document.body,getElementSize:e=>e===document.body?{width:window.innerWidth,height:window.innerHeight}:e.getBoundingClientRect()}),Tt=()=>{},Ct=(e,t=Tt,r=Tt)=>({duration:e,progressRatioChangeRate:1/e,onProgress:t,onComplete:r,count:0,progressRatio:0,isCompleted:!1}),Pt=Ct(0),It=e=>{e.count=0,e.progressRatio=0,e.isCompleted=!1},kt=e=>{if(e.isCompleted)return!0;const{count:t,duration:r,progressRatioChangeRate:o}=e;return t>=r?(e.progressRatio=1,e.onProgress(e),e.isCompleted=!0,e.onComplete(e),!0):(e.onProgress(e),e.count+=1,e.progressRatio+=o,!1)},Lt=(e,t)=>{const r=Object.assign({},e),o=e.onComplete;return r.onComplete=()=>{o(r),t(r)},r},jt=e=>(kt(e.current),e.isCompleted),Vt=(e,t)=>{e.index=t,e.current=e.timers[t]},Qt=e=>{r(e.timers,It),Vt(e,0)},Ut=e=>(Vt(e,e.index+1),e.current),Bt=(e,t=!1)=>{let r;const o=new Array(e.length),n=()=>Ut(r),a=e.length-1;for(let t=0;t<a;t+=1)o[t]=Lt(e[t],n);return o[a]=Lt(e[a],t?()=>Qt(r):()=>r.isCompleted=!0),r={timers:o,current:o[0],index:0,isCompleted:!1}},Ht=Bt([Pt]),Nt=Object.freeze({__proto__:null,step:jt,setUnitIndex:Vt,reset:Qt,next:Ut,create:Bt,dummy:Ht}),Dt=e=>c(e),Ft=(e,t)=>u(e,()=>kt(t)),Mt=(e,t)=>u(e,()=>jt(t)),Wt=e=>e(),Gt=e=>{g(e,Wt)},qt=e=>x(e),Jt=Object.freeze({__proto__:null,create:Dt,addTimer:Ft,addChain:Mt,step:Gt,clear:qt,construct:e=>{const t=Dt(e);return{addTimer:e=>Ft(t,e),addChain:e=>Mt(t,e),step:()=>Gt(t),clear:()=>qt(t)}}}),Kt=Object.freeze({__proto__:null,Chain:Nt,Set:Jt,emptyListener:Tt,create:Ct,dummy:Pt,reset:It,step:kt,addOnComplete:Lt}),Zt=new Map([["A",".-"],["B","-..."],["C","-.-."],["D","-.."],["E","."],["F","..-."],["G","--."],["H","...."],["I",".."],["J",".---"],["K","-.-"],["L",".-.."],["M","--"],["N","-."],["O","---"],["P",".--."],["Q","--.-"],["R",".-."],["S","..."],["T","-"],["U","..-"],["V","...-"],["W",".--"],["X","-..-"],["Y","-.--"],["Z","--.."],["1",".----"],["2","..---"],["3","...--"],["4","....-"],["5","....."],["6","-...."],["7","--..."],["8","---.."],["9","----."],["0","-----"],[".",".-.-.-"],[",","--..--"],[":","---..."],["?","..--.."],["'",".----."],["!","-.-.--"],["-","-....-"],["/","-..-."],["@",".--.-."],["(","-.--."],[")","-.--.-"],['"',".-..-."],["=","-...-"],["+",".-.-."]]);class Xt{constructor(e,t,r){this.isOn=e,this.length=t,this.codeString=r;let o="";const n=e?"1":"0";for(let e=0;e<t;e+=1)o+=n;this.binaryString=o}}class $t extends Xt{constructor(e,t){super(!0,e,t)}}class Yt extends Xt{constructor(e,t){super(!1,e,t)}}const er=new $t(1,"."),tr=new $t(3,"-"),rr=new Yt(1,""),or=new Yt(3," "),nr=new Yt(7," / "),ar=new Yt(0,"");const sr=Object.freeze({__proto__:null,Unit:Xt,DIT:er,DAH:tr,INTER_ELEMENT_GAP:rr,SHORT_GAP:or,MEDIUM_GAP:nr,NUL:ar,encode:function(e){const t=e.toUpperCase(),r=[];let o=void 0;for(let e=0,n=t.length;e<n;e+=1){const n=t.charAt(e);if(" "===n){o=nr;continue}if(0===n.charCodeAt(0)){o&&r.push(o),o=void 0,r.push(ar);continue}const a=Zt.get(n);if(a){for(let e=0,t=a.length;e<t;e+=1){switch(o&&r.push(o),a.charAt(e)){case".":r.push(er);break;case"-":case"_":r.push(tr);break;default:continue}o=rr}o=or}}return r},toString:e=>e.reduce((e,t)=>e+t.codeString,""),toBinaryString:e=>e.reduce((e,t)=>e+t.binaryString,""),getTotalLength:e=>e.reduce((e,t)=>e+t.length,0)});function ir(e){return 1e3/(e/60*50)}const lr=e=>{e.timeout&&(e.off(ar),clearTimeout(e.timeout),e.timeout=void 0),e.index=0},cr=(e,t,r)=>{t.timeout=setTimeout(()=>{t.timeout=void 0,e(t)},r)},ur=e=>{const t=(e=>{const{unitTime:t,signals:r,index:o,on:n,off:a}=e,s=r[o];return s.isOn?n(s):a(s),t*s.length})(e);e.index+=1,e.index<e.signals.length?cr(ur,e,t):(e.timeout=setTimeout(()=>{e.loop?(e.off(ar),e.timeout=void 0):(e.off(nr),cr(ur,e,nr.length))},t),e.index=0)},yr=Object.freeze({__proto__:null,wpmToDotDuration:ir,create:(e,t,r=25,o=[],n=!1)=>({on:e,off:t,wpm:r,unitTime:ir(r),loop:n,signals:o,index:0,timeout:void 0}),stop:lr,start:(e,t)=>{lr(e),t&&(e.signals=t),ur(e)}}),dr=Object.freeze({__proto__:null,Signal:sr,Channel:yr}),xr=(e,t,r)=>{e.x+=e.vx,e.y+=e.vy,e.vx+=t,e.vy+=r},pr=(e,t,r)=>{e.vx2=e.vx+.5*t,e.vy2=e.vy+.5*r,e.vx+=t,e.vy+=r,e.x+=e.vx2,e.y+=e.vy2},fr=(e,t,r)=>{e.vx=e.vx2+.5*t,e.vy=e.vy2+.5*r},_r=Object.freeze({__proto__:null,createQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0}),updateEuler:e=>{e.x+=e.vx,e.y+=e.vy},updateEulerAccelerated:xr,updateVerlet:pr,postUpdateVerlet:fr,positionVector:(e,t)=>tt(e.x,e.y,t),velocityVector:(e,t)=>tt(e.vx,e.vy,t),getSpeed:e=>pe(e.vx,e.vy),getVelocityAngle:e=>de(e.vy,e.vx),truncateVelocity:(e,t)=>{const{vx:r,vy:o}=e;if(xe(r,o)<=t*t)return e;const n=S(o,r);return e.vx=t*w(n),e.vy=t*j(n),e},setVelocity:(e,t)=>(e.vx=t.x,e.vy=t.y,e),setVelocityCartesian:(e,t,r)=>(e.vx=t,e.vy=r,e),setVelocityPolar:(e,t,r)=>(e.vx=t*w(r),e.vy=t*j(r),e),bounceInRectangleRegion:(e,t,r)=>{const{x:o,y:n,vx:a,vy:s}=r,{x:i,y:l}=e.topLeft,{x:c,y:u}=e.rightBottom;return o<i?(r.x=i,a<0&&(r.vx=-t*a),!0):o>=c?(r.x=c-1,a>0&&(r.vx=-t*a),!0):n<l?(r.y=l,s<0&&(r.vy=-t*s),!0):n>=u&&(r.y=u-1,s>0&&(r.vy=-t*s),!0)}}),gr=(e,t)=>(e.fx+=t.x,e.fy+=t.y,e),hr=Object.freeze({__proto__:null,createQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0,fx:0,fy:0}),createVerletQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0,vx2:0,vy2:0,fx:0,fy:0}),updateEuler:e=>{xr(e,e.fx,e.fy),e.fx=0,e.fy=0},updateVerlet:e=>{pr(e,e.fx,e.fy),e.fx=0,e.fy=0},postUpdateVerlet:e=>{fr(e,e.fx,e.fy),e.fx=0,e.fy=0},forceVector:(e,t)=>tt(e.fx,e.fy,t),truncateForce:(e,t)=>{const{fx:r,fy:o}=e;if(xe(r,o)<=t*t)return e;const n=S(o,r);return e.fx=t*w(n),e.fy=t*j(n),e},addForce:gr,addForceCartesian:(e,t,r)=>(e.fx+=t,e.fy+=r,e),addForcePolar:(e,t,r)=>(e.fx+=t*w(r),e.fy+=t*j(r),e)}),mr=Object.freeze({__proto__:null,createQuantity:(e,t,r,o,n)=>({x:e,y:t,vx:o||0,vy:n||0,fx:0,fy:0,mass:r}),createVerletQuantity:(e,t,r,o,n)=>({x:e,y:t,vx:o||0,vy:n||0,vx2:0,vy2:0,fx:0,fy:0,mass:r}),updateEuler:e=>{const{mass:t}=e;xr(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0},updateVerlet:e=>{const{mass:t}=e;pr(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0},postUpdateVerlet:e=>{const{mass:t}=e;fr(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0}});let Or=1,vr=-Or;const Rr=(e,t,r,o)=>rt(e,vr*t/(r*r*r),o),br=(e,t,r)=>Rr(et(t,e,r),e.mass*t.mass,$e(e,t),r),Er=(e,t,r)=>rt(e,vr/(t*t*t),r),Sr=(e,t,r)=>Er(et(t,e,r),$e(e,t),r),zr=(e,t,r)=>{const{x:o,y:n}=r;e.fx-=o,e.fy-=n,t.fx+=o,t.fy+=n},wr={x:0,y:0},Ar={precalculated:(e,t,r,o)=>gr(e,Rr(t,r,o,wr)),calculate:(e,t)=>gr(t,br(e,t,wr)),precalculatedSimple:(e,t,r)=>gr(e,Er(t,r,wr)),calculateSimple:(e,t)=>gr(t,Sr(e,t,wr))},Tr={precalculated:(e,t,r,o,n)=>zr(e,t,Rr(r,o,n,wr)),calculate:(e,t)=>zr(e,t,br(e,t,wr)),precalculatedSimple:(e,t,r,o)=>zr(e,t,Er(r,o,wr)),calculateSimple:(e,t)=>zr(e,t,Sr(e,t,wr))},Cr=Object.freeze({__proto__:null,get constant(){return Or},setConstant:e=>{vr=-(Or=e)},calculateCore:Rr,calculate:br,calculateCoreSimple:Er,calculateSimple:Sr,attract:Ar,attractEachOther:Tr}),Pr=Object.freeze({__proto__:null,update:e=>{e.rotationAngle+=e.rotationVelocity},createRandomQuantity:(e,t)=>({rotationAngle:Rt(),rotationVelocity:St(bt(e,t))})}),Ir=Object.freeze({__proto__:null,withRandomHue:(e,t)=>[vt(360),e,t],toRGB:e=>{const[t,r,o]=e,n=o*r,a=t*(1/60),s=n*(1-v(a%2-1));let i;switch(T(a)){case 0:i=[n,s,0];break;case 1:i=[s,n,0];break;case 2:i=[0,n,s];break;case 3:i=[0,s,n];break;case 4:i=[s,0,n];break;case 5:i=[n,0,s];break;default:i=[0,0,0]}const l=o-n;return[i[0]+l,i[1]+l,i[2]+l]}}),kr=Object.freeze({Angle:Me,ArrayList:h,ArrayUtility:l,Bezier:at,Dynamics:mr,Easing:mt,FitBox:wt,Gravitation:Cr,HSV:Ir,HtmlUtility:At,Kinematics:_r,Lazy:m,MathConstants:Pe,MorseCode:dr,Numeric:_e,Random:zt,RectangleRegion:qe,RectangleSize:Je,Rotation:Pr,SimpleDynamics:hr,StructureOfArrays:O,Timer:Kt,Vector2D:nt});
/**
   * p5-extension
   *
   * An extension for p5.js.
   * GitHub repository: {@link https://github.com/fal-works/p5-extension}
   *
   * @module p5-extension
   * @copyright 2019 FAL
   * @author FAL <contact@fal-works.com>
   * @license MIT
   * @version 0.1.9
   */
let Lr,jr;const Vr=e=>{Lr=e},Qr=e=>{jr=e},Ur=e=>"string"==typeof e?Lr.color(e):Object.assign({},e),Br=()=>{},Hr=e=>{if(null===e)return Lr.noStroke.bind(Lr);if(void 0===e)return Br;const t=Ur(e);return Lr.stroke.bind(Lr,t)},Nr=e=>{if(null===e)return Lr.noFill.bind(Lr);if(void 0===e)return Br;const t=Ur(e);return Lr.fill.bind(Lr,t)},Dr=(e,t)=>{const r=Ur(e);return r.setAlpha(t),r},{HtmlUtility:Fr,RectangleRegion:Mr,FitBox:Wr,ArrayUtility:Gr,ArrayList:qr,Vector2D:Jr,Numeric:Kr,MathConstants:Zr,Random:Xr,Angle:$r}=kr,{sin:Yr,cos:eo}=Kr,{round:to}=Kr,{ONE_OVER_SQUARE_ROOT_TWO:ro,INVERSE255:oo}=Zr,{TWO_PI:no}=$r,ao=(e,t)=>{const r=new Array(t),o=t-1;if(1===t)r[0]="string"==typeof e?Lr.color(e):Object.assign({},e);else{const n=Lr.alpha(e);for(let a=1;a<t;a+=1){const t=n*(a/o);r[a]=Dr(e,t)}}return{colors:r,maxIndex:o}},so=(e,t)=>e.colors[to(e.maxIndex*t*oo)],io=Object.freeze({__proto__:null,create:ao,get:so}),lo=()=>{},co=Object.freeze({__proto__:null,create:(e,t,r)=>{if(1===r)return{stroke:Hr(e),fill:Nr(t)};let o,n;if(null===e)o=()=>Lr.noStroke();else if(void 0===e)o=lo;else{const t=ao(e,r);o=e=>Lr.stroke(so(t,e))}if(null===t)n=()=>Lr.noFill();else if(void 0===t)n=lo;else{const e=ao(t,r);n=t=>Lr.fill(so(e,t))}return{stroke:o,fill:n}},apply:(e,t)=>{if(t<1)return Lr.noStroke(),void Lr.noFill();e.stroke(t),e.fill(t)}}),uo=(e,t,r)=>{Lr.translate(t,r),e(),Lr.translate(-t,-r)},yo=(e,t)=>{Lr.rotate(t),e(),Lr.rotate(-t)},xo=(e,t)=>{Lr.scale(t),e(),Lr.scale(1/t)},po=e=>{const{controlPoint1:t,controlPoint2:r,targetPoint:o}=e;Lr.bezierVertex(t.x,t.y,r.x,r.y,o.x,o.y)},fo=e=>{const{point:t,controlLine:r}=e,{x:o,y:n}=t,a=Jr.fromPolar(.5*r.length,r.angle),s=a.x,i=a.y;Lr.line(o-s,n-i,o+s,n+i)};let _o=0,go=0,ho="DEFAULT";const mo={x:0,y:0},Oo=()=>!0,vo=e=>({onClicked:e.onClicked||Oo,onPressed:e.onPressed||Oo,onReleased:e.onReleased||Oo,onMoved:e.onMoved||Oo}),Ro=vo({}),bo=qr.create(32),Eo=vo({}),So=e=>e(mo),zo=e=>{const t=(e=>{switch(e){case 0:return e=>e.onClicked;case 1:return e=>e.onPressed;case 2:return e=>e.onReleased;case 3:return e=>e.onMoved}})(e);return()=>{if(!So(t(Ro)))return;const e=bo.array;let r=bo.size-1;for(;r>=0;){if(!So(t(e[r])))break;r-=1}So(t(Eo))}},wo=zo(0),Ao=zo(1),To=zo(2),Co=zo(3),Po=Object.freeze({__proto__:null,logicalPosition:mo,updatePosition:()=>{if(!jr)return;const e=1/jr.scaleFactor;mo.x=e*Lr.mouseX,mo.y=e*Lr.mouseY},setCenter:()=>Jr.Mutable.set(mo,jr.logicalCenterPosition),emptyCallback:Oo,stopCallback:()=>!1,createEventHandler:vo,topEventHandler:Ro,eventHandlerStack:bo,bottomEventHandler:Eo,addEventHandler:e=>{const t=vo(e);return qr.add(bo,t),t},removeEventHandler:e=>{qr.removeShiftElement(bo,e)},onClicked:wo,onPressed:Ao,onReleased:To,onMoved:Co,drawAtCursor:e=>uo(e,mo.x,mo.y)}),Io=Object.freeze({__proto__:null,anyKeyIsDown:e=>{for(const t of e)if(Lr.keyIsDown(t))return!0;return!1}});let ko=0,Lo=0;const jo={x:0,y:0};let Vo=!1,Qo=!1,Uo=!1,Bo=!1;const Ho=(e,t)=>Jr.Mutable.setCartesian(jo,e,t),No=()=>{switch(Lo=(Vo?-1:0)+(Uo?1:0),ko=(Qo?-1:0)+(Bo?1:0)){case-1:switch(Lo){case-1:Ho(-ro,-ro);break;case 0:Ho(-1,0);break;case 1:Ho(-ro,ro)}break;case 0:switch(Lo){case-1:Ho(0,-1);break;case 0:Ho(0,0);break;case 1:Ho(0,1)}break;case 1:switch(Lo){case-1:Ho(ro,-ro);break;case 0:Ho(1,0);break;case 1:Ho(ro,ro)}}},Do=Object.freeze({__proto__:null,get horizontalMove(){return ko},get verticalMove(){return Lo},unitVector:jo,get up(){return Vo},get left(){return Qo},get down(){return Uo},get right(){return Bo},onPressed:()=>{switch(Lr.key){case"w":Vo=!0;break;case"a":Qo=!0;break;case"s":Uo=!0;break;case"d":Bo=!0}switch(Lr.keyCode){case 38:Vo=!0;break;case 37:Qo=!0;break;case 40:Uo=!0;break;case 39:Bo=!0}No()},onReleased:()=>{switch(Lr.key){case"w":Vo=!1;break;case"a":Qo=!1;break;case"s":Uo=!1;break;case"d":Bo=!1}switch(Lr.keyCode){case 38:Vo=!1;break;case 37:Qo=!1;break;case 40:Uo=!1;break;case 39:Bo=!1}No()}});let Fo=!1;const Mo=[],Wo=(e,t,r,o)=>{const n=Fr.getElementSize("string"==typeof e?Fr.getElementOrBody(e):e),a=null!==r?Wr.calculateScaleFactor(t,n,r):1,s=Lr.createCanvas(a*t.width,a*t.height,o),i=1!==a?e=>xo(e,a):e=>e();return{p5Canvas:s,scaleFactor:a,logicalSize:t,logicalRegion:Mr.create(Jr.zero,t),drawScaled:i,logicalCenterPosition:{x:t.width/2,y:t.height/2}}},Go=Object.freeze({AlphaColor:io,KeyBoard:Io,Mouse:Po,MoveKeys:Do,ShapeColor:co,applyShake:()=>{if(0===_o)return;const{width:e,height:t}=jr.logicalSize,r="VERTICAL"===ho?0:Xr.signed(_o*e),o="HORIZONTAL"===ho?0:Xr.signed(_o*t);Lr.translate(r,o),(_o*=go)<.001&&(_o=0)},arcAtOrigin:(e,t,r,o,n,a)=>Lr.arc(0,0,e,t,r*no,o*no,n,a),get canvas(){return jr},circleAtOrigin:e=>Lr.circle(0,0,e),circularArcAtOrigin:(e,t,r,o,n)=>Lr.arc(0,0,e,e,t*no,r*no,o,n),colorWithAlpha:Dr,createPixels:e=>(Lr.push(),e(),Lr.pop(),Lr.loadPixels(),Lr.pixels),createScaledCanvas:Wo,drawBezierControlLines:e=>{Gr.loop(e,fo)},drawBezierCurve:e=>{const{startPoint:t,paths:r}=e;Lr.vertex(t.x,t.y),Gr.loop(r,po)},drawRotated:yo,drawScaled:xo,drawTransformed:(e,t,r,o,n)=>{Lr.translate(t,r),Lr.rotate(o),Lr.scale(n),e(),Lr.scale(1/n),Lr.rotate(-o),Lr.translate(-t,-r)},drawTranslated:uo,drawTranslatedAndRotated:(e,t,r,o)=>{Lr.translate(t,r),yo(e,o),Lr.translate(-t,-r)},graphicsToImage:e=>{const t=e,{width:r,height:o}=t,n=Lr.createImage(r,o);return n.copy(e,0,0,r,o,0,0,r,o),n},line:(e,t)=>Lr.line(e.x,e.y,t.x,t.y),lineAtOrigin:e=>Lr.line(0,0,e.x,e.y),lineWithMargin:(e,t,r)=>{const o=$r.betweenPoints(e,t),n=r*eo(o),a=r*Yr(o);return Lr.line(e.x+n,e.y+a,t.x-n,t.y-a)},onSetup:Mo,get p(){return Lr},parseColor:Ur,parseFill:Nr,parseStroke:Hr,pauseOrResume:()=>{Fo?(Lr.loop(),Fo=!1):(Lr.noLoop(),Fo=!0)},replaceCanvasPixels:e=>{Lr.pixels=e,Lr.updatePixels()},reverseColor:e=>Lr.color(255-Lr.red(e),255-Lr.green(e),255-Lr.blue(e),Lr.alpha(e)),setCanvas:Qr,setP5Instance:Vr,setShake:(e,t,r="DEFAULT",o=!1)=>{t>=1||(o||0===_o)&&(_o=e,go=t,ho=r)},startSketch:t=>{const r="string"==typeof t.htmlElement?Fr.getElementOrBody(t.htmlElement):t.htmlElement;new e(e=>{Vr(e),e.setup=()=>{Qr(Wo(r,t.logicalCanvasSize,t.fittingOption)),Gr.loop(Mo,t=>t(e)),Mo.length=0,t.initialize()},t.setP5Methods(e)},r)}}),qo=(e,t,r,o)=>{for(let n=r;n<o;n+=1)t(e[n],n,e)},Jo=(e,t)=>qo(e,t,0,e.length),Ko=(e,t,r,o)=>{let n=o;for(;n>r;)t(e[--n],n,e)},Zo=(e,t,r,o,n,a,s)=>{for(let i=o;i<n;i+=1)for(let o=a;o<s;o+=1)r(e[i],t[o])},Xo=(e,t,r,o)=>{const n=o-1;for(let a=r;a<n;a+=1)for(let r=a+1;r<o;r+=1)t(e[a],e[r])},$o=(e,t=1)=>t>0?e.reduce((e,r)=>e.concat(Array.isArray(r)?$o(r,t-1):r),[]):e,Yo=(e,t,r)=>{const o=r||e.length;for(let r=0;r<o;r+=1)e[r]=t(r);return e},en=Object.freeze({__proto__:null,loopRange:qo,loop:Jo,loopRangeBackwards:Ko,loopBackwards:(e,t)=>Ko(e,t,0,e.length),nestedLoopJoinWithRange:Zo,nestedLoopJoin:(e,t,r)=>Zo(e,t,r,0,e.length,0,t.length),roundRobinWithRange:Xo,roundRobin:(e,t)=>Xo(e,t,0,e.length),flatNaive:e=>[].concat(...e),flatRecursive:$o,populate:Yo,createPopulated:(e,t)=>Yo(new Array(t),e)}),tn=e=>({array:new Array(e),size:0}),rn=(e,t)=>{e.array[e.size]=t,e.size+=1},on=rn,nn=e=>{const{array:t,size:r}=e,o=t.length;t.length=r,t.length=o},an=e=>{e.size=0,nn(e)},sn=(e,t)=>{const{array:r,size:o}=e;for(let e=0;e<o;e+=1)if(r[e]===t)return e;return-1},ln=(e,t)=>{const{array:r,size:o}=e,n=r[t];return r.copyWithin(t,t+1,o),e.size=o-1,n},cn=(e,t)=>{const r=e.array,o=r[t],n=e.size-1;return r[t]=r[n],e.size=n,o},un=(e,t)=>{const{array:r,size:o}=e;let n=0,a=!1;for(let e=0;e<o;e+=1){const o=r[e];t(o,e,r)?a=!0:(r[n]=o,n+=1)}return e.size=n,a},yn=Object.freeze({__proto__:null,create:tn,createFilled:(e,t)=>({array:new Array(e).fill(t),size:e}),createPopulated:(e,t)=>({array:Yo(new Array(e),t),size:e}),fromArray:e=>({array:e,size:e.length}),add:rn,push:on,pop:e=>{const t=e.size-1,r=e.array[t];return e.size=t,r},clear:e=>{e.size=0},cleanUnusedSlots:nn,clearReference:an,loop:(e,t)=>qo(e.array,t,0,e.size),loopBackwards:(e,t)=>Ko(e.array,t,0,e.size),find:(e,t)=>{const{array:r,size:o}=e;for(let e=0;e<o;e+=1)if(t(r[e],e,r))return r[e]},findIndex:sn,removeShift:ln,removeShiftElement:(e,t)=>{const r=sn(e,t);return r>=0?ln(e,r):null},removeSwap:cn,removeSwapElement:(e,t)=>{const r=sn(e,t);return r>=0?cn(e,r):null},removeShiftAll:un,removeSwapAll:(e,t)=>{let r=!1;const o=e.array;for(let n=0;n<e.size;n+=1)t(o[n],n,o)&&(cn(e,n),r=!0);return r},populate:(e,t)=>(Yo(e.array,t),e.size=e.array.length,e),nestedLoopJoin:(e,t,r)=>Zo(e.array,t.array,r,0,e.size,0,t.size),roundRobin:(e,t)=>Xo(e.array,t,0,e.size)}),dn=Object.freeze({__proto__:null,create:e=>({value:void 0,factory:e}),get:e=>e.value||(e.value=e.factory()),clear:e=>{e.value=void 0}}),xn=Object.freeze({__proto__:null,from:(e,t)=>{const r={};for(const o of Object.keys(e))r[o]=new Array(t).fill(e[o]);return{data:r,length:t}}}),{abs:pn,acos:fn,asin:_n,atan:gn,atan2:hn,ceil:mn,cos:On,exp:vn,floor:Rn,log:bn,max:En,min:Sn,pow:zn,round:wn,sin:An,sqrt:Tn,tan:Cn,clz32:Pn,imul:In,sign:kn,log10:Ln,log2:jn,log1p:Vn,expm1:Qn,cosh:Un,sinh:Bn,tanh:Hn,acosh:Nn,asinh:Dn,atanh:Fn,hypot:Mn,trunc:Wn,fround:Gn,cbrt:qn}=Math,Jn=Tn,Kn=Pn,Zn=In,Xn=Mn,$n=Wn,Yn=Gn,ea=qn,ta=e=>e*e,ra=e=>e*e*e,oa=e=>ta(e*e),na=(e,t)=>e<t?e:t,aa=(e,t)=>0!==e||0!==t?hn(e,t):0,sa=(e,t)=>e*e+t*t,ia=(e,t)=>Tn(e*e+t*t),la=(e,t,r)=>e+r*(t-e),ca=Object.freeze({__proto__:null,abs:pn,acos:fn,asin:_n,atan:gn,atan2:hn,ceil:mn,cos:On,exp:vn,floor:Rn,log:bn,max:En,min:Sn,pow:zn,round:wn,sin:An,sqrt:Tn,tan:Cn,clz32:Pn,imul:In,sign:kn,log10:Ln,log2:jn,log1p:Vn,expm1:Qn,cosh:Un,sinh:Bn,tanh:Hn,acosh:Nn,asinh:Dn,atanh:Fn,hypot:Mn,trunc:Wn,fround:Gn,cbrt:qn,squareRoot:Jn,leadingZeros32:Kn,multInt:Zn,hypotenuse:Xn,integerPart:$n,floatRound:Yn,cubeRoot:ea,square:ta,cube:ra,pow4:oa,pow5:e=>ta(e*e)*e,squareInt:e=>In(e,e),cubeInt:e=>In(In(e,e),e),equal:(e,t)=>pn(e-t)<2220446049250313e-31,min2:na,max2:(e,t)=>e>t?e:t,atan2safe:aa,hypotenuseSquared2D:sa,hypotenuse2D:ia,lerp:la,clamp:(e,t,r)=>e<t?t:e>r?r:e}),{E:ua,LN10:ya,LN2:da,LOG2E:xa,LOG10E:pa}=Math,fa=Math.SQRT2,_a=Math.SQRT1_2,ga=Math.sqrt(3),ha=_a,ma=fa,Oa=1/ga,va=2/ga,Ra=ga/2,ba=_a,Ea=Object.freeze({__proto__:null,E:ua,LN10:ya,LN2:da,LOG2E:xa,LOG10E:pa,ONE_HALF:.5,ONE_THIRD:1/3,TWO_THIRDS:2/3,ONE_QUARTER:.25,TWO_QUARTERS:.5,THREE_QUARTERS:.75,INVERSE30:1/30,INVERSE60:1/60,INVERSE255:1/255,SQUARE_ROOT_TWO:fa,SQUARE_ROOT_ONE_HALF:_a,SQUARE_ROOT_THREE:ga,ONE_OVER_SQUARE_ROOT_TWO:ha,TWO_OVER_SQUARE_ROOT_TWO:ma,ONE_OVER_SQUARE_ROOT_THREE:Oa,TWO_OVER_SQUARE_ROOT_THREE:va,SQUARE_ROOT_THREE_OVER_TWO:Ra,SQUARE_ROOT_TWO_OVER_TWO:ba}),Sa=Math.PI,za=2*Sa,wa=Sa/2,Aa=Sa/3,Ta=Sa/4,Ca=3*Ta,Pa=ha,Ia=Ra,ka=Ia,La=Pa,ja=za/360,Va=360/za,Qa=Object.freeze({__proto__:null,PI:Sa,TWO_PI:za,HALF_PI:wa,THIRD_PI:Aa,QUARTER_PI:Ta,THREE_QUARTERS_PI:Ca,SIN30:.5,SIN45:Pa,SIN60:Ia,COS30:ka,COS45:La,COS60:.5,DEGREES_TO_RADIANS:ja,RADIANS_TO_DEGREES:Va,createArray:e=>{const t=new Array(e),r=za/e;for(let o=0;o<e;o+=1)t[o]=o*r;return t},fromDegrees:e=>ja*e,toDegrees:e=>Va*e,fromOrigin:e=>{const{x:t,y:r}=e;return 0!==t||0!==r?hn(e.y,e.x):0},betweenPoints:(e,t)=>{const r=t.x-e.x,o=t.y-e.y;return 0!==r||0!==o?hn(o,r):0},betweenCoordinates:(e,t,r,o)=>e!==r||t!==o?hn(r-e,o-t):0}),Ua=e=>{const{topLeft:t,rightBottom:r}=e;return{width:r.x-t.x,height:r.y-t.y}},Ba=e=>{const{topLeft:t,rightBottom:r}=e;return{x:(t.x+r.x)/2,y:(t.y+r.y)/2}},Ha=Object.freeze({__proto__:null,create:(e,t)=>({topLeft:e,rightBottom:{x:e.x+t.width,y:e.y+t.height}}),containsPoint:(e,t,r)=>{const{topLeft:o,rightBottom:n}=e,{x:a,y:s}=t;return a>=o.x+r&&s>=o.y+r&&a<n.x-r&&s<n.y-r},getWidth:e=>e.rightBottom.x-e.topLeft.x,getHeight:e=>e.rightBottom.y-e.topLeft.y,getSize:Ua,getCenterPoint:Ba,createScaled:(e,t,r)=>{const{topLeft:o,rightBottom:n}=e;switch(r){case 0:return{topLeft:o,rightBottom:{x:la(o.x,n.x,t),y:la(o.y,n.y,t)}};case 1:{const t=Ba(e),r=Ua(e),o=r.width/2,n=r.height/2;return{topLeft:{x:t.x-o,y:t.y-n},rightBottom:{x:t.x+o,y:t.y+n}}}}}}),Na=Object.freeze({__proto__:null,getAspectRatio:e=>e.width/e.height,getArea:e=>e.width*e.height}),Da=(e,t)=>({x:e*On(t),y:e*An(t)}),Fa=(e,t,r)=>({x:e.x+t*On(r),y:e.y+t*An(r)}),Ma=(e,t,r)=>({x:e.x-t*On(r),y:e.y-t*An(r)}),Wa=(e,t)=>ia(t.x-e.x,t.y-e.y),Ga=Object.freeze({__proto__:null,add:(e,t)=>(e.x+=t.x,e.y+=t.y,e),addCartesian:(e,t,r)=>(e.x+=t,e.y+=r,e),addPolar:(e,t,r)=>(e.x+=t*On(r),e.y+=t*An(r),e),subtract:(e,t)=>(e.x-=t.x,e.y-=t.y,e),subtractCartesian:(e,t,r)=>(e.x-=t,e.y-=r,e),subtractPolar:(e,t,r)=>(e.x-=t*On(r),e.y-=t*An(r),e),set:(e,t)=>(e.x=t.x,e.y=t.y,e),setCartesian:(e,t,r)=>(e.x=t,e.y=r,e),setPolar:(e,t,r)=>(e.x=t*On(r),e.y=t*An(r),e),multiply:(e,t)=>(e.x*=t,e.y*=t,e),divide:(e,t)=>(e.x/=t,e.y/=t,e)}),qa=(e,t,r)=>(r.x=e.x-t.x,r.y=e.y-t.y,r),Ja=(e,t,r)=>(r.x=e,r.y=t,r),Ka=(e,t,r)=>(r.x=e.x*t,r.y=e.y*t,r),Za=Object.freeze({__proto__:null,add:(e,t,r)=>(r.x=e.x+t.x,r.y=e.y+t.y,r),addCartesian:(e,t,r,o)=>(o.x=e.x+t,o.y=e.y+r,o),addPolar:(e,t,r,o)=>(o.x=e.x+t*On(r),o.y=e.y+t*An(r),o),subtract:qa,subtractCartesian:(e,t,r,o)=>(o.x=e.x-t,o.y=e.y-r,o),subtractPolar:(e,t,r,o)=>(o.x=e.x-t*On(r),o.y=e.y-t*An(r),o),setCartesian:Ja,setPolar:(e,t,r)=>(r.x=e*On(t),r.y=e*An(t),r),multiply:Ka,divide:(e,t,r)=>(r.x=e.x/t,r.y=e.y/t,r)}),Xa=Object.freeze({__proto__:null,Mutable:Ga,Assign:Za,zero:{x:0,y:0},isZero:e=>0===e.x&&0===e.y,fromPolar:Da,add:(e,t)=>({x:e.x+t.x,y:e.y+t.y}),addCartesian:(e,t,r)=>({x:e.x+t,y:e.y+r}),addPolar:Fa,subtract:(e,t)=>({x:e.x-t.x,y:e.y-t.y}),subtractCartesian:(e,t,r)=>({x:e.x-t,y:e.y-r}),subtractPolar:Ma,multiply:(e,t)=>({x:e.x*t,y:e.y*t}),divide:(e,t)=>({x:e.x/t,y:e.y/t}),distanceSquared:(e,t)=>sa(t.x-e.x,t.y-e.y),distance:Wa,toStr:e=>`{x:${e.x},y:${e.y}}`,copy:e=>({x:e.x,y:e.y}),lengthSquared:e=>sa(e.x,e.y),length:e=>ia(e.x,e.y),angle:e=>{const{x:t,y:r}=e;return 0!==t||0!==r?hn(e.y,e.x):0}}),$a=Object.freeze({__proto__:null,createCurve:e=>{const t=[],r=e.length;let o=e[0],n=o.controlLine;for(let a=1;a<r;a+=1){const r=e[a],s=r.controlLine;t.push({controlPoint1:Fa(o.point,.5*n.length,n.angle),controlPoint2:Ma(r.point,.5*s.length,s.angle),targetPoint:r.point}),o=r,n=s}return{startPoint:e[0].point,paths:t}}}),Ya=(e,t,r=.5)=>o=>{if(o<r)return r*e(o/r);{const e=1-r;return r+e*t((o-r)/e)}},es=ta,ts=e=>1-ta(e-1),rs=ra,os=e=>ra(e-1)+1,ns=oa,as=e=>1-oa(e-1),ss=Ya(es,ts),is=Ya(ts,es),ls=Ya(rs,os),cs=Ya(os,rs),us=Ya(ns,as),ys=Ya(as,ns),ds=Object.freeze({__proto__:null,bind:e=>(t,r,o)=>t+e(o)*(r-t),concatenate:(e,t,r=.5)=>o=>{if(o<r)return e(o/r);return t((o-r)/(1-r))},integrate:Ya,easeLinear:e=>e,easeInQuad:es,easeOutQuad:ts,easeInCubic:rs,easeOutCubic:os,easeInQuart:ns,easeOutQuart:as,createEaseOutBack:(e=1.70158)=>t=>{const r=t-1;return(e+1)*ra(r)+e*ta(r)+1},easeInOutQuad:ss,easeOutInQuad:is,easeInOutCubic:ls,easeOutInCubic:cs,easeInOutQuart:us,easeOutInQuart:ys}),{random:xs}=Math,ps=e=>xs()*e,fs=()=>xs()*za,_s=(e,t)=>e+xs()*(t-e),gs=e=>Rn(xs()*e),hs=e=>xs()<.5?e:-e,ms=Object.freeze({__proto__:null,value:ps,angle:fs,between:_s,inRange:e=>_s(e.start,e.end),integer:gs,integerBetween:(e,t)=>e+Rn(xs()*(t-e)),signed:hs,fromArray:e=>e[gs(e.length)],removeFromArray:e=>e.splice(gs(e.length),1)[0],bool:e=>xs()<e,fromAbsolute:e=>-e+2*xs()*e,vector:e=>Da(e,fs()),pointInRectangleRegion:e=>{const{topLeft:t,rightBottom:r}=e;return{x:_s(t.x,r.x),y:_s(t.y,r.y)}}}),Os=Object.freeze({__proto__:null,calculateScaleFactor:(e,t,r)=>{switch(r){default:case"FIT_TO_BOX":return na(t.width/e.width,t.height/e.height);case"FIT_WIDTH":return t.width/e.width;case"FIT_HEIGHT":return t.height/e.height}}}),vs=Object.freeze({__proto__:null,getElementOrBody:e=>document.getElementById(e)||document.body,getElementSize:e=>e===document.body?{width:window.innerWidth,height:window.innerHeight}:e.getBoundingClientRect()}),Rs=()=>{},bs=(e,t=Rs,r=Rs)=>({duration:e,progressRatioChangeRate:1/e,onProgress:t,onComplete:r,count:0,progressRatio:0,isCompleted:!1}),Es=bs(0),Ss=e=>{e.count=0,e.progressRatio=0,e.isCompleted=!1},zs=e=>{if(e.isCompleted)return!0;const{count:t,duration:r,progressRatioChangeRate:o}=e;return t>=r?(e.progressRatio=1,e.onProgress(e),e.isCompleted=!0,e.onComplete(e),!0):(e.onProgress(e),e.count+=1,e.progressRatio+=o,!1)},ws=(e,t)=>{const r=Object.assign({},e),o=e.onComplete;return r.onComplete=()=>{o(r),t(r)},r},As=e=>(zs(e.current),e.isCompleted),Ts=(e,t)=>{e.index=t,e.current=e.timers[t]},Cs=e=>{Jo(e.timers,Ss),Ts(e,0)},Ps=e=>(Ts(e,e.index+1),e.current),Is=(e,t=!1)=>{let r;const o=new Array(e.length),n=()=>Ps(r),a=e.length-1;for(let t=0;t<a;t+=1)o[t]=ws(e[t],n);return o[a]=ws(e[a],t?()=>Cs(r):()=>r.isCompleted=!0),r={timers:o,current:o[0],index:0,isCompleted:!1}},ks=Is([Es]),Ls=Object.freeze({__proto__:null,step:As,setUnitIndex:Ts,reset:Cs,next:Ps,create:Is,dummy:ks}),js=e=>tn(e),Vs=(e,t)=>rn(e,()=>zs(t)),Qs=(e,t)=>rn(e,()=>As(t)),Us=e=>e(),Bs=e=>{un(e,Us)},Hs=e=>an(e),Ns=Object.freeze({__proto__:null,create:js,addTimer:Vs,addChain:Qs,step:Bs,clear:Hs,construct:e=>{const t=js(e);return{addTimer:e=>Vs(t,e),addChain:e=>Qs(t,e),step:()=>Bs(t),clear:()=>Hs(t)}}}),Ds=Object.freeze({__proto__:null,Chain:Ls,Set:Ns,emptyListener:Rs,create:bs,dummy:Es,reset:Ss,step:zs,addOnComplete:ws}),Fs=new Map([["A",".-"],["B","-..."],["C","-.-."],["D","-.."],["E","."],["F","..-."],["G","--."],["H","...."],["I",".."],["J",".---"],["K","-.-"],["L",".-.."],["M","--"],["N","-."],["O","---"],["P",".--."],["Q","--.-"],["R",".-."],["S","..."],["T","-"],["U","..-"],["V","...-"],["W",".--"],["X","-..-"],["Y","-.--"],["Z","--.."],["1",".----"],["2","..---"],["3","...--"],["4","....-"],["5","....."],["6","-...."],["7","--..."],["8","---.."],["9","----."],["0","-----"],[".",".-.-.-"],[",","--..--"],[":","---..."],["?","..--.."],["'",".----."],["!","-.-.--"],["-","-....-"],["/","-..-."],["@",".--.-."],["(","-.--."],[")","-.--.-"],['"',".-..-."],["=","-...-"],["+",".-.-."]]);class Ms{constructor(e,t,r){this.isOn=e,this.length=t,this.codeString=r;let o="";const n=e?"1":"0";for(let e=0;e<t;e+=1)o+=n;this.binaryString=o}}class Ws extends Ms{constructor(e,t){super(!0,e,t)}}class Gs extends Ms{constructor(e,t){super(!1,e,t)}}const qs=new Ws(1,"."),Js=new Ws(3,"-"),Ks=new Gs(1,""),Zs=new Gs(3," "),Xs=new Gs(7," / "),$s=new Gs(0,"");const Ys=Object.freeze({__proto__:null,Unit:Ms,DIT:qs,DAH:Js,INTER_ELEMENT_GAP:Ks,SHORT_GAP:Zs,MEDIUM_GAP:Xs,NUL:$s,encode:function(e){const t=e.toUpperCase(),r=[];let o=void 0;for(let e=0,n=t.length;e<n;e+=1){const n=t.charAt(e);if(" "===n){o=Xs;continue}if(0===n.charCodeAt(0)){o&&r.push(o),o=void 0,r.push($s);continue}const a=Fs.get(n);if(a){for(let e=0,t=a.length;e<t;e+=1){switch(o&&r.push(o),a.charAt(e)){case".":r.push(qs);break;case"-":case"_":r.push(Js);break;default:continue}o=Ks}o=Zs}}return r},toString:e=>e.reduce((e,t)=>e+t.codeString,""),toBinaryString:e=>e.reduce((e,t)=>e+t.binaryString,""),getTotalLength:e=>e.reduce((e,t)=>e+t.length,0)});function ei(e){return 1e3/(e/60*50)}const ti=e=>{e.timeout&&(e.off($s),clearTimeout(e.timeout),e.timeout=void 0),e.index=0},ri=(e,t,r)=>{t.timeout=setTimeout(()=>{t.timeout=void 0,e(t)},r)},oi=e=>{const t=(e=>{const{unitTime:t,signals:r,index:o,on:n,off:a}=e,s=r[o];return s.isOn?n(s):a(s),t*s.length})(e);e.index+=1,e.index<e.signals.length?ri(oi,e,t):(e.timeout=setTimeout(()=>{e.loop?(e.off($s),e.timeout=void 0):(e.off(Xs),ri(oi,e,Xs.length))},t),e.index=0)},ni=Object.freeze({__proto__:null,wpmToDotDuration:ei,create:(e,t,r=25,o=[],n=!1)=>({on:e,off:t,wpm:r,unitTime:ei(r),loop:n,signals:o,index:0,timeout:void 0}),stop:ti,start:(e,t)=>{ti(e),t&&(e.signals=t),oi(e)}}),ai=Object.freeze({__proto__:null,Signal:Ys,Channel:ni}),si=(e,t,r)=>{e.x+=e.vx,e.y+=e.vy,e.vx+=t,e.vy+=r},ii=(e,t,r)=>{e.vx2=e.vx+.5*t,e.vy2=e.vy+.5*r,e.vx+=t,e.vy+=r,e.x+=e.vx2,e.y+=e.vy2},li=(e,t,r)=>{e.vx=e.vx2+.5*t,e.vy=e.vy2+.5*r},ci=Object.freeze({__proto__:null,createQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0}),updateEuler:e=>{e.x+=e.vx,e.y+=e.vy},updateEulerAccelerated:si,updateVerlet:ii,postUpdateVerlet:li,positionVector:(e,t)=>Ja(e.x,e.y,t),velocityVector:(e,t)=>Ja(e.vx,e.vy,t),getSpeed:e=>ia(e.vx,e.vy),getVelocityAngle:e=>aa(e.vy,e.vx),truncateVelocity:(e,t)=>{const{vx:r,vy:o}=e;if(sa(r,o)<=t*t)return e;const n=hn(o,r);return e.vx=t*On(n),e.vy=t*An(n),e},setVelocity:(e,t)=>(e.vx=t.x,e.vy=t.y,e),setVelocityCartesian:(e,t,r)=>(e.vx=t,e.vy=r,e),setVelocityPolar:(e,t,r)=>(e.vx=t*On(r),e.vy=t*An(r),e),bounceInRectangleRegion:(e,t,r)=>{const{x:o,y:n,vx:a,vy:s}=r,{x:i,y:l}=e.topLeft,{x:c,y:u}=e.rightBottom;return o<i?(r.x=i,a<0&&(r.vx=-t*a),!0):o>=c?(r.x=c-1,a>0&&(r.vx=-t*a),!0):n<l?(r.y=l,s<0&&(r.vy=-t*s),!0):n>=u&&(r.y=u-1,s>0&&(r.vy=-t*s),!0)}}),ui=(e,t)=>(e.fx+=t.x,e.fy+=t.y,e),yi=Object.freeze({__proto__:null,createQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0,fx:0,fy:0}),createVerletQuantity:(e,t,r,o)=>({x:e,y:t,vx:r||0,vy:o||0,vx2:0,vy2:0,fx:0,fy:0}),updateEuler:e=>{si(e,e.fx,e.fy),e.fx=0,e.fy=0},updateVerlet:e=>{ii(e,e.fx,e.fy),e.fx=0,e.fy=0},postUpdateVerlet:e=>{li(e,e.fx,e.fy),e.fx=0,e.fy=0},forceVector:(e,t)=>Ja(e.fx,e.fy,t),truncateForce:(e,t)=>{const{fx:r,fy:o}=e;if(sa(r,o)<=t*t)return e;const n=hn(o,r);return e.fx=t*On(n),e.fy=t*An(n),e},addForce:ui,addForceCartesian:(e,t,r)=>(e.fx+=t,e.fy+=r,e),addForcePolar:(e,t,r)=>(e.fx+=t*On(r),e.fy+=t*An(r),e)}),di=Object.freeze({__proto__:null,createQuantity:(e,t,r,o,n)=>({x:e,y:t,vx:o||0,vy:n||0,fx:0,fy:0,mass:r}),createVerletQuantity:(e,t,r,o,n)=>({x:e,y:t,vx:o||0,vy:n||0,vx2:0,vy2:0,fx:0,fy:0,mass:r}),updateEuler:e=>{const{mass:t}=e;si(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0},updateVerlet:e=>{const{mass:t}=e;ii(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0},postUpdateVerlet:e=>{const{mass:t}=e;li(e,e.fx/t,e.fy/t),e.fx=0,e.fy=0}});let xi=1,pi=-xi;const fi=(e,t,r,o)=>Ka(e,pi*t/(r*r*r),o),_i=(e,t,r)=>fi(qa(t,e,r),e.mass*t.mass,Wa(e,t),r),gi=(e,t,r)=>Ka(e,pi/(t*t*t),r),hi=(e,t,r)=>gi(qa(t,e,r),Wa(e,t),r),mi=(e,t,r)=>{const{x:o,y:n}=r;e.fx-=o,e.fy-=n,t.fx+=o,t.fy+=n},Oi={x:0,y:0},vi={precalculated:(e,t,r,o)=>ui(e,fi(t,r,o,Oi)),calculate:(e,t)=>ui(t,_i(e,t,Oi)),precalculatedSimple:(e,t,r)=>ui(e,gi(t,r,Oi)),calculateSimple:(e,t)=>ui(t,hi(e,t,Oi))},Ri={precalculated:(e,t,r,o,n)=>mi(e,t,fi(r,o,n,Oi)),calculate:(e,t)=>mi(e,t,_i(e,t,Oi)),precalculatedSimple:(e,t,r,o)=>mi(e,t,gi(r,o,Oi)),calculateSimple:(e,t)=>mi(e,t,hi(e,t,Oi))},bi=Object.freeze({__proto__:null,get constant(){return xi},setConstant:e=>{pi=-(xi=e)},calculateCore:fi,calculate:_i,calculateCoreSimple:gi,calculateSimple:hi,attract:vi,attractEachOther:Ri}),Ei=Object.freeze({__proto__:null,update:e=>{e.rotationAngle+=e.rotationVelocity},createRandomQuantity:(e,t)=>({rotationAngle:fs(),rotationVelocity:hs(_s(e,t))})}),Si=Object.freeze({__proto__:null,withRandomHue:(e,t)=>[ps(360),e,t],toRGB:e=>{const[t,r,o]=e,n=o*r,a=t*(1/60),s=n*(1-pn(a%2-1));let i;switch(Rn(a)){case 0:i=[n,s,0];break;case 1:i=[s,n,0];break;case 2:i=[0,n,s];break;case 3:i=[0,s,n];break;case 4:i=[s,0,n];break;case 5:i=[n,0,s];break;default:i=[0,0,0]}const l=o-n;return[i[0]+l,i[1]+l,i[2]+l]}}),zi=Object.freeze({Angle:Qa,ArrayList:yn,ArrayUtility:en,Bezier:$a,Dynamics:di,Easing:ds,FitBox:Os,Gravitation:bi,HSV:Si,HtmlUtility:vs,Kinematics:ci,Lazy:dn,MathConstants:Ea,MorseCode:ai,Numeric:ca,Random:ms,RectangleRegion:Ha,RectangleSize:Na,Rotation:Ei,SimpleDynamics:yi,StructureOfArrays:xn,Timer:Ds,Vector2D:Xa}),wi=vs.getElementOrBody("Contours"),Ai={width:800,height:800},{ArrayUtility:Ti,Vector2D:Ci,ArrayList:Pi,Numeric:Ii,Random:ki,Angle:Li,Kinematics:ji,SimpleDynamics:Vi,Rotation:Qi,Gravitation:Ui,RectangleRegion:Bi}=zi,{onSetup:Hi,Mouse:Ni}=Go;let Di,Fi;Hi.push(e=>{Di=e}),Hi.push(()=>{Fi=jr});let Mi=0;const Wi=e=>{Mi=e},Gi=Li.createArray(6).map(e=>Ci.fromPolar(1,e)),{square:qi}=Ii,Ji=()=>{const e=ki.value(256);return t=>10+150*qi(Di.noise(e+t))},Ki=()=>{const e=ki.pointInRectangleRegion(Fi.logicalRegion),t=ki.vector(5);return Object.assign(Object.assign({},Vi.createVerletQuantity(e.x,e.y,t.x,t.y)),{rotationAngle:ki.angle(),rotationVelocity:0,rotationFactor:ki.signed(1),vertexDistance:Ti.createPopulated(Ji,6),color:Di.color(ki.value(360),1,1,.6),time:0,deltaTime:.01})};let Zi;Hi.push(()=>{Zi=ji.bounceInRectangleRegion.bind(void 0,Fi.logicalRegion,.7)});const Xi=e=>{Vi.updateVerlet(e),Qi.update(e)},$i=e=>{const t=ji.getSpeed(e);Vi.truncateForce(e,Mi),Vi.postUpdateVerlet(e),Zi(e)&&t>5&&(e.deltaTime+=1),e.rotationVelocity=e.rotationFactor*t*.01;const{deltaTime:r}=e,o=.005*t;e.time+=r+o,e.deltaTime=.01+.9*(r-.01)},Yi=e=>{const{x:t,y:r,rotationAngle:o,vertexDistance:n,time:a}=e;Di.stroke(e.color),Di.translate(t,r),Di.rotate(o),Di.beginShape();for(let e=0;e<9;e+=1){const t=e%6,r=n[t](a),o=Gi[t];Di.curveVertex(r*o.x,r*o.y)}Di.endShape(),Di.rotate(-o),Di.translate(-t,-r)},el=e=>{e.deltaTime+=20,Vi.addForcePolar(e,100,ki.angle())},tl=Pi.create(256),rl=Ui.attract.calculateSimple.bind(void 0,Ni.logicalPosition),ol=e=>{rl(e),(e=>{Vi.addForceCartesian(e,-.3*e.vx,-.3*e.vy),Vi.addForcePolar(e,ki.value(.5),ki.angle())})(e)},nl=()=>{Ui.setConstant(1e5),Wi(.5),Pi.loop(tl,el)};nl();const{startSketch:al,createPixels:sl,replaceCanvasPixels:il,pauseOrResume:ll}=Go;let cl,ul;const yl=()=>{Di.push(),Di.colorMode(Di.HSB,360,1,1,1),Pi.clearReference(tl);for(let e=0;e<16;e+=1)Pi.add(tl,Ki());Di.pop()},dl=Ni.drawAtCursor.bind(void 0,()=>{const e=Di.mouseIsPressed;e&&Di.rotate(.1*Di.frameCount);const t=e?30:20;Di.stroke(ul),Di.strokeWeight(e?10:6),Di.line(-t,0,t,0),Di.line(0,-t,0,t),e&&Di.rotate(-.1*Di.frameCount)}),xl=()=>{Di.blendMode(Di.DIFFERENCE),Di.stroke(192),Di.strokeWeight(6),Di.noFill(),Pi.loop(tl,Yi),dl()},pl=()=>{Pi.loop(tl,Xi),Pi.loop(tl,ol),Pi.loop(tl,$i),cl(),Fi.drawScaled(xl)},fl=()=>{switch(Di.key){case"p":ll();break;case"g":Di.save("image.png")}},_l=()=>{if(Ui.setConstant(1e6),Wi(3),(()=>Bi.containsPoint(Fi.logicalRegion,Ni.logicalPosition,0))())return!1};al({htmlElement:wi,logicalCanvasSize:Ai,initialize:()=>{const e=sl(()=>{Fi.drawScaled(()=>{const{width:e,height:t}=Ai,r=Di.createGraphics(e/4,t/4);r.background(236,232,240),r.noStroke(),r.fill(253,252,255),r.ellipse(r.width/2,r.height/2,r.width,r.height),r.filter(Di.BLUR,10),Di.image(r,0,0,e,t)})});cl=()=>il(e),ul=Di.color(96),Ni.setCenter(),yl()},setP5Methods:e=>{e.draw=pl,e.keyTyped=fl,e.mouseMoved=Ni.updatePosition,e.mouseDragged=Ni.updatePosition,e.mousePressed=_l,e.mouseReleased=nl},fittingOption:void 0})}(p5);